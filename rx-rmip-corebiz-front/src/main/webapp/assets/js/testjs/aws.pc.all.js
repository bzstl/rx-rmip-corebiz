/*!
 * jQuery UI Core 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */
(function(g,i){var h=0,j=/^ui-id-\d+$/;g.ui=g.ui||{};g.extend(g.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});g.fn.extend({focus:(function(a){return function(d,c){return typeof d==="number"?this.each(function(){var e=this;setTimeout(function(){g(e).focus();if(c){c.call(e)}},d)}):a.apply(this,arguments)}})(g.fn.focus),scrollParent:function(){var a;if((g.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){a=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(g.css(this,"position"))&&(/(auto|scroll)/).test(g.css(this,"overflow")+g.css(this,"overflow-y")+g.css(this,"overflow-x"))}).eq(0)}else{a=this.parents().filter(function(){return(/(auto|scroll)/).test(g.css(this,"overflow")+g.css(this,"overflow-y")+g.css(this,"overflow-x"))}).eq(0)}return(/fixed/).test(this.css("position"))||!a.length?g(document):a},zIndex:function(a){if(a!==i){return this.css("zIndex",a)}if(this.length){var d=g(this[0]),e,c;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){c=parseInt(d.css("zIndex"),10);if(!isNaN(c)&&c!==0){return c}}d=d.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++h)}})},removeUniqueId:function(){return this.each(function(){if(j.test(this.id)){g(this).removeAttr("id")}})}});function k(e,m){var c,d,f,a=e.nodeName.toLowerCase();if("area"===a){c=e.parentNode;d=c.name;if(!e.href||!d||c.nodeName.toLowerCase()!=="map"){return false}f=g("img[usemap=#"+d+"]")[0];return !!f&&l(f)}return(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||m:m)&&l(e)}function l(a){return g.expr.filters.visible(a)&&!g(a).parents().addBack().filter(function(){return g.css(this,"visibility")==="hidden"}).length}g.extend(g.expr[":"],{data:g.expr.createPseudo?g.expr.createPseudo(function(a){return function(c){return !!g.data(c,a)}}):function(a,c,d){return !!g.data(a,d[3])},focusable:function(a){return k(a,!isNaN(g.attr(a,"tabindex")))},tabbable:function(a){var d=g.attr(a,"tabindex"),c=isNaN(d);return(c||d>=0)&&k(a,!c)}});if(!g("<a>").outerWidth(1).jquery){g.each(["Width","Height"],function(e,n){var f=n==="Width"?["Left","Right"]:["Top","Bottom"],d=n.toLowerCase(),a={innerWidth:g.fn.innerWidth,innerHeight:g.fn.innerHeight,outerWidth:g.fn.outerWidth,outerHeight:g.fn.outerHeight};function c(s,t,m,q){g.each(f,function(){t-=parseFloat(g.css(s,"padding"+this))||0;if(m){t-=parseFloat(g.css(s,"border"+this+"Width"))||0}if(q){t-=parseFloat(g.css(s,"margin"+this))||0}});return t}g.fn["inner"+n]=function(m){if(m===i){return a["inner"+n].call(this)}return this.each(function(){g(this).css(d,c(this,m)+"px")})};g.fn["outer"+n]=function(m,o){if(typeof m!=="number"){return a["outer"+n].call(this,m)}return this.each(function(){g(this).css(d,c(this,m,true,o)+"px")})}})}if(!g.fn.addBack){g.fn.addBack=function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}}if(g("<a>").data("a-b","a").removeData("a-b").data("a-b")){g.fn.removeData=(function(a){return function(c){if(arguments.length){return a.call(this,g.camelCase(c))}else{return a.call(this)}}})(g.fn.removeData)}g.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());g.support.selectstart="onselectstart" in document.createElement("div");g.fn.extend({disableSelection:function(){return this.bind((g.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});g.extend(g.ui,{plugin:{add:function(e,d,a){var f,c=g.ui[e].prototype;for(f in a){c.plugins[f]=c.plugins[f]||[];c.plugins[f].push([d,a[f]])}},call:function(f,d,e){var c,a=f.plugins[d];if(!a||!f.element[0].parentNode||f.element[0].parentNode.nodeType===11){return}for(c=0;c<a.length;c++){if(f.options[a[c][0]]){a[c][1].apply(f.element,e)}}}},hasScroll:function(a,d){if(g(a).css("overflow")==="hidden"){return false}var e=(d&&d==="left")?"scrollLeft":"scrollTop",c=false;if(a[e]>0){return true}a[e]=1;c=(a[e]>0);a[e]=0;return c}})})(jQuery);
/*!
 * jQuery UI Widget 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */
(function(f,h){var g=0,i=Array.prototype.slice,j=f.cleanData;f.cleanData=function(e){for(var d=0,c;(c=e[d])!=null;d++){try{f(c).triggerHandler("remove")}catch(a){}}j(e)};f.widget=function(t,s,a){var e,d,p,c,q={},o=t.split(".")[0];t=t.split(".")[1];e=o+"-"+t;if(!a){a=s;s=f.Widget}f.expr[":"][e.toLowerCase()]=function(k){return !!f.data(k,e)};f[o]=f[o]||{};d=f[o][t];p=f[o][t]=function(l,k){if(!this._createWidget){return new p(l,k)}if(arguments.length){this._createWidget(l,k)}};f.extend(p,d,{version:a.version,_proto:f.extend({},a),_childConstructors:[]});c=new s();c.options=f.widget.extend({},c.options);f.each(a,function(k,l){if(!f.isFunction(l)){q[k]=l;return}q[k]=(function(){var n=function(){return s.prototype[k].apply(this,arguments)},m=function(u){return s.prototype[k].apply(this,u)};return function(){var v=this._super,x=this._superApply,w;this._super=n;this._superApply=m;w=l.apply(this,arguments);this._super=v;this._superApply=x;return w}})()});p.prototype=f.widget.extend(c,{widgetEventPrefix:d?c.widgetEventPrefix:t},q,{constructor:p,namespace:o,widgetName:t,widgetFullName:e});if(d){f.each(d._childConstructors,function(l,k){var m=k.prototype;f.widget(m.namespace+"."+m.widgetName,p,k._proto)});delete d._childConstructors}else{s._childConstructors.push(p)}f.widget.bridge(t,p)};f.widget.extend=function(a){var l=i.call(arguments,1),c=0,m=l.length,e,d;for(;c<m;c++){for(e in l[c]){d=l[c][e];if(l[c].hasOwnProperty(e)&&d!==h){if(f.isPlainObject(d)){a[e]=f.isPlainObject(a[e])?f.widget.extend({},a[e],d):f.widget.extend({},d)}else{a[e]=d}}}}return a};f.widget.bridge=function(c,d){var a=d.prototype.widgetFullName||c;f.fn[c]=function(m){var o=typeof m==="string",n=i.call(arguments,1),e=this;m=!o&&n.length?f.widget.extend.apply(null,[m].concat(n)):m;if(o){this.each(function(){var l,k=f.data(this,a);if(!k){return f.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+m+"'")}if(!f.isFunction(k[m])||m.charAt(0)==="_"){return f.error("no such method '"+m+"' for "+c+" widget instance")}l=k[m].apply(k,n);if(l!==k&&l!==h){e=l&&l.jquery?e.pushStack(l.get()):l;return false}})}else{this.each(function(){var k=f.data(this,a);if(k){k.option(m||{})._init()}else{f.data(this,a,new d(m,this))}})}return e}};f.Widget=function(){};f.Widget._childConstructors=[];f.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(c,a){a=f(a||this.defaultElement||this)[0];this.element=f(a);this.uuid=g++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=f.widget.extend({},this.options,this._getCreateOptions(),c);this.bindings=f();this.hoverable=f();this.focusable=f();if(a!==this){f.data(a,this.widgetFullName,this);this._on(true,this.element,{remove:function(d){if(d.target===a){this.destroy()}}});this.document=f(a.style?a.ownerDocument:a.document||a);this.window=f(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:f.noop,_getCreateEventData:f.noop,_create:f.noop,_init:f.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(f.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:f.noop,widget:function(){return this.element},option:function(d,c){var n=d,a,e,m;if(arguments.length===0){return f.widget.extend({},this.options)}if(typeof d==="string"){n={};a=d.split(".");d=a.shift();if(a.length){e=n[d]=f.widget.extend({},this.options[d]);for(m=0;m<a.length-1;m++){e[a[m]]=e[a[m]]||{};e=e[a[m]]}d=a.pop();if(c===h){return e[d]===h?null:e[d]}e[d]=c}else{if(c===h){return this.options[d]===h?null:this.options[d]}n[d]=c}}this._setOptions(n);return this},_setOptions:function(c){var a;for(a in c){this._setOption(a,c[a])}return this},_setOption:function(c,a){this.options[c]=a;if(c==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!a).attr("aria-disabled",a);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(c,d,e){var a,k=this;if(typeof c!=="boolean"){e=d;d=c;c=false}if(!e){e=d;d=this.element;a=this.widget()}else{d=a=f(d);this.bindings=this.bindings.add(d)}f.each(e,function(u,v){function q(){if(!c&&(k.options.disabled===true||f(this).hasClass("ui-state-disabled"))){return}return(typeof v==="string"?k[v]:v).apply(k,arguments)}if(typeof v!=="string"){q.guid=v.guid=v.guid||q.guid||f.guid++}var w=u.match(/^(\w+)\s*(.*)$/),s=w[1]+k.eventNamespace,t=w[2];if(t){a.delegate(t,s,q)}else{d.bind(s,q)}})},_off:function(a,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;a.unbind(c).undelegate(c)},_delay:function(a,c){function d(){return(typeof a==="string"?e[a]:a).apply(e,arguments)}var e=this;return setTimeout(d,c||0)},_hoverable:function(a){this.hoverable=this.hoverable.add(a);this._on(a,{mouseenter:function(c){f(c.currentTarget).addClass("ui-state-hover")},mouseleave:function(c){f(c.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(a){this.focusable=this.focusable.add(a);this._on(a,{focusin:function(c){f(c.currentTarget).addClass("ui-state-focus")},focusout:function(c){f(c.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(m,l,e){var a,c,d=this.options[m];e=e||{};l=f.Event(l);l.type=(m===this.widgetEventPrefix?m:this.widgetEventPrefix+m).toLowerCase();l.target=this.element[0];c=l.originalEvent;if(c){for(a in c){if(!(a in l)){l[a]=c[a]}}}this.element.trigger(l,e);return !(f.isFunction(d)&&d.apply(this.element[0],[l].concat(e))===false||l.isDefaultPrevented())}};f.each({show:"fadeIn",hide:"fadeOut"},function(a,c){f.Widget.prototype["_"+a]=function(m,n,d){if(typeof n==="string"){n={effect:n}}var e,o=!n?a:n===true||typeof n==="number"?c:n.effect||c;n=n||{};if(typeof n==="number"){n={duration:n}}e=!f.isEmptyObject(n);n.complete=d;if(n.delay){m.delay(n.delay)}if(e&&f.effects&&f.effects.effect[o]){m[a](n)}else{if(o!==a&&m[o]){m[o](n.duration,n.easing,d)}else{m.queue(function(k){f(this)[a]();if(d){d.call(m[0])}k()})}}}})})(jQuery);
/*!
 * jQuery UI Position 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */
(function(f,d){f.ui=f.ui||{};var k,l=Math.max,p=Math.abs,n=Math.round,e=/left|center|right/,i=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,c=/%$/,h=f.fn.position;function o(t,s,q){return[parseFloat(t[0])*(c.test(t[0])?s/100:1),parseFloat(t[1])*(c.test(t[1])?q/100:1)]}function j(q,s){return parseInt(f.css(q,s),10)||0}function g(s){var q=s[0];if(q.nodeType===9){return{width:s.width(),height:s.height(),offset:{top:0,left:0}}}if(f.isWindow(q)){return{width:s.width(),height:s.height(),offset:{top:s.scrollTop(),left:s.scrollLeft()}}}if(q.preventDefault){return{width:0,height:0,offset:{top:q.pageY,left:q.pageX}}}return{width:s.outerWidth(),height:s.outerHeight(),offset:s.offset()}}f.position={scrollbarWidth:function(){if(k!==d){return k}var s,q,u=f("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),t=u.children()[0];f("body").append(u);s=t.offsetWidth;u.css("overflow","scroll");q=t.offsetWidth;if(s===q){q=u[0].clientWidth}u.remove();return(k=s-q)},getScrollInfo:function(v){var u=v.isWindow?"":v.element.css("overflow-x"),t=v.isWindow?"":v.element.css("overflow-y"),s=u==="scroll"||(u==="auto"&&v.width<v.element[0].scrollWidth),q=t==="scroll"||(t==="auto"&&v.height<v.element[0].scrollHeight);return{width:q?f.position.scrollbarWidth():0,height:s?f.position.scrollbarWidth():0}},getWithinInfo:function(s){var t=f(s||window),q=f.isWindow(t[0]);return{element:t,isWindow:q,offset:t.offset()||{left:0,top:0},scrollLeft:t.scrollLeft(),scrollTop:t.scrollTop(),width:q?t.width():t.outerWidth(),height:q?t.height():t.outerHeight()}}};f.fn.position=function(B){if(!B||!B.of){return h.apply(this,arguments)}B=f.extend({},B);var C,y,w,A,v,q,x=f(B.of),u=f.position.getWithinInfo(B.within),s=f.position.getScrollInfo(u),z=(B.collision||"flip").split(" "),t={};q=g(x);if(x[0].preventDefault){B.at="left top"}y=q.width;w=q.height;A=q.offset;v=f.extend({},A);f.each(["my","at"],function(){var F=(B[this]||"").split(" "),E,D;if(F.length===1){F=e.test(F[0])?F.concat(["center"]):i.test(F[0])?["center"].concat(F):["center","center"]}F[0]=e.test(F[0])?F[0]:"center";F[1]=i.test(F[1])?F[1]:"center";E=a.exec(F[0]);D=a.exec(F[1]);t[this]=[E?E[0]:0,D?D[0]:0];B[this]=[m.exec(F[0])[0],m.exec(F[1])[0]]});if(z.length===1){z[1]=z[0]}if(B.at[0]==="right"){v.left+=y}else{if(B.at[0]==="center"){v.left+=y/2}}if(B.at[1]==="bottom"){v.top+=w}else{if(B.at[1]==="center"){v.top+=w/2}}C=o(t.at,y,w);v.left+=C[0];v.top+=C[1];return this.each(function(){var E,N,G=f(this),I=G.outerWidth(),F=G.outerHeight(),H=j(this,"marginLeft"),D=j(this,"marginTop"),M=I+H+j(this,"marginRight")+s.width,L=F+D+j(this,"marginBottom")+s.height,J=f.extend({},v),K=o(t.my,G.outerWidth(),G.outerHeight());if(B.my[0]==="right"){J.left-=I}else{if(B.my[0]==="center"){J.left-=I/2}}if(B.my[1]==="bottom"){J.top-=F}else{if(B.my[1]==="center"){J.top-=F/2}}J.left+=K[0];J.top+=K[1];if(!f.support.offsetFractions){J.left=n(J.left);J.top=n(J.top)}E={marginLeft:H,marginTop:D};f.each(["left","top"],function(P,O){if(f.ui.position[z[P]]){f.ui.position[z[P]][O](J,{targetWidth:y,targetHeight:w,elemWidth:I,elemHeight:F,collisionPosition:E,collisionWidth:M,collisionHeight:L,offset:[C[0]+K[0],C[1]+K[1]],my:B.my,at:B.at,within:u,elem:G})}});if(B.using){N=function(R){var T=A.left-J.left,Q=T+y-I,S=A.top-J.top,P=S+w-F,O={target:{element:x,left:A.left,top:A.top,width:y,height:w},element:{element:G,left:J.left,top:J.top,width:I,height:F},horizontal:Q<0?"left":T>0?"right":"center",vertical:P<0?"top":S>0?"bottom":"middle"};if(y<I&&p(T+Q)<y){O.horizontal="center"}if(w<F&&p(S+P)<w){O.vertical="middle"}if(l(p(T),p(Q))>l(p(S),p(P))){O.important="horizontal"}else{O.important="vertical"}B.using.call(this,R,O)}}G.offset(f.extend(J,{using:N}))})};f.ui.position={fit:{left:function(v,u){var t=u.within,x=t.isWindow?t.scrollLeft:t.offset.left,z=t.width,w=v.left-u.collisionPosition.marginLeft,y=x-w,s=w+u.collisionWidth-z-x,q;if(u.collisionWidth>z){if(y>0&&s<=0){q=v.left+y+u.collisionWidth-z-x;v.left+=y-q}else{if(s>0&&y<=0){v.left=x}else{if(y>s){v.left=x+z-u.collisionWidth}else{v.left=x}}}}else{if(y>0){v.left+=y}else{if(s>0){v.left-=s}else{v.left=l(v.left-w,v.left)}}}},top:function(u,t){var s=t.within,y=s.isWindow?s.scrollTop:s.offset.top,z=t.within.height,w=u.top-t.collisionPosition.marginTop,x=y-w,v=w+t.collisionHeight-z-y,q;if(t.collisionHeight>z){if(x>0&&v<=0){q=u.top+x+t.collisionHeight-z-y;u.top+=x-q}else{if(v>0&&x<=0){u.top=y}else{if(x>v){u.top=y+z-t.collisionHeight}else{u.top=y}}}}else{if(x>0){u.top+=x}else{if(v>0){u.top-=v}else{u.top=l(u.top-w,u.top)}}}}},flip:{left:function(x,w){var v=w.within,B=v.offset.left+v.scrollLeft,E=v.width,t=v.isWindow?v.scrollLeft:v.offset.left,y=x.left-w.collisionPosition.marginLeft,C=y-t,s=y+w.collisionWidth-E-t,A=w.my[0]==="left"?-w.elemWidth:w.my[0]==="right"?w.elemWidth:0,D=w.at[0]==="left"?w.targetWidth:w.at[0]==="right"?-w.targetWidth:0,u=-2*w.offset[0],q,z;if(C<0){q=x.left+A+D+u+w.collisionWidth-E-B;if(q<0||q<p(C)){x.left+=A+D+u}}else{if(s>0){z=x.left-w.collisionPosition.marginLeft+A+D+u-t;if(z>0||p(z)<s){x.left+=A+D+u}}}},top:function(w,v){var u=v.within,D=u.offset.top+u.scrollTop,E=u.height,q=u.isWindow?u.scrollTop:u.offset.top,y=w.top-v.collisionPosition.marginTop,A=y-q,x=y+v.collisionHeight-E-q,B=v.my[1]==="top",z=B?-v.elemHeight:v.my[1]==="bottom"?v.elemHeight:0,F=v.at[1]==="top"?v.targetHeight:v.at[1]==="bottom"?-v.targetHeight:0,t=-2*v.offset[1],C,s;if(A<0){s=w.top+z+F+t+v.collisionHeight-E-D;if((w.top+z+F+t)>A&&(s<0||s<p(A))){w.top+=z+F+t}}else{if(x>0){C=w.top-v.collisionPosition.marginTop+z+F+t-q;if((w.top+z+F+t)>x&&(C>0||p(C)<x)){w.top+=z+F+t}}}}},flipfit:{left:function(){f.ui.position.flip.left.apply(this,arguments);f.ui.position.fit.left.apply(this,arguments)},top:function(){f.ui.position.flip.top.apply(this,arguments);f.ui.position.fit.top.apply(this,arguments)}}};(function(){var v,x,s,u,t,q=document.getElementsByTagName("body")[0],w=document.createElement("div");v=document.createElement(q?"div":"body");s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(q){f.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"})}for(t in s){v.style[t]=s[t]}v.appendChild(w);x=q||document.documentElement;x.insertBefore(v,x.firstChild);w.style.cssText="position: absolute; left: 10.7432222px;";u=f(w).offset().left;f.support.offsetFractions=u>10&&u<11;v.innerHTML="";x.removeChild(v)})()}(jQuery));(function(V){var E=V.fn.domManip,S="_tmplitem",F=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,U={},Q={},R,G={key:0,data:{}},N=0,T=0,K=[];function P(f,j,a,i){var k={data:i||(i===0||i===false)?i:j?j.data:{},_wrap:j?j._wrap:null,tmpl:null,parent:j||null,nodes:[],calls:B,nest:z,wrap:y,html:A,update:C};f&&V.extend(k,f,{nodes:[],parent:j});if(a){k.tmpl=a;k._ctnt=k._ctnt||k.tmpl(V,k);k.key=++N;(K.length?Q:U)[N]=k}return k}V.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,c){V.fn[a]=function(t){var s=[],p=V(t),f,q,d,e,o=this.length===1&&this[0].parentNode;R=U||{};if(o&&o.nodeType===11&&o.childNodes.length===1&&p.length===1){p[c](this[0]);s=this}else{for(q=0,d=p.length;q<d;q++){T=q;f=(q>0?this.clone(true):this).get();V(p[q])[c](f);s=s.concat(f)}T=0;s=this.pushStack(s,a,p.selector)}e=R;R=null;V.tmpl.complete(e);return s}});V.fn.extend({tmpl:function(e,f,a){return V.tmpl(this[0],e,f,a)},tmplItem:function(){return V.tmplItem(this[0])},template:function(a){return V.template(a,this[0])},domManip:function(q,a,c){if(q[0]&&V.isArray(q[0])){var o=V.makeArray(arguments),n=q[0],e=n.length,l=0,p;while(l<e&&!(p=V.data(n[l++],"tmplItem"))){}if(p&&T){o[2]=function(d){V.tmpl.afterManip(this,d,c)}}E.apply(this,o)}else{E.apply(this,arguments)}T=0;!R&&V.tmpl.complete(U);return this}});V.extend({tmpl:function(l,g,j,m){var f,a=!m;if(a){m=G;l=V.template[l]||V.template(null,l);Q={}}else{if(!l){l=m.tmpl;U[m.key]=m;m.nodes=[];m.wrapped&&I(m,m.wrapped);return V(M(m,null,m.tmpl(V,m)))}}if(!l){return[]}if(typeof g==="function"){g=g.call(m||{})}j&&j.wrapped&&I(j,j.wrapped);f=V.isArray(g)?V.map(g,function(c){return c?P(j,m,l,c):null}):[P(j,m,l,g)];return a?V(M(m,null,f)):f},tmplItem:function(a){var d;if(a instanceof V){a=a[0]}while(a&&a.nodeType===1&&!(d=V.data(a,"tmplItem"))&&(a=a.parentNode)){}return d||G},template:function(d,a){if(a){if(typeof a==="string"){a=H(a)}else{if(a instanceof V){a=a[0]||{}}}if(a.nodeType){a=V.data(a,"tmpl")||V.data(a,"tmpl",H(a.innerHTML))}return typeof d==="string"?(V.template[d]=a):a}return d?typeof d!=="string"?V.template(null,d):V.template[d]||V.template(null,F.test(d)?d:V(d)):null},encode:function(c){return(""+c).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}});V.extend(V.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(){U={}},afterManip:function(c,a,h){var g=a.nodeType===11?V.makeArray(a.childNodes):a.nodeType===1?[a]:[];h.call(c,a);J(g);T++}});function M(i,d,h){var a,j=h?V.map(h,function(c){return typeof c==="string"?i.key?c.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+S+'="'+i.key+'" $2'):c:M(c,i,c._ctnt)}):i;if(d){return j}j=j.join("");j.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(g,m,k,l){a=V(k).get();J(a);if(m){a=L(m).concat(a)}if(l){a=a.concat(L(l))}});return a?a:L(j)}function L(d){var a=document.createElement("div");a.innerHTML=d;return V.makeArray(a.childNodes)}function H(a){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+V.trim(a).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(h,n,o,s,x,w,v){var p=V.tmpl.tag[o],q,u,t;if(!p){throw"Unknown template tag: "+o}q=p._default||[];if(w&&!/\w$/.test(x)){x+=w;w=""}if(x){x=O(x);v=v?","+O(v)+")":w?")":"";u=w?x.indexOf(".")>-1?x+O(w):"("+x+").call($item"+v:x;t=w?u:"(typeof("+x+")==='function'?("+x+").call($item):("+x+"))"}else{t=u=q.$1||"null"}s=O(s);return"');"+p[n?"close":"open"].split("$notnull_1").join(x?"typeof("+x+")!=='undefined' && ("+x+")!=null":"true").split("$1a").join(t).split("$1").join(u).split("$2").join(s||q.$2||"")+"__.push('"})+"');}return __;")}function I(d,a){d._wrap=M(d,true,V.isArray(a)?a:[F.test(a)?a:V(a).html()]).join("")}function O(c){return c?c.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function D(c){var d=document.createElement("div");d.appendChild(c.cloneNode(true));return d.innerHTML}function J(c){var d="_"+T,i,q,g={},t,a,s;for(t=0,a=c.length;t<a;t++){if((i=c[t]).nodeType!==1){continue}q=i.getElementsByTagName("*");for(s=q.length-1;s>=0;s--){f(q[s])}f(i)}function f(u){var x,v=u,n,w,l;if(l=u.getAttribute(S)){while(v.parentNode&&(v=v.parentNode).nodeType===1&&!(x=v.getAttribute(S))){}if(x!==l){v=v.parentNode?v.nodeType===11?0:v.getAttribute(S)||0:0;if(!(w=U[l])){w=Q[l];w=P(w,U[v]||Q[v]);w.key=++N;U[N]=w}T&&W(l)}u.removeAttribute(S)}else{if(T&&(w=V.data(u,"tmplItem"))){W(w.key);U[w.key]=w;v=V.data(u.parentNode,"tmplItem");v=v?v.key:0}}if(w){n=w;while(n&&n.key!=v){n.nodes.push(u);n=n.parent}delete w._ctnt;delete w._wrap;V.data(u,"tmplItem",w)}function W(e){e=e+d;w=g[e]=g[e]||P(w,U[w.parent.key+d]||w.parent)}}}function B(f,g,h,e){if(!f){return K.pop()}K.push({_:f,tmpl:g,item:this,data:h,options:e})}function z(e,f,a){return V.tmpl(V.template(e),f,a,this)}function y(a,e){var f=a.options||{};f.wrapped=e;return V.tmpl(V.template(a.tmpl),a.data,f,a.item)}function A(e,f){var a=this._wrap;return V.map(V(V.isArray(a)?a.join(""):a).filter(e||"*"),function(c){return f?c.innerText||c.textContent:c.outerHTML||D(c)})}function C(){var a=this.nodes;V.tmpl(null,null,null,this).insertBefore(a[0]);V(a).remove()}})(jQuery);
/*!
 * jQuery UI Mouse 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 *
 * Depends:
 *	jquery.ui.widget.js
 */
(function(c,d){var a=false;c(document).mouseup(function(){a=false});c.widget("ui.mouse",{version:"1.10.3",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(f){return e._mouseDown(f)}).bind("click."+this.widgetName,function(f){if(true===c.data(f.target,e.widgetName+".preventClickEvent")){c.removeData(f.target,e.widgetName+".preventClickEvent");f.stopImmediatePropagation();return false}});this.started=false},_mouseDestroy:function(){this.element.unbind("."+this.widgetName);if(this._mouseMoveDelegate){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)}},_mouseDown:function(g){if(a){return}(this._mouseStarted&&this._mouseUp(g));this._mouseDownEvent=g;var f=this,h=(g.which===1),e=(typeof this.options.cancel==="string"&&g.target.nodeName?c(g.target).closest(this.options.cancel).length:false);if(!h||e||!this._mouseCapture(g)){return true}this.mouseDelayMet=!this.options.delay;if(!this.mouseDelayMet){this._mouseDelayTimer=setTimeout(function(){f.mouseDelayMet=true},this.options.delay)}if(this._mouseDistanceMet(g)&&this._mouseDelayMet(g)){this._mouseStarted=(this._mouseStart(g)!==false);if(!this._mouseStarted){g.preventDefault();return true}}if(true===c.data(g.target,this.widgetName+".preventClickEvent")){c.removeData(g.target,this.widgetName+".preventClickEvent")}this._mouseMoveDelegate=function(i){return f._mouseMove(i)};this._mouseUpDelegate=function(i){return f._mouseUp(i)};c(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate);g.preventDefault();a=true;return true},_mouseMove:function(e){if(c.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button){return this._mouseUp(e)}if(this._mouseStarted){this._mouseDrag(e);return e.preventDefault()}if(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)){this._mouseStarted=(this._mouseStart(this._mouseDownEvent,e)!==false);(this._mouseStarted?this._mouseDrag(e):this._mouseUp(e))}return !this._mouseStarted},_mouseUp:function(e){c(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate);if(this._mouseStarted){this._mouseStarted=false;if(e.target===this._mouseDownEvent.target){c.data(e.target,this.widgetName+".preventClickEvent",true)}this._mouseStop(e)}return false},_mouseDistanceMet:function(e){return(Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance)},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return true}})})(jQuery);
/*!
 * jQuery UI Draggable 1.10.3
 * http://jqueryui.com
 *
 * Copyright 2013 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */
(function(a,c){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.3",widgetEventPrefix:"drag",options:{addClasses:true,appendTo:"parent",axis:false,connectToSortable:false,containment:false,cursor:"auto",cursorAt:false,grid:false,handle:false,helper:"original",iframeFix:false,opacity:false,refreshPositions:false,revert:false,revertDuration:500,scope:"default",scroll:true,scrollSensitivity:20,scrollSpeed:20,snap:false,snapMode:"both",snapTolerance:20,stack:false,zIndex:false,drag:null,start:null,stop:null},_create:function(){if(this.options.helper==="original"&&!(/^(?:r|a|f)/).test(this.element.css("position"))){this.element[0].style.position="relative"}if(this.options.addClasses){this.element.addClass("ui-draggable")}if(this.options.disabled){this.element.addClass("ui-draggable-disabled")}this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled");this._mouseDestroy()},_mouseCapture:function(d){var e=this.options;if(this.helper||e.disabled||a(d.target).closest(".ui-resizable-handle").length>0){return false}this.handle=this._getHandle(d);if(!this.handle){return false}a(e.iframeFix===true?"iframe":e.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1000}).css(a(this).offset()).appendTo("body")});return true},_mouseStart:function(d){var e=this.options;this.helper=this._createHelper(d);this.helper.addClass("ui-draggable-dragging");this._cacheHelperProportions();if(a.ui.ddmanager){a.ui.ddmanager.current=this}this._cacheMargins();this.cssPosition=this.helper.css("position");this.scrollParent=this.helper.scrollParent();this.offsetParent=this.helper.offsetParent();this.offsetParentCssPosition=this.offsetParent.css("position");this.offset=this.positionAbs=this.element.offset();this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left};this.offset.scroll=false;a.extend(this.offset,{click:{left:d.pageX-this.offset.left,top:d.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()});this.originalPosition=this.position=this._generatePosition(d);this.originalPageX=d.pageX;this.originalPageY=d.pageY;(e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt));this._setContainment();if(this._trigger("start",d)===false){this._clear();return false}this._cacheHelperProportions();if(a.ui.ddmanager&&!e.dropBehaviour){a.ui.ddmanager.prepareOffsets(this,d)}this._mouseDrag(d,true);if(a.ui.ddmanager){a.ui.ddmanager.dragStart(this,d)}return true},_mouseDrag:function(d,f){if(this.offsetParentCssPosition==="fixed"){this.offset.parent=this._getParentOffset()}this.position=this._generatePosition(d);this.positionAbs=this._convertPositionTo("absolute");if(!f){var e=this._uiHash();if(this._trigger("drag",d,e)===false){this._mouseUp({});return false}this.position=e.position}if(!this.options.axis||this.options.axis!=="y"){this.helper[0].style.left=this.position.left+"px"}if(!this.options.axis||this.options.axis!=="x"){this.helper[0].style.top=this.position.top+"px"}if(a.ui.ddmanager){a.ui.ddmanager.drag(this,d)}return false},_mouseStop:function(e){var d=this,f=false;if(a.ui.ddmanager&&!this.options.dropBehaviour){f=a.ui.ddmanager.drop(this,e)}if(this.dropped){f=this.dropped;this.dropped=false}if(this.options.helper==="original"&&!a.contains(this.element[0].ownerDocument,this.element[0])){return false}if((this.options.revert==="invalid"&&!f)||(this.options.revert==="valid"&&f)||this.options.revert===true||(a.isFunction(this.options.revert)&&this.options.revert.call(this.element,f))){a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){if(d._trigger("stop",e)!==false){d._clear()}})}else{if(this._trigger("stop",e)!==false){this._clear()}}return false},_mouseUp:function(d){a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)});if(a.ui.ddmanager){a.ui.ddmanager.dragStop(this,d)}return a.ui.mouse.prototype._mouseUp.call(this,d)},cancel:function(){if(this.helper.is(".ui-draggable-dragging")){this._mouseUp({})}else{this._clear()}return this},_getHandle:function(d){return this.options.handle?!!a(d.target).closest(this.element.find(this.options.handle)).length:true},_createHelper:function(e){var f=this.options,d=a.isFunction(f.helper)?a(f.helper.apply(this.element[0],[e])):(f.helper==="clone"?this.element.clone().removeAttr("id"):this.element);if(!d.parents("body").length){d.appendTo((f.appendTo==="parent"?this.element[0].parentNode:f.appendTo))}if(d[0]!==this.element[0]&&!(/(fixed|absolute)/).test(d.css("position"))){d.css("position","absolute")}return d},_adjustOffsetFromHelper:function(d){if(typeof d==="string"){d=d.split(" ")}if(a.isArray(d)){d={left:+d[0],top:+d[1]||0}}if("left" in d){this.offset.click.left=d.left+this.margins.left}if("right" in d){this.offset.click.left=this.helperProportions.width-d.right+this.margins.left}if("top" in d){this.offset.click.top=d.top+this.margins.top}if("bottom" in d){this.offset.click.top=this.helperProportions.height-d.bottom+this.margins.top}},_getParentOffset:function(){var d=this.offsetParent.offset();if(this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])){d.left+=this.scrollParent.scrollLeft();d.top+=this.scrollParent.scrollTop()}if((this.offsetParent[0]===document.body)||(this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&a.ui.ie)){d={top:0,left:0}}return{top:d.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:d.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var d=this.element.position();return{top:d.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:d.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}else{return{top:0,left:0}}},_cacheMargins:function(){this.margins={left:(parseInt(this.element.css("marginLeft"),10)||0),top:(parseInt(this.element.css("marginTop"),10)||0),right:(parseInt(this.element.css("marginRight"),10)||0),bottom:(parseInt(this.element.css("marginBottom"),10)||0)}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,g,d,f=this.options;if(!f.containment){this.containment=null;return}if(f.containment==="window"){this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(f.containment==="document"){this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(f.containment.constructor===Array){this.containment=f.containment;return}if(f.containment==="parent"){f.containment=this.helper[0].parentNode}g=a(f.containment);d=g[0];if(!d){return}e=g.css("overflow")!=="hidden";this.containment=[(parseInt(g.css("borderLeftWidth"),10)||0)+(parseInt(g.css("paddingLeft"),10)||0),(parseInt(g.css("borderTopWidth"),10)||0)+(parseInt(g.css("paddingTop"),10)||0),(e?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(g.css("borderRightWidth"),10)||0)-(parseInt(g.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(g.css("borderBottomWidth"),10)||0)-(parseInt(g.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom];this.relative_container=g},_convertPositionTo:function(g,h){if(!h){h=this.position}var f=g==="absolute"?1:-1,e=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent;if(!this.offset.scroll){this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}}return{top:(h.top+this.offset.relative.top*f+this.offset.parent.top*f-((this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)*f)),left:(h.left+this.offset.relative.left*f+this.offset.parent.left*f-((this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left)*f))}},_generatePosition:function(e){var d,j,k,g,f=this.options,l=this.cssPosition==="absolute"&&!(this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,i=e.pageX,h=e.pageY;if(!this.offset.scroll){this.offset.scroll={top:l.scrollTop(),left:l.scrollLeft()}}if(this.originalPosition){if(this.containment){if(this.relative_container){j=this.relative_container.offset();d=[this.containment[0]+j.left,this.containment[1]+j.top,this.containment[2]+j.left,this.containment[3]+j.top]}else{d=this.containment}if(e.pageX-this.offset.click.left<d[0]){i=d[0]+this.offset.click.left}if(e.pageY-this.offset.click.top<d[1]){h=d[1]+this.offset.click.top}if(e.pageX-this.offset.click.left>d[2]){i=d[2]+this.offset.click.left}if(e.pageY-this.offset.click.top>d[3]){h=d[3]+this.offset.click.top}}if(f.grid){k=f.grid[1]?this.originalPageY+Math.round((h-this.originalPageY)/f.grid[1])*f.grid[1]:this.originalPageY;h=d?((k-this.offset.click.top>=d[1]||k-this.offset.click.top>d[3])?k:((k-this.offset.click.top>=d[1])?k-f.grid[1]:k+f.grid[1])):k;g=f.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/f.grid[0])*f.grid[0]:this.originalPageX;i=d?((g-this.offset.click.left>=d[0]||g-this.offset.click.left>d[2])?g:((g-this.offset.click.left>=d[0])?g-f.grid[0]:g+f.grid[0])):g}}return{top:(h-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():this.offset.scroll.top)),left:(i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():this.offset.scroll.left))}},_clear:function(){this.helper.removeClass("ui-draggable-dragging");if(this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval){this.helper.remove()}this.helper=null;this.cancelHelperRemoval=false},_trigger:function(d,e,f){f=f||this._uiHash();a.ui.plugin.call(this,d,[e,f]);if(d==="drag"){this.positionAbs=this._convertPositionTo("absolute")}return a.Widget.prototype._trigger.call(this,d,e,f)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}});a.ui.plugin.add("draggable","connectToSortable",{start:function(e,g){var f=a(this).data("ui-draggable"),h=f.options,d=a.extend({},g,{item:f.element});f.sortables=[];a(h.connectToSortable).each(function(){var i=a.data(this,"ui-sortable");if(i&&!i.options.disabled){f.sortables.push({instance:i,shouldRevert:i.options.revert});i.refreshPositions();i._trigger("activate",e,d)}})},stop:function(e,g){var f=a(this).data("ui-draggable"),d=a.extend({},g,{item:f.element});a.each(f.sortables,function(){if(this.instance.isOver){this.instance.isOver=0;f.cancelHelperRemoval=true;this.instance.cancelHelperRemoval=false;if(this.shouldRevert){this.instance.options.revert=this.shouldRevert}this.instance._mouseStop(e);this.instance.options.helper=this.instance.options._helper;if(f.options.helper==="original"){this.instance.currentItem.css({top:"auto",left:"auto"})}}else{this.instance.cancelHelperRemoval=false;this.instance._trigger("deactivate",e,d)}})},drag:function(e,g){var f=a(this).data("ui-draggable"),d=this;a.each(f.sortables,function(){var h=false,i=this;this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this.instance._intersectsWith(this.instance.containerCache)){h=true;a.each(f.sortables,function(){this.instance.positionAbs=f.positionAbs;this.instance.helperProportions=f.helperProportions;this.instance.offset.click=f.offset.click;if(this!==i&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(i.instance.element[0],this.instance.element[0])){h=false}return h})}if(h){if(!this.instance.isOver){this.instance.isOver=1;this.instance.currentItem=a(d).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",true);this.instance.options._helper=this.instance.options.helper;this.instance.options.helper=function(){return g.helper[0]};e.target=this.instance.currentItem[0];this.instance._mouseCapture(e,true);this.instance._mouseStart(e,true,true);this.instance.offset.click.top=f.offset.click.top;this.instance.offset.click.left=f.offset.click.left;this.instance.offset.parent.left-=f.offset.parent.left-this.instance.offset.parent.left;this.instance.offset.parent.top-=f.offset.parent.top-this.instance.offset.parent.top;f._trigger("toSortable",e);f.dropped=this.instance.element;f.currentItem=f.element;this.instance.fromOutside=f}if(this.instance.currentItem){this.instance._mouseDrag(e)}}else{if(this.instance.isOver){this.instance.isOver=0;this.instance.cancelHelperRemoval=true;this.instance.options.revert=false;this.instance._trigger("out",e,this.instance._uiHash(this.instance));this.instance._mouseStop(e,true);this.instance.options.helper=this.instance.options._helper;this.instance.currentItem.remove();if(this.instance.placeholder){this.instance.placeholder.remove()}f._trigger("fromSortable",e);f.dropped=false}}})}});a.ui.plugin.add("draggable","cursor",{start:function(){var d=a("body"),e=a(this).data("ui-draggable").options;if(d.css("cursor")){e._cursor=d.css("cursor")}d.css("cursor",e.cursor)},stop:function(){var d=a(this).data("ui-draggable").options;if(d._cursor){a("body").css("cursor",d._cursor)}}});a.ui.plugin.add("draggable","opacity",{start:function(e,f){var d=a(f.helper),g=a(this).data("ui-draggable").options;if(d.css("opacity")){g._opacity=d.css("opacity")}d.css("opacity",g.opacity)},stop:function(d,e){var f=a(this).data("ui-draggable").options;if(f._opacity){a(e.helper).css("opacity",f._opacity)}}});a.ui.plugin.add("draggable","scroll",{start:function(){var d=a(this).data("ui-draggable");if(d.scrollParent[0]!==document&&d.scrollParent[0].tagName!=="HTML"){d.overflowOffset=d.scrollParent.offset()}},drag:function(f){var e=a(this).data("ui-draggable"),g=e.options,d=false;if(e.scrollParent[0]!==document&&e.scrollParent[0].tagName!=="HTML"){if(!g.axis||g.axis!=="x"){if((e.overflowOffset.top+e.scrollParent[0].offsetHeight)-f.pageY<g.scrollSensitivity){e.scrollParent[0].scrollTop=d=e.scrollParent[0].scrollTop+g.scrollSpeed}else{if(f.pageY-e.overflowOffset.top<g.scrollSensitivity){e.scrollParent[0].scrollTop=d=e.scrollParent[0].scrollTop-g.scrollSpeed}}}if(!g.axis||g.axis!=="y"){if((e.overflowOffset.left+e.scrollParent[0].offsetWidth)-f.pageX<g.scrollSensitivity){e.scrollParent[0].scrollLeft=d=e.scrollParent[0].scrollLeft+g.scrollSpeed}else{if(f.pageX-e.overflowOffset.left<g.scrollSensitivity){e.scrollParent[0].scrollLeft=d=e.scrollParent[0].scrollLeft-g.scrollSpeed}}}}else{if(!g.axis||g.axis!=="x"){if(f.pageY-a(document).scrollTop()<g.scrollSensitivity){d=a(document).scrollTop(a(document).scrollTop()-g.scrollSpeed)}else{if(a(window).height()-(f.pageY-a(document).scrollTop())<g.scrollSensitivity){d=a(document).scrollTop(a(document).scrollTop()+g.scrollSpeed)}}}if(!g.axis||g.axis!=="y"){if(f.pageX-a(document).scrollLeft()<g.scrollSensitivity){d=a(document).scrollLeft(a(document).scrollLeft()-g.scrollSpeed)}else{if(a(window).width()-(f.pageX-a(document).scrollLeft())<g.scrollSensitivity){d=a(document).scrollLeft(a(document).scrollLeft()+g.scrollSpeed)}}}}if(d!==false&&a.ui.ddmanager&&!g.dropBehaviour){a.ui.ddmanager.prepareOffsets(e,f)}}});a.ui.plugin.add("draggable","snap",{start:function(){var d=a(this).data("ui-draggable"),e=d.options;d.snapElements=[];a(e.snap.constructor!==String?(e.snap.items||":data(ui-draggable)"):e.snap).each(function(){var g=a(this),f=g.offset();if(this!==d.element[0]){d.snapElements.push({item:this,width:g.outerWidth(),height:g.outerHeight(),top:f.top,left:f.left})}})},drag:function(v,q){var e,A,k,m,u,p,n,B,w,j,h=a(this).data("ui-draggable"),s=h.options,z=s.snapTolerance,y=q.offset.left,x=y+h.helperProportions.width,g=q.offset.top,f=g+h.helperProportions.height;for(w=h.snapElements.length-1;w>=0;w--){u=h.snapElements[w].left;p=u+h.snapElements[w].width;n=h.snapElements[w].top;B=n+h.snapElements[w].height;if(x<u-z||y>p+z||f<n-z||g>B+z||!a.contains(h.snapElements[w].item.ownerDocument,h.snapElements[w].item)){if(h.snapElements[w].snapping){(h.options.snap.release&&h.options.snap.release.call(h.element,v,a.extend(h._uiHash(),{snapItem:h.snapElements[w].item})))}h.snapElements[w].snapping=false;continue}if(s.snapMode!=="inner"){e=Math.abs(n-f)<=z;A=Math.abs(B-g)<=z;k=Math.abs(u-x)<=z;m=Math.abs(p-y)<=z;if(e){q.position.top=h._convertPositionTo("relative",{top:n-h.helperProportions.height,left:0}).top-h.margins.top}if(A){q.position.top=h._convertPositionTo("relative",{top:B,left:0}).top-h.margins.top}if(k){q.position.left=h._convertPositionTo("relative",{top:0,left:u-h.helperProportions.width}).left-h.margins.left}if(m){q.position.left=h._convertPositionTo("relative",{top:0,left:p}).left-h.margins.left}}j=(e||A||k||m);if(s.snapMode!=="outer"){e=Math.abs(n-g)<=z;A=Math.abs(B-f)<=z;k=Math.abs(u-y)<=z;m=Math.abs(p-x)<=z;if(e){q.position.top=h._convertPositionTo("relative",{top:n,left:0}).top-h.margins.top}if(A){q.position.top=h._convertPositionTo("relative",{top:B-h.helperProportions.height,left:0}).top-h.margins.top}if(k){q.position.left=h._convertPositionTo("relative",{top:0,left:u}).left-h.margins.left}if(m){q.position.left=h._convertPositionTo("relative",{top:0,left:p-h.helperProportions.width}).left-h.margins.left}}if(!h.snapElements[w].snapping&&(e||A||k||m||j)){(h.options.snap.snap&&h.options.snap.snap.call(h.element,v,a.extend(h._uiHash(),{snapItem:h.snapElements[w].item})))}h.snapElements[w].snapping=(e||A||k||m||j)}}});a.ui.plugin.add("draggable","stack",{start:function(){var d,f=this.data("ui-draggable").options,e=a.makeArray(a(f.stack)).sort(function(h,g){return(parseInt(a(h).css("zIndex"),10)||0)-(parseInt(a(g).css("zIndex"),10)||0)});if(!e.length){return}d=parseInt(a(e[0]).css("zIndex"),10)||0;a(e).each(function(g){a(this).css("zIndex",d+g)});this.css("zIndex",(d+e.length))}});a.ui.plugin.add("draggable","zIndex",{start:function(e,f){var d=a(f.helper),g=a(this).data("ui-draggable").options;if(d.css("zIndex")){g._zIndex=d.css("zIndex")}d.css("zIndex",g.zIndex)},stop:function(d,e){var f=a(this).data("ui-draggable").options;if(f._zIndex){a(e.helper).css("zIndex",f._zIndex)}}})})(jQuery);
/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){module.exports=a}else{a(jQuery)}}}(function(d){var e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],l=("onwheel" in document||document.documentMode>=9)?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],j=Array.prototype.slice,k,c;if(d.event.fixHooks){for(var f=e.length;f;){d.event.fixHooks[e[--f]]=d.event.mouseHooks}}var g=d.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener){for(var n=l.length;n;){this.addEventListener(l[--n],m,false)}}else{this.onmousewheel=m}d.data(this,"mousewheel-line-height",g.getLineHeight(this));d.data(this,"mousewheel-page-height",g.getPageHeight(this))},teardown:function(){if(this.removeEventListener){for(var n=l.length;n;){this.removeEventListener(l[--n],m,false)}}else{this.onmousewheel=null}},getLineHeight:function(i){return parseInt(d(i)["offsetParent" in d.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(i){return d(i).height()},settings:{adjustOldDeltas:true}};d.fn.extend({mousewheel:function(i){return i?this.bind("mousewheel",i):this.trigger("mousewheel")},unmousewheel:function(i){return this.unbind("mousewheel",i)}});function m(i){var o=i||window.event,t=j.call(arguments,1),v=0,q=0,p=0,s=0;i=d.event.fix(o);i.type="mousewheel";if("detail" in o){p=o.detail*-1}if("wheelDelta" in o){p=o.wheelDelta}if("wheelDeltaY" in o){p=o.wheelDeltaY}if("wheelDeltaX" in o){q=o.wheelDeltaX*-1}if("axis" in o&&o.axis===o.HORIZONTAL_AXIS){q=p*-1;p=0}v=p===0?q:p;if("deltaY" in o){p=o.deltaY*-1;v=p}if("deltaX" in o){q=o.deltaX;if(p===0){v=q*-1}}if(p===0&&q===0){return}if(o.deltaMode===1){var u=d.data(this,"mousewheel-line-height");v*=u;p*=u;q*=u}else{if(o.deltaMode===2){var n=d.data(this,"mousewheel-page-height");v*=n;p*=n;q*=n}}s=Math.max(Math.abs(p),Math.abs(q));if(!c||s<c){c=s;if(a(o,s)){c/=40}}if(a(o,s)){v/=40;q/=40;p/=40}v=Math[v>=1?"floor":"ceil"](v/c);q=Math[q>=1?"floor":"ceil"](q/c);p=Math[p>=1?"floor":"ceil"](p/c);i.deltaX=q;i.deltaY=p;i.deltaFactor=c;i.deltaMode=0;t.unshift(i,v,q,p);if(k){clearTimeout(k)}k=setTimeout(h,200);return(d.event.dispatch||d.event.handle).apply(this,t)}function h(){c=null}function a(n,i){return g.settings.adjustOldDeltas&&n.type==="mousewheel"&&i%120===0}}));
/*!
 * iCheck v1.0.2, http://git.io/arlzeA
 * ===================================
 * Powerful jQuery and Zepto plugin for checkboxes and radio buttons customization
 *
 * (c) 2013 Damir Sultanov, http://fronteed.com
 * MIT Licensed
 */
(function(ab){var X="iCheck",Z=X+"-helper",M="checkbox",ad="radio",J="checked",D="un"+J,V="disabled",W="determinate",ac="in"+W,K="update",H="type",aa="click",E="touchbegin.i touchend.i",O="addClass",Y="removeClass",S="trigger",N="label",P="cursor",Q=/ipad|iphone|ipod|android|blackberry|windows phone|opera mini|silk/i.test(navigator.userAgent);ab.fn[X]=function(d,m){var h='input[type="'+M+'"], input[type="'+ad+'"]',f=ab(),c=function(o){o.each(function(){var p=ab(this);if(p.is(h)){f=f.add(p)}else{f=f.add(p.find(h))}})};if(/^(check|uncheck|toggle|indeterminate|determinate|disable|enable|update|destroy)$/i.test(d)){d=d.toLowerCase();c(this);return f.each(function(){var o=ab(this);if(d=="destroy"){G(o,"ifDestroyed")}else{F(o,true,d)}if(ab.isFunction(m)){m()}})}else{if(typeof d=="object"||!d){var l=ab.extend({checkedClass:J,disabledClass:V,indeterminateClass:ac,labelHover:true},d);var k=l.handle;var i=l.hoverClass||"hover";var e=l.focusClass||"focus";var g=l.activeClass||"active";var a=!!l.labelHover;var j=l.labelHoverClass||"hover";var n=(""+l.increaseArea).replace("%","")|0;I(l.label);if(k==M||k==ad){h='input[type="'+k+'"]'}if(n<-50){n=-50}c(this);return f.each(function(){var o=ab(this);G(o);var x=this,A=x.id,w=-n+"%",B=100+(n*2)+"%",v={position:"absolute",top:w,left:w,display:"block",width:B,height:B,margin:0,padding:0,background:"#fff",border:0,opacity:0},u=Q?{position:"absolute",visibility:"hidden"}:n?v:{position:"absolute",opacity:0},t=x[H]==M?l.checkboxClass||"i"+M:l.radioClass||"i"+ad,q=ab(N+'[for="'+A+'"]').add(o.closest(N)),s=!!l.aria,y=X+"-"+Math.random().toString(36).substr(2,6),p='<div class="'+t+'" '+(s?'role="'+x[H]+'" ':""),z;if(s){q.each(function(){p+='aria-labelledby="';if(this.id){p+=this.id}else{this.id=y;p+=y}p+='"'})}p=o.wrap(p+"/>")[S]("ifCreated").parent().append(l.insert);z=ab('<ins class="'+Z+'"/>').css(v).appendTo(p);o.data(X,{o:l,s:o.attr("style")}).css(u);!!l.inheritClass&&p[O](x.className||"");!!l.inheritID&&A&&p.attr("id",X+"-"+A);(p.css("position")=="static"||p.css("position")==null)&&p.css("position","relative");F(o,true,K);if(q.length){q.off(aa+".i mouseover.i mouseout.i "+E).on(aa+".i mouseover.i mouseout.i "+E,function(af){var ah=af[H],ag=ab(this);if(!x[V]){if(ah==aa){if(ab(af.target).is("a")){return false}F(o,false,true)}else{if(a){if(/ut|nd/.test(ah)){p[Y](i);ag[Y](j)}else{p[O](i);ag[O](j)}}}if(Q||(x.getAttribute("stop")!=null&&x.getAttribute("stop").indexOf(ah)>-1)){af.stopPropagation()}else{return true}}})}o.on(aa+".i focus.i blur.i keyup.i keydown.i keypress.i",function(af){var ag=af[H],ah=af.keyCode;if(ag==aa){return false}else{if(ag=="keydown"&&ah==32){if(!(x[H]==ad&&x[J])){if(x[J]){C(o,J)}else{T(o,J)}}return false}else{if(ag=="keyup"&&x[H]==ad){!x[J]&&T(o,J)}else{if(/us|ur/.test(ag)){p[ag=="blur"?Y:O](e)}}}}});z.off(aa+" mousedown mouseup mouseover mouseout "+E).on(aa+" mousedown mouseup mouseover mouseout "+E,function(af){var ag=af[H],ah=/wn|up/.test(ag)?g:i;if(!x[V]){if(ag==aa){F(o,false,true)}else{if(/wn|er|in/.test(ag)){p[O](ah)}else{p[Y](ah+" "+g)}if(q.length&&a&&ah==i){q[/ut|nd/.test(ag)?Y:O](j)}}if(Q){af.stopPropagation()}else{if(q[0]&&(q[0].className.indexOf("awsui-radio-label")>=0||q[0].className.indexOf("awsui-checkbox-label")>=0)){return true}else{return false}}}})})}else{return this}}};function F(h,a,c){var g=h[0],e=/er/.test(c)?ac:/bl/.test(c)?V:J,d=c==K?{checked:g[J],disabled:g[V],indeterminate:h.attr(ac)=="true"||h.attr(W)=="false"}:g[e];if(/^(ch|di|in)/.test(c)&&!d){T(h,e)}else{if(/^(un|en|de)/.test(c)&&d){C(h,e)}else{if(c==K){for(var f in d){if(d[f]){T(h,f,true)}else{C(h,f,true)}}}else{if(!a||c=="toggle"){if(!a){h[S]("ifClicked")}if(d){if(g[H]!==ad){C(h,e)}}else{T(h,e)}}}}}}function T(g,p,c){var h=false;try{h=ab("#isMobile").val()}catch(i){}var m=g[0],e=g.parent(),f=p==J,a=p==ac,l=p==V,d=a?W:f?D:"enabled",n=R(g,d+U(m[H])),j=R(g,p+U(m[H]));if(h=="true"||h==true){if(e.hasClass("ui-checkbox")){e=e.parent()}}if(m[p]!==true){if(!c&&p==J&&m[H]==ad&&m.name){var o=g.closest("form"),k='input[name="'+m.name+'"]';k=o.length?o.find(k):ab(k);k.each(function(){if(this!==m&&ab(this).data(X)){C(ab(this),p)}})}if(a){m[p]=true;if(m[J]){C(g,J,"force")}}else{if(!c){m[p]=true}if(f&&m[ac]){C(g,ac,false)}}L(g,f,p,c)}if(m[V]&&!!R(g,P,true)){e.find("."+Z).css(P,"default")}e[O](j||R(g,p)||"");if(!!e.attr("role")&&!a){e.attr("aria-"+(l?V:J),"true")}e[Y](n||R(g,d)||"")}function C(g,n,c){var h=false;try{h=ab("#isMobile").val()}catch(i){}var l=g[0],e=g.parent(),f=n==J,a=n==ac,k=n==V,d=a?W:f?D:"enabled",m=R(g,d+U(l[H])),j=R(g,n+U(l[H]));if(h=="true"||h==true){if(e.hasClass("ui-checkbox")){e=e.parent()}}if(l[n]!==false){if(a||!c||c=="force"){l[n]=false}L(g,f,d,c)}if(!l[V]&&!!R(g,P,true)){e.find("."+Z).css(P,"pointer")}e[Y](j||R(g,n)||"");if(!!e.attr("role")&&!a){e.attr("aria-"+(k?V:J),"false")}e[O](m||R(g,d)||"")}function G(c,a){if(c.data(X)){c.parent().html(c.attr("style",c.data(X).s||""));if(a){c[S](a)}c.off(".i").unwrap();ab(N+'[for="'+c[0].id+'"]').add(c.closest(N)).off(".i")}}function R(d,a,c){if(d.data(X)){return d.data(X).o[a+(c?"":"Class")]}}function U(a){return a.charAt(0).toUpperCase()+a.slice(1)}function L(d,c,a,e){if(!e){if(c){d[S]("ifToggled")}d[S]("ifChanged")[S]("if"+U(a))}}function I(a){N=a||N}})(window.jQuery||window.Zepto);
/*!
 * =====================================================
 * AWSUI组件库，基于jQuery 1.10.2
 * v1.0 (http://www.actionsoft.com.cn)
 * author zhangy
 * 发布后文件名：aws.util.js
 * =====================================================
 */
(function($){$.widget("awsui.dialog",{options:{fixed:true,closable:true,draggable:true,containment:"document"},close:function(){if(this.options.onClose){if(this.options.onClose()==false){return}}this.destroy()},_init:function(){if(this.options.mode===undefined){this.options.mode=this.options.model}if(this.options.mode===undefined){this.options.mode=true}$("#awsui_quicktip").remove();var title="";if(this.options.title){title=this.options.title}else{if(this.element.attr("title")){title=this.element.attr("title")}}this.element.removeAttr("title","");var wrap=this.options.height!=null&&this.options.height!="auto";if(wrap){this.element.wrapInner("<div class='dialog-wrap dlg-content'></div>")}this.title=$("<h2 class='dlg-title'>"+title+"</h2>").prependTo(this.element);this.element.addClass("awsui-dialog").fadeIn("fast");var dialogClose=$("<div class='dlg-close'></div>").appendTo(this.element);var self=this;dialogClose.on("click",function(){self.close()});if(this.options.closable){dialogClose.show()}if(this.options.buttons){var buts=$("<div class='dlg-button'></div>").appendTo($("<div class='dialog-button-wrap' style='text-align:"+(this.options.buttonAlign!=null?this.options.buttonAlign:"right")+"'></div>").appendTo(this.element));$.each(this.options.buttons,function(i,v){var item=v;var bt=$("<button type='button' class='button "+(item.cls?item.cls:"")+"'></button>").text(item.text).appendTo(buts);bt.on("click",item.handler)});this._setOption("buttons",buts)}this.element.find(".dlg-button .button:last-child").addClass("last");var optionWidth=this.options.width;if(this.options.width){optionWidth=this.options.width;var width=screen.width;if(optionWidth+50>$(window).width()){optionWidth=$(window).width()-50}this.element.css({width:optionWidth-10})}else{if(this.element.outerWidth()+50>$(window).width()){this.element.css({width:$(window).width()-50})}}var MaxHeight=$(window).height();if(wrap){var ih=this.options.height;var wrapH=ih-this.title.outerHeight(true);MaxHeight=MaxHeight-this.title.outerHeight(true);if(this.options.buttons!=null&&this.options.buttons.length){wrapH-=this.element.find(".dlg-button").outerHeight(true);MaxHeight-=this.element.find(".dlg-button").outerHeight(true)}if(wrapH>MaxHeight){wrapH=MaxHeight;wrapH-=44}this.element.find(".dialog-wrap").css({height:wrapH})}else{MaxHeight=MaxHeight-this.title.outerHeight(true);if(this.options.buttons!=null&&this.options.buttons.length){MaxHeight-=this.element.find(".dlg-button").outerHeight(true)}if(this.element.outerHeight()>MaxHeight){this.element.find(".dialog-wrap").css({height:MaxHeight-44})}}if(this.options.mode===true){$.mask()}var dialogWidth=this.element.outerWidth();var dialogHeight=this.element.outerHeight();var self=this;$(document).on("resize.dialog",function(){var top=0;if(self.options.fixed){self.element.css("position","fixed");top=($(window).height()-dialogHeight)/2+"px"}else{self.element.css("position","absolute");top=($(window).height()-dialogHeight)/2+$(document).scrollTop()+"px"}var left=($(window).width()-dialogWidth)/2+"px";self.element.css({top:top,left:left})});$(document).trigger("resize.dialog");if(this.options.draggable&&$("#isMobile").val()!="true"){var t=this.title;var c=this.options.containment;this.element.draggable({handle:t,containment:c})}else{this.title.css("cursor","default")}var dlg=this;$(window).off("keydown.dialog").on("keydown.dialog",function(e){if(e.keyCode==27&&dlg.options.closable){dlg.close()}});$(document).off("keydown.dialog").on("keydown.dialog",function(e){if(e.keyCode==27&&dlg.options.closable){dlg.close()}});try{$(".dlg-content,.dialog-wrap.dlg-content").preventScroll(dlg.options.scrollDiv)}catch(e){console.log(阻止和功能窗口的滚动事件冒泡失败)}$(".awsui-dialog").off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(e){});$(document.body).find("a").blur();$(document.body).find("button").blur();$(document.body).find("input[type='button']").blur();$(document.body).find(".awsui-dialog").find("button[class$='blue']").focus()},_setOption:function(key,value){if(key==="disabled"){return}this._super(key,value);if(key==="title"){if(!this.options.title){this.title.html("&#160;")}this.title.text(this.options.title)}},_destroy:function(){if(!this.element.hasClass("confirm-window")){$("#simplealert").remove()}this.element.hide();var hasLoadingSimpleAlert=$("#simplealert").find(".loading").length>0;if((this.options.mode===true)&&!hasLoadingSimpleAlert){$.mask("close")}this.element.find(".dialog-wrap").children().unwrap();var title=this.element.find(".dlg-title");this.element.attr("title",title.text());title.remove();if(this.options.buttons){this.element.find(".dialog-button-wrap").remove()}this.element.removeClass("awsui-dialog").find(".dlg-close").remove();this.element.find("input[type='checkbox'][id='secondaryConfirmCheck']").remove();$(window).unbind("resize.dialog")}});FrmDialog={dlgs:{},open:function(config,url,data,id){var dlg={initId:function(id){id=id||config.id;if(id==null){id=""}this.rawId=id;this.div="id-awsui-win-frm-2013"+id;this.frm="id-awsui-win-frm-2013-frm"+id},init:function(config,url,data){var self=this;var def={width:700,title:"",iconCls:"icon-file"};$.extend(def,config||{});def.mode=def.model;var oc=def.onClose;def.onClose=function(){var r=null;if(oc!=null){r=oc()}self.clear();return r};var mode=def.mode;if($(".window-mask").length>0){mode=false}def.mode=mode;if($("#"+this.div).length>0){return null}var s=$("<div id='"+this.div+"'><iframe name='"+this.frm+"' id='"+this.frm+"' frameborder=0 style='width:100%;height:100%' src=''></iframe></div>");$(document.body).append(s);$(s.find("iframe")).off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(event){event.preventDefault()});var dlg=$("#"+this.div).dialog(def);url=url||def.url;if(url!=null){var s="";s+="<html>";s+="<head>";s+="<title>loading...</title>";s+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">';s+="<body>";s+="<p>&nbsp;</p>";s+='<p align="center"><img src="../commons/js/jquery/themes/default/ui/images/loading.gif"><br><span style="font-family:Arial;color:gray;font-size:11px">loading...</span></p>';s+="<p>&nbsp;</p>";s+="</body>";$(s).appendTo($("#"+this.frm)[0].contentWindow.document.body);var fm=$('<form action="'+url+'" TARGET ="'+this.frm+'" method=post></form>').appendTo($("#"+this.div));data=data||def.data||{};for(var key in data){if(data[key]!=null){var jq=$("<input type='hidden' name=\""+key+'">').appendTo(fm);jq.val(data[key])}}if(navigator.userAgent.toLowerCase().indexOf("msie 8")==-1){fm[0].submit();fm.remove()}else{setTimeout(function(){fm[0].submit();fm.remove()},1)}}this.wrap=dlg;return dlg},close:function(){$("#"+this.div).dialog("close");this.clear()},clear:function(){delete FrmDialog.dlgs[this.rawId];$("#"+this.div).remove()},name:function(){return this.frm},win:function(){var ifrm=$("#"+this.frm)[0];return ifrm.contentWindow?ifrm.contentWindow:(ifrm.contentDocument.document?ifrm.contentDocument.document:ifrm.contentDocument)},id:function(id){return this.win().document.getElementById(id)},$:function(st,context){return this.win().jQuery(st,context)}};dlg.initId(id);var inner=dlg.init(config,url,data);if(inner!=null){FrmDialog.dlgs[dlg.rawId]=dlg;return dlg}return null},get:function(id){if(id!=null){return this.dlgs[id]}var keys=[];for(var i in FrmDialog.dlgs){if(FrmDialog.dlgs.hasOwnProperty(i)){keys.push(i)}}var l=keys.length;if(l>1){alert(当前对象拥有多个实例请对特定实例操作);return null}else{if(l==0){}}for(key in FrmDialog.dlgs){return this.dlgs[key]}return null},close:function(id){if(id!=null){return this.get(id).close()}var dlg=this.get();if(dlg!=null){dlg.close()}return},name:function(){var dlg=this.get();if(dlg!=null){return dlg.name()}return null},win:function(){var dlg=this.get();if(dlg!=null){return dlg.win()}return null},id:function(id){var dlg=this.get();if(dlg!=null){return dlg.el()}return null},$:function(st,context){var dlg=this.get();if(dlg!=null){return dlg.$(st,context)}return null}};$.openSidebar=function(options){var defaults={url:"../commons/wait.htm",title:"",closeText:"关闭",width:"60%",isMode:false,duration:"slow",iframeId:"",containerId:"",parent:window,color:"",buttons:[]};var err=function(msg){if(window.console){console.log(msg)}else{alert(msg)}};var opt=$.extend(defaults,options);var parentContainer=opt.parent;if(parentContainer==undefined){err("侧边栏父容器不存在,options.parent:"+opt.parent);return}var sidebar=$('<div id="aws-sidebar-zone" class="awsui-sidebar" style="display:none;"></div>');var top=$('<div class="awsui-sidebar-top"></div>');var content=$('<div id="awsui-sidebar-content-container" class="awsui-sidebar-content-container"></div>');var buttonZone=$('<div class="awsui-sidebar-button"></div>');var iframe;var container;if(opt.containerId){content.html('<div id="'+opt.containerId+'" width="100%" height="100%"></div>')}if(opt.iframeId){content.html('<iframe id="'+opt.iframeId+'" name="'+opt.iframeId+'" src="../commons/wait.htm" frameborder="0" width="100%" height="100%"></iframe>')}top.append('<div class="awsui-sidebar-operate" title="关闭">&gt;&gt;</div>');top.append('<div class="awsui-sidebar-title"></div>');top.append(buttonZone);if(opt.buttons){for(var i in opt.buttons){var btn=opt.buttons[i];var button=$('<button type="button" class="button" style="display: none;color: white;background-color: transparent;border: transparent;padding: 0;"></button>');buttonZone.append(button);if(btn.display){button.show()}button.attr("id",btn.id);button.text(btn.text);var sidebarColor=opt.color.toLowerCase();if(sidebarColor=="white"||sidebarColor=="#fff"||sidebarColor=="#ffffff"){button.css({color:"black"})}button.off("click").on("click",btn.click)}}sidebar.append(top);sidebar.append(content);if(parentContainer.window!=undefined){if(parentContainer.jQuery==undefined){err("父容器没有引入jQuery");return}var containBody=parentContainer.$(document.body);if(containBody.find("#aws-sidebar-zone").length==0){containBody.append(sidebar)}else{sidebar=$("#aws-sidebar-zone");content=$("#awsui-sidebar-content-container");if(opt.containerId){content.html('<div id="'+opt.containerId+'" width="100%" height="100%"></div>')}if(opt.iframeId){content.html('<iframe id="'+opt.iframeId+'" name="'+opt.iframeId+'" src="../commons/wait.htm" frameborder="0" width="100%" height="100%"></iframe>')}}}else{}var op=sidebar.find(".awsui-sidebar-operate");var opW=op.width();var w=$(parentContainer).width();sidebar.find(".awsui-sidebar-top").css({background:opt.color});sidebar.find(".awsui-sidebar-operate").css({background:opt.color});var sideWidth=opt.width;if(sideWidth.indexOf("%")>-1){var str=sideWidth.substring(0,sideWidth.length-1);sideWidth=w*parseFloat(parseInt(str)/100)}if(sideWidth>=(w-opW)||sideWidth=="100%"){sideWidth=w;op.css("left","0");op.removeClass("awsui-sidebar-operate").addClass("awsui-sidebar-operate-fullscreen")}var defaultComplete=function(){if(opt.containerId){$("#awsui-sidebar-content-container").find("#"+opt.containerId).height($("#awsui-sidebar-content-container").height())}if(opt.iframeId){var sideFrameWindow=document.getElementById(opt.iframeId).contentWindow;sideFrameWindow.location=opt.url}};var complete=opt.complete;if(complete==undefined){complete=defaultComplete}else{if(typeof(complete)=="function"){var comp=complete;complete=function(){defaultComplete();comp()}}else{complete=defaultComplete}}var defaultCloseCallback=function(){if(opt.isMode){$("#window-mask").off("click.close");$.mask("close")}sidebar.animate({width:"0px"},opt.duration,function(){sidebar.remove()})};var closeCallback=opt.closeCallback;if(closeCallback==undefined){closeCallback=defaultCloseCallback}else{if(typeof(closeCallback)=="function"){var tmp=closeCallback;closeCallback=function(){tmp();defaultCloseCallback()}}else{closeCallback=defaultCloseCallback}}op.off("click").on("click",closeCallback);if(opt.isMode){$.mask();$("#window-mask").css("z-index",2);$("#window-mask").off("click.close").on("click.close",closeCallback)}setTimeout(function(){sidebar.show();sidebar.animate({width:sideWidth},opt.duration,complete)},100)};var maskStackCount=0;$.mask=function(method){if(typeof method=="undefined"){method="open"}if(method=="open"){if(maskStackCount==0){var iframe="";if(typeof(WebOffice2015)=="function"){iframe="<iframe width='100%' height='100%' frameborder='0'></iframe>"}var mask=$("<div id='window-mask' class='window-mask' style='display:none;'>"+iframe+"</div>").appendTo("body");mask.css({width:$(window).width()+"px",height:$(window).height()+"px",filter:"alpha(opacity=60)"}).show();$(window).on("resize.mask",function(){mask.css({width:$(window).width()+"px",height:$(window).height()+"px"})});if($.browser.isMobile||$("#isMobile").val()==="true"){mask.off("touchmove.mask").on("touchmove.mask",function(event){event.preventDefault();return false})}}maskStackCount++}else{if(method=="close"){maskStackCount--;if(maskStackCount<0){maskStackCount=0}if(maskStackCount==0){$("#window-mask").remove();$(window).off("resize.mask")}}}};$.simpleAlert=function(msg,type,delay,options){var isMobile=$("#isMobile").length>0?($("#isMobile").val()=="true"):false;if(typeof msg=="string"&&msg=="close"){$("#simplealert").remove();$.mask("close");return}if(arguments.length==3){if($.type(delay)=="object"){options=delay;delay=null}}var defaults={alertType:"info"};var opt=$.extend(defaults,options);if($("#simplealert").length){$("#simplealert").remove()}if(type){opt.alertType=type}if(opt.alertType=="infoClose"){delay="no";opt.alertType="info"}if(opt.alertType=="loading"||opt.alertType=="error"||opt.alertType=="warning"){delay="no"}if(opt.alertType=="loading"){opt.model=opt.mode=true}if($(".window-mask").length>0){opt.model=opt.mode=false}var simpleAlert=$("<div id='simplealert' class='simplealert radius4'></div>").appendTo("body");var html="<div class='icon "+opt.alertType+"'>";if(type=="loading"){html="<div>";html+="<span class='loading'><img src='../commons/img/waiting.gif' style='width:32px;'/></span>"}if(msg.indexOf("\n")==0){msg=msg.substring(1,msg.length)}html+="</div><div class='msg'>"+msg.replace(/\n/g,"<br/>")+"</div>";simpleAlert.html(html);var msg=simpleAlert.children(".msg");var icon=simpleAlert.children(".icon");simpleAlert.fadeIn();if(msg.width()>=425){if((msg.width()+icon.width())>(simpleAlert.width())){msg.css("max-width",simpleAlert.width()-icon.width())}}var top=($(window).height()-simpleAlert.height())/2+$(window).scrollTop();var left=($(window).width()-simpleAlert.outerWidth())/2+$(window).scrollLeft();if(top<0){simpleAlert.css("height",($(window).height()-200)+"px");top=($(window).height()-simpleAlert.height())/2+$(window).scrollTop();msg.css("overflow","auto")}else{msg.css("overflow","none")}simpleAlert.css("top",top+"px");simpleAlert.css("left",left+"px");icon.css("top",(simpleAlert.height()-icon.height())/2-5);if(opt.model===true||opt.mode===true){$.mask()}if(delay!="no"){setTimeout(function(){if(opt.model||opt.mode===true){$.mask("close")}if(opt.callback!=null){opt.callback()}try{simpleAlert.fadeOut(300)}catch(e){}},delay?delay:1500)}else{if(opt.alertType!="loading"){$('<span class="awsui-tabs-icon close"></span>').appendTo(simpleAlert).click(function(){$("#simplealert").remove();if(opt.model||opt.mode===true){$.mask("close")}if(opt.callback!=null){opt.callback()}})}}if(msg.height()>$(window).height()){msg.css("height",(simpleAlert.height()-20))}var msgTop=(simpleAlert.height()-msg.height())/2;if(msgTop==0){}msg.css("top",msgTop)};$.confirm=function(options){var isMobile=false;if($("#isMobile").length>0){isMobile=$("#isMobile").val=="true"}var mode=true;if($(".window-mask").length>0){mode=false}var defaults={title:提示,model:mode,bOkText:确定,bCancelText:取消,type:"confirm",secondaryConfirm:false,secondaryConfirmInfo:是确定};var opt=$.extend(defaults,options);var checkbox="";if(opt.secondaryConfirm){checkbox="<div class='msg'><input id='secondaryConfirmCheck' type='checkbox' class='awsui-checkbox'><label for='secondaryConfirmCheck' class='awsui-checkbox-label'>"+opt.secondaryConfirmInfo+"</label></div>"}var confirmWin=$("<div class='confirm-window'><div class='msg'>"+(options.content.replace(/\n/g,"<br/>")||"")+"</div>"+checkbox+"</div>").appendTo("body");var bts=[{text:options.bOkText?options.bOkText:defaults.bOkText,cls:options.cls?options.cls:"blue",handler:function(){if(!options.onConfirm||options.onConfirm()!==false){if(isMobile==false){confirmWin.dialog("close");return false}}return false}}];if(opt.type!="alert"){bts.push({text:options.bCancelText?options.bCancelText:defaults.bCancelText,handler:function(){if(!options.onCancel||options.onCancel()!==false){if(isMobile==false){confirmWin.dialog("close");return false}}return false}})}opt.buttons=bts;opt.buttonAlign="center";if(options.onClose){opt.onClose=function(){options.onClose();confirmWin.remove()}}else{opt.onClose=function(){confirmWin.remove()}}if(isMobile==false){confirmWin.dialog(opt)}else{var okCallback=opt.buttons[0].handler;var cancelCallback=opt.buttons[1].handler;mobileConfirmDialog(opt.title,opt.content,okCallback,cancelCallback)}if(opt.secondaryConfirm){$("#secondaryConfirmCheck").check();confirmWin.find("button[class='button blue']").attr("disabled","true");confirmWin.find("button[class='button blue']").addClass("disable");$("#secondaryConfirmCheck").on("ifClicked",function(){if(!$("#secondaryConfirmCheck").prop("checked")){confirmWin.find("button[class='button blue disable']").removeAttr("disabled");confirmWin.find("button[class='button blue disable']").removeClass("disable")}else{confirmWin.find("button[class='button blue']").attr("disabled","true");confirmWin.find("button[class='button blue']").addClass("disable")}})}$(document.body).find("a").blur();$(document.body).find("button").blur();$(document.body).find("input[type='button']").blur();$(document.body).find(".confirm-window").find("button[class$='blue']").focus()};var ctp=function(id,temp,opt){if(!temp.offset()||temp.hasClass("cke_wysiwyg_frame")||$.trim(opt.text)==""){return}$("#"+id).remove();var tip=$("<div id='"+id+"' class='tooltip radius4'><div class='tooltip-content'></div></div>").appendTo("body");var arrow="<span class='tooltip-arrow'></span><span class='tooltip-arrow-inner'></span>";if(opt.text&&typeof opt.text=="object"){tip.find(".tooltip-content").html(arrow).append(opt.text.clone(true).show())}else{tip.find(".tooltip-content").html(arrow+opt.text);$(document).off("click.tooltip")}if(opt.maxWidth){tip.find(".tooltip-content").css({"max-width":opt.maxWidth,width:tip.outerWidth()})}var top=0,left=0,arrowLeft=0,css1,css2;if(opt.position=="bottom"){arrowLeft=temp.offset().left+temp.outerWidth()/2-14;css1={top:"-12px",left:0,"border-bottom":"6px solid "+opt.bordercolor};css2={top:"-11px",left:0,"border-bottom":"6px solid "+opt.bgcolor};top=temp.offset().top+temp.outerHeight()+15;left=temp.offset().left}else{if(opt.position=="top"){css1={top:"27px",left:temp.outerWidth()/2-14,"border-top":"6px solid "+opt.bordercolor};css2={top:"26px",left:temp.outerWidth()/2-14,"border-top":"6px solid "+opt.bgcolor};top=temp.offset().top-temp.outerHeight()-10;if(opt.close==true){top=top-20;css1.top="47px";css2.top="46px"}left=temp.offset().left}else{if(opt.position=="left"){css1={top:"7px",right:"-21px","border-left":"6px solid "+opt.bordercolor};css2={top:"7px",right:"-20px","border-left":"6px solid "+opt.bgcolor};top=temp.offset().top;left=temp.offset().left-temp.outerWidth()/2-tip.width()+10}else{if(opt.position=="right"){css1={top:"7px",left:"-21px","border-right":"6px solid "+opt.bordercolor};css2={top:"7px",left:"-20px","border-right":"6px solid "+opt.bgcolor};top=temp.offset().top;left=temp.offset().left+temp.outerWidth()+10}}}}if((opt.position=="bottom"||opt.position=="top")&&top+tip.outerHeight()>$(window).height()){top=Math.abs(temp.offset().top-tip.outerHeight()-10);var toheight=tip.outerHeight();if(opt.close==true){toheight=toheight+20}css1={top:toheight-1,left:0,"border-top":"6px solid "+opt.bordercolor};css2={top:toheight-3,left:0,"border-top":"6px solid "+opt.bgcolor};if(opt.arrow_left!=null){css1.left=opt.arrow_left;css2.left=opt.arrow_left}}if(left+tip.outerWidth()+2>$(window).width()){left=Math.abs(left+temp.outerWidth()-tip.outerWidth());if(opt.arrow_left!=null){css1.left=opt.arrow_left;css2.left=opt.arrow_left}else{css1.left=tip.outerWidth()-30;css2.left=tip.outerWidth()-30}}tip.find(".tooltip-arrow").css(css1);tip.find(".tooltip-arrow-inner").css(css2);tip.css({color:opt.color,border:"1px solid "+opt.bordercolor,background:opt.bgcolor,top:top,left:left});tip.fadeIn()};$.fn.tooltip=function(options){var id="awsui_tooltip";var selector="#"+id;if(typeof options=="string"){if(options=="close"){$(selector).remove();$(document).off("mousedown.tooltip")}}else{var defaults={bordercolor:"#CCC",position:"bottom",bgcolor:"#fff",color:"#444",autoClose:false,arrow_left:null,maxWidth:250,close:false};var opt=$.extend(defaults,options);var temp=$(this);ctp(id,temp,opt);if(opt.autoClose){$(selector).off("mousedown.click").on("mousedown.click",function(e){e.stopPropagation()});$(document).off("mousedown.tooltip").on("mousedown.tooltip",function(e){var dragel=$(selector)[0],target=e.target;if(dragel!==target&&!$.contains(dragel,target)){temp.tooltip("close")}})}if(opt.close){$("#"+id+" div.tooltip-content").css({padding:"10px"});$('<span class="awsui-tabs-icon close"></span>').appendTo($(selector)).click(function(){temp.tooltip("close")})}}};$.fn.quicktip=function(option){var id="awsui_quicktip";if(option=="close"){$("#"+id).remove()}$(this).off("mouseover.over").on("mouseover.over",function(event){var defaults={bordercolor:"#000",position:"bottom",bgcolor:"#333",color:"#fff",autoClose:false,arrow_left:null,maxWidth:250};var target=event.target;if(target){target=$(target);if(!(target.attr("title")&&!target.attr("no-awsui-qtip"))&&!(target.hasClass("awsui-qtip")||target.attr("awsui-qtip"))){target=target.parent()}if(target.is(":disabled")){return true}if(target.attr("title")&&!target.attr("no-awsui-qtip")){target.attr("awsui-qtip",target.attr("title"));target.removeAttr("title")}if(target.hasClass("awsui-qtip")||target.attr("awsui-qtip")){var props=target.attr("awsui-qtip");if(props!=null&&props.length>0){var o=null;try{o=awsui.decode("{"+props+"}");if(o.text==null){o={text:props}}}catch(e){o={text:props}}var opt=$.extend(defaults,o);ctp(id,target,opt,event);$("#"+id).on("mouseleave.awsui.quicktip",function(){target.off("mouseleave.awsui.quicktip");$("#"+id).off("mouseleave.awsui.quicktip");$("#"+id).remove()});target.on("mouseleave.awsui.quicktip",function(){$("#"+id).remove();target.off("mouseleave.awsui.quicktip");$("#"+id).off("mouseleave.awsui.quicktip")});target.on("mousedown.awsui.quicktip",function(){$("#"+id).remove();target.off("mousedown.awsui.quicktip");$("#"+id).off("mousedown.awsui.quicktip")})}}}})};$.fn.popbox=function(options){var obj=$(this);if(typeof options=="string"&&options=="close"){$(".awsui-popbox").hide();$(".awsui-popbox-arrow").remove();$(".awsui-popbox-arrow-inner").remove();$(document).off("click.popbox");if($(obj).data("popbox")!=null){$(obj).data("popbox","close")}return}var opt={width:"200",height:"200",target:null,distanceTop:5,distanceLeft:10,hideArrow:false,callBack:null};opt=$.extend(opt,options);if($(opt.target).data("popbox")==="true"){$(opt.target).data("popbox","false");return false}if(!obj.hasClass("awsui-pop")){obj.addClass("awsui-pop")}var arrow=$("<div class='awsui-popbox-arrow top'></div>").appendTo("body");var arrow_inner=$("<div class='awsui-popbox-arrow-inner top'></div>").appendTo("body");var target=$(opt.target),offsetLeft=target.offset().left,offsetTop=target.offset().top,arrowTop=0,arrowInnerToop=0;if($(document).height()-offsetTop-target.height()-10<Number(opt.height)&&offsetTop>Number(opt.height)){arrowTop=offsetTop-arrow.outerHeight()/2-opt.distanceTop;arrowInnerToop=arrowTop-1;if(opt.hideArrow){offsetTop=offsetTop-2-Number(opt.height)}else{offsetTop=offsetTop-arrow.outerHeight()/2-opt.distanceTop-Number(opt.height)-1}arrow.removeClass("top").addClass("bottom");arrow_inner.removeClass("top").addClass("bottom")}else{if($(document).height()-offsetTop<Number(opt.height)){var newHeight=$(document).height()+(Number(opt.height)-($(document).height()-offsetTop))+target.outerHeight()+50}arrowTop=offsetTop+target.outerHeight()-arrow.outerHeight()/2+opt.distanceTop;arrowInnerToop=arrowTop+1;if(opt.hideArrow){offsetTop=offsetTop+target.outerHeight()+1}else{offsetTop=offsetTop+target.outerHeight()+arrow.outerHeight()/2+opt.distanceTop}}if((offsetLeft+Number(opt.width))>$(window).width()){if(offsetLeft+target.outerWidth()>opt.width){offsetLeft=offsetLeft-opt.width+target.outerWidth()}else{offsetLeft=($(window).width()-opt.width)/2}}initPosition();$(document).off("mousedown.popbox").on("mousedown.popbox",".awsui-popbox",function(e){e.stopPropagation()});function innerClose(){$(".awsui-popbox").hide();$(".awsui-popbox-arrow").remove();$(".awsui-popbox-arrow-inner").remove();$(document).off("click.popbox");return}$(document).off("mousedown.popbox_").on("mousedown.popbox_",function(e){if($(e.target).parent().parent().parent().hasClass("confirm-window")){return}if($(e.target).parent().parent().hasClass("confirm-window")){return}if($(e.target).parent().hasClass("confirm-window")){return}if($(e.target).hasClass("confirm-window")){return}if($(e.target).hasClass("window-mask")){return}innerClose(obj)});$(document).off("mousedown.popbox__").on("mousedown.popbox__",function(e){if($(e.target).get(0)===$(opt.target).get(0)){if($(opt.target).data("popbox")!="close"){$(opt.target).data("popbox","true")}else{$(opt.target).data("popbox","false")}}$(document).off("mousedown.popbox__")});function initPosition(){obj.css({width:opt.width,height:opt.height,left:offsetLeft,top:offsetTop}).fadeIn("fast",function callb(){if(opt.callBack){opt.callBack()}});if(opt.hideArrow){arrow.css("display","none");arrow_inner.css("display","none")}else{arrow.css({left:target.offset().left+target.outerWidth()/2-opt.distanceLeft,top:arrowTop}).fadeIn("fast");arrow_inner.css({left:target.offset().left+target.outerWidth()/2-opt.distanceLeft,top:arrowInnerToop})}}};var current_extend_menu=null;$.fn.menu=function(options){if(typeof options=="string"&&options=="close"){$(this).trigger("close");$(this).hide();$(this).off("mousedown.menu");$(document).off("mousedown.mousedown");$(document).off("contextmenu")}else{var defaults={target:null,useTargetPosition:true,top:0,left:0};options=$.extend(defaults,options);var temp=$(this);if(options.items!=null){temp.html("");var htmls="";for(var i=0;i<options.items.length;i++){var attrs="";var icon="";var iconCls="";var items=options.items[i];if(items.icon!=null){icon="<img src='"+items.icon+"'/>"}else{if(items.iconCls!=null){iconCls="<span class='icon "+items.iconCls+"'></span>"}else{if(items.imgs){icon=items.imgs}}}if(items.noline){attrs=" class='noline' "}var curr_item=$("<li "+attrs+" tit='"+items.tit+"'>"+icon+iconCls+items.text+"</li>").appendTo(temp);curr_item.data("awsui-combobox-item",items);if(!items.disabled&&items.method!=null){curr_item.on("click",items,items.method)}else{curr_item.addClass("disable");curr_item.off("click")}}}if(options.target!=null&&options.useTargetPosition){var tar=options.target;var offset=options.target.offset();if($("#simple-right").length>0){offset.top=offset.top-parseInt($("#simple-right").css("top"),10);offset.left=offset.left-parseInt($("#simple-right").css("left"),10)}if(options.position=="center"){options.left=offset.left+tar.outerWidth()/2-temp.outerWidth()/2}else{if(options.position=="right"){options.left=offset.left-(temp.outerWidth()-tar.outerWidth())}else{options.left=offset.left}}options.top=offset.top+tar.outerHeight();if(options.top+temp.outerHeight()-$(document).scrollTop()>$(window).height()){options.top=options.top-temp.outerHeight()-options.target.outerHeight()}}temp.css({left:options.left,top:options.top}).show();temp.children().on("mouseenter",function(){var curr_child=$(this);temp.find(".active").removeClass("active");if(!curr_child.hasClass("disable")){curr_child.addClass("active")}showMenuList(curr_child)});temp.off("mousedown.menu").on("mousedown.menu",function(e){e.stopPropagation();return false});$(document).off("mousedown.mousedown").on("mousedown.mousedown",function(){temp=$(".awsui-menu:visible");temp.menu("close")});function showMenuList(curr_child){if(curr_child.find(".awsui-right-arrow:first").length>0){var curr_second_temp=curr_child.children(".awsui-menu");if(current_extend_menu!=null){current_extend_menu.hide()}current_extend_menu=curr_second_temp;curr_second_temp.menu({left:curr_child.outerWidth()})}else{if(!curr_child.parent().hasClass("extend-menu")){if(current_extend_menu!=null){current_extend_menu.hide();current_extend_menu=null}}}}}};$.fn.numberbox=function(options){var defaults={defaultValue:0,uplength:1,symbol:"",max:100,min:0};var opt=$.extend(defaults,options);var temp=$(this);temp.addClass("awsui-numberbox");temp.after("<span class='awsui-numberbox-arrow'><span class='forms-icon up'></span><span class='forms-icon down'></span></span>");temp.val(opt.defaultValue+opt.symbol);bindEvent();function bindEvent(){temp.next().find(".forms-icon.up").on("click",function(){if(opt.upClick!=null){opt.upClick()}var value=temp.val();if(opt.symbol!=""){value=value.substring(0,value.length-1)}value=parseFloat(value);if(value>=opt.max){return}value+=opt.uplength;temp.val(value+opt.symbol)});temp.next().find(".forms-icon.down").on("click",function(){if(opt.downClick!=null){opt.downClick()}var value=temp.val();if(opt.symbol!=""){value=value.substring(0,value.length-1)}value=parseFloat(value);if(value<=opt.min){return}value-=opt.uplength;temp.val(value+opt.symbol)})}};$.fn.buttonedit=function(options){var isMobile=$("#isMobile").length>0?($("#isMobile").val()=="true"):false;var defaults={iconCls:"",symbol:"...",hideSearch:false};var opt=$.extend(defaults,options);var temp=$(this);var parentButtonEdit=$(this).parent();if($(this).parent().hasClass("disable")){opt.isClearData=false}if(isMobile){if(!parentButtonEdit.hasClass("awsui-buttonedit-wrap")){var disable="";if(temp.hasClass("disable")||temp.attr("disabled")){disable=" disable"}var _before;if(typeof opt.onSuperior=="function"){_before=temp.before('<span class="awsui-buttonedit-superior"></span').prev();temp.css({"padding-left":_before.width()});_before.position({my:"left center",at:"left+1 center",of:wrap})}var wrap=$(this).wrap("<div class='mui-icon-div"+disable+"'></div>").parent();var removeDateBtnCss="";var searchBtn=$("<span class='mui-icon-span'></span>");if(temp.hasClass("disable")||temp.attr("disabled")){searchBtn.css("cursor","default")}var after=temp.after(searchBtn).next();if(opt.validate&&!opt.multiple){temp.attr("onChange","checkDictValidate(this,'"+opt.config+"','"+opt.record+"','"+opt.rowIndx+"','"+opt.boDefName+"')")}if(opt.iconCls!=""&&opt.iconCls=="icon-address"){after.html("<span class='mui-icon mui-icon-person'></span>").next()}else{after.html("<span class='mui-icon mui-icon-search'></span>").next()}}var buttonEdit_timeout;after.css({cursor:"pointer"});if(typeof opt.onClick=="function"){if(temp.prop("readOnly")){temp.off("click.be").on("click.be",function(e){opt.onClick(e)})}if($("#isMobile").val()=="true"){temp.next().off("tap.be").on("tap.be",function(e){opt.onClick(e)})}else{temp.next().off("click.be").on("click.be",function(e){opt.onClick(e)})}}if(typeof opt.onLiveSearch=="function"){temp.off("keyup").on("keyup",function(e){window.clearTimeout(buttonEdit_timeout);buttonEdit_timeout=window.setTimeout(function(){opt.onLiveSearch(e)},500)})}if(typeof opt.onSuperior=="function"&&_before!=null){_before.off("tap.be").on("tap.be",function(e){opt.onSuperior(e);e.stopPropagation()})}}else{if(!parentButtonEdit.hasClass("awsui-buttonedit-wrap")){var w=temp.outerWidth();try{if(isMobile){}}catch(e){}var h=temp.outerHeight();var disable="";if(temp.hasClass("disable")||temp.attr("disabled")){disable=" disable"}var wrap=$(this).wrap("<span class='awsui-buttonedit-wrap"+disable+"'></span>").parent();var _before;if(typeof opt.onSuperior=="function"){_before=temp.before('<span class="awsui-buttonedit-superior"></span').prev();temp.css({"padding-left":_before.width()})}var removeDateBtnCss="";var searchBtn=$("<span class='awsui-buttonedit-search'></span>");if(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.match(/8./i)=="8."){searchBtn=$("<span class='awsui-buttonedit-search' style='top:0px;right:1px;'></span>")}if(temp.hasClass("disable")||temp.attr("disabled")){searchBtn.css("cursor","default")}if(opt.hideSearch){searchBtn.css("display","none")}var after=temp.after(searchBtn).next();if(opt.isClearData){if(isMobile=="true"||isMobile==true){removeDateBtnCss="margin-top: 3px;"}var removeDate="<span gridRowIndx="+opt.gridRowIndx+" style='"+removeDateBtnCss+"cursor: pointer;display:none;padding:3px;' title='"+清空数据+"' class='removeAll'><img  src='../apps/_bpm.portal/img/cancel.png'  border='0' ></span>";var removeDateBtn=after.after(removeDate).next();var removeBtnRight="38px";if(opt.hideSearch){removeBtnRight="12px"}if(temp.hasClass("aws-grid-editor-default")){removeBtnRight="28px"}removeDateBtn.css({position:"absolute",right:removeBtnRight,top:0});$(removeDateBtn).on("click",function(){$(this).prevAll("input").val("");if(opt.clearField){var clearFieldArr=opt.clearField.split("|");if(opt.record!="undefined"&&opt.record!=undefined){var record=AWSGrid.getGrid(opt.boDefName).awsGrid("getRowData",opt.rowIndx);for(var i=0;i<clearFieldArr.length;i++){var field=clearFieldArr[i].trim();record[field]="";AWSGrid.getGrid(opt.boDefName).awsGrid("setEditData",record);AWSGrid.getGrid(opt.boDefName).awsGrid("refreshCell",{rowIndx:opt.rowIndx,dataIndx:field})}}else{for(var i=0;i<clearFieldArr.length;i++){var field=clearFieldArr[i].trim();$("#"+field).val("")}var gridId=$(this).parents(".aws-grid").attr("id");if(gridId){var indx=parseInt($(this).attr("gridRowIndx"));var $tr=$("#"+gridId).awsGrid("getRowData",indx);for(var i=0;i<clearFieldArr.length;i++){var field=clearFieldArr[i].trim();$tr[field]="";$("#"+gridId).awsGrid("setEditData",$tr)}$("#"+gridId).awsGrid("refresh")}}if(opt.callback!=undefined&&opt.callback!=null){opt.callback()}}});$(this).parent().off("mouseenter").on("mouseenter",function(){if($(this).children("input").val()!=""){$(this).children(".removeAll").show()}}).off("mouseleave").on("mouseleave",function(){$(this).children(".removeAll").hide()})}if(opt.validate&&!opt.multiple){temp.attr("onChange","checkDictValidate(this,'"+opt.config+"','"+opt.record+"','"+opt.rowIndx+"','"+opt.boDefName+"')")}if(opt.iconCls!=""){after.addClass(opt.iconCls)}else{}wrap.css({width:w+after.width()});temp.width(w-(temp.outerWidth()-temp.width()));temp.addClass("awsui-buttonedit");temp.css({"padding-right":after.width()});if(isMobile==false){temp.css({width:temp.width()-22})}wrap.outerWidth(temp.outerWidth())}var buttonEdit_timeout;if(typeof opt.onClick=="function"){if(temp.prop("readOnly")||temp.prop("disabled")){temp.off("click").on("click",function(e){opt.onClick(e)})}temp.next().off("click").on("click",function(e){opt.onClick(e)});after.addClass("click");if(navigator.appName=="Microsoft Internet Explorer"&&navigator.appVersion.match(/8./i)=="8."){after.css({"border-right":"#ccc 1px solid","border-bottom":"#ccc 1px solid","border-top":"#ccc 1px solid",height:"24px"})}temp.css({"padding-right":after.width()})}if(typeof opt.onLiveSearch=="function"){temp.off("keyup").on("keyup",function(e){window.clearTimeout(buttonEdit_timeout);buttonEdit_timeout=window.setTimeout(function(){opt.onLiveSearch(e)},500)})}if(typeof opt.onSuperior=="function"&&_before!=null){_before.off("click").on("click",function(e){opt.onSuperior(e);e.stopPropagation()})}}};$.fn.checkClass=function(options){var ck=function(e){var inputClassName=$(e.target).val();if(inputClassName==""){return false}awsui.ajax.request({url:"./jd",method:"POST",dataType:"json",async:false,data:{cmd:"CONSOLE_COMMON_CLASS_CHECK",sid:options.sid,type:options.type,appId:$.type(options.appId)=="function"?options.appId():options.appId,input:inputClassName}})};if(!$(this).data("checkClass.inst")){$(this).data("checkClass.inst",true);$(this).blur(ck)}};$.fn.superInput=function(options){var defaultArr=new Array();var defaults={maxLength:15,defaultVal:defaultArr};var opt=$.extend(defaults,options);var temp=$(this);var input=temp.find("input[type=text]:first");var content=$("<div></div>").prependTo(temp);var context=[];var defalutArrTemp=opt.defaultVal;for(key in defalutArrTemp){if(defalutArrTemp[key]!=""&&typeof(defalutArrTemp[key])=="string"){var defaulthtml=$("<span class='awsui-supertext-items' id='"+key+"'>"+defalutArrTemp[key]+"<span class='forms-icon down close'></span></span>").appendTo(content);context.push(defalutArrTemp[key]);defaulthtml.find(".close").on("click",function(){$(this).parent().fadeOut(function(){context.splice($.inArray(input.val(),context),1);$(this).remove();if(!opt.onClose||opt.onClose($(this))!==false){return false}})})}}input.on("focus",function(){if(!temp.hasClass("active")){temp.addClass("active")}});input.on("keyup",function(e){if(e.keyCode==13&&input.val()!=""){if($(".awsui-supertext-items").length>=opt.maxLength){input.val("");$.simpleAlert("不允许重复添加");return}if($.inArray(input.val(),context)>=0){input.val("");return}context.push(input.val());var html=$("<span class='awsui-supertext-items'>"+input.val()+"<span class='forms-icon down close'></span></span>").appendTo(content);html.hide();html.fadeIn();if(!opt.onAdd||opt.onAdd()!==false){}input.val("");html.find(".close").on("click",function(){$(this).parent().fadeOut(function(){context.splice($.inArray(input.val(),context),1);$(this).remove();if(!opt.onClose||opt.onClose($(this))!==false){return false}})})}else{if(e.keyCode==8&&input.val()==""){content.find(".awsui-supertext-items:last").fadeOut(function(){context.splice($.inArray(input.val(),context),1);$(this).remove();if(!opt.onClose||opt.onClose(content.find(".awsui-supertext-items:last"))!==false){return false}})}}});var fun={getData:function(){return context}};return fun};$.fn.switchButton=function(options){var defaults={showtextflag:true,color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#ffffff",onColor:"#ffffff",offColor:"#000000",className:"switchery",disabled:false,disabledOpacity:0.5,speed:"0.1s",size:"default",ontext:"开",offtext:"关",swwidth:80,swheight:30,fontSize:13};var opt=$.extend(defaults,options);if(this.attr("data-switchery")=="true"){return}if(opt.change){$(this).get(0).onchange=opt.change}var swtchButton=new Switchery($(this).get(0),opt);return swtchButton};$.fn.customSelect=function(value){var cf=function(select){if(typeof value=="string"){select.val(value);setValue();return}if(select.data("awsui.customSelect")){return}else{select.data("awsui.customSelect",true)}var selectWidth=select.css("width");var selectHeight=select.css("height");var style="";if(select.hasClass("awsui-select-nofit")||select.attr("nofit")=="true"){style=select.attr("style")?select.attr("style"):""}else{if(selectWidth=="0px"||selectWidth=="100px"||selectWidth=="120px"||selectWidth=="100%"||select.hasClass("txt")){if(select.parent().is("span")){if(select.parent().parent().hasClass("awsui-ux-content")||select.parent().hasClass("aws-form-ux-content")){select.width(select.parent().parent().width()-5)}else{var tempWidth=selectWidth;select.width(select.parent().parent().width()+8)}}else{if(select.parent().hasClass("awsui-ux-content")||select.parent().hasClass("aws-form-ux-content")){select.width(select.parent().width()-5)}else{if(select.parent().is("div")){}else{select.css("width",select.parent().actual("width")+8)}}}}else{if(select.is(":hidden")){select.css("width",select.actual("width"))}else{select.css("width",selectWidth)}}}select.css({position:"absolute",top:0,left:0});var disable=select.prop("disabled");var display=select.css("display");var span=$("<span class='awsui-select-span' style='"+style+"'><span class='awsui-select-text'></span></span>");if(disable){span.addClass("disable");span.css("opacity","0.5")}if(display=="none"){span.css("display","none")}select.after(span);span.append(select);var fixWidth=0;if(window.event==null||!!window.ActiveXObject||"ActiveXObject" in window){fixWidth=4}span.css({width:select.actual("width")-8+fixWidth});span.find("span[class='awsui-select-text']").css({width:select.actual("width")-18+fixWidth,height:"19px",lineHeight:"19px","vertical-align":"-3px"});setValue();select.css({height:span.actual("outerHeight")});select.on("change",function(){setValue()});function setValue(){var text=select.find(":selected").text();var placeholder=select.attr("placeholder");if($(select).val()==""){select.parent().find("span[class='awsui-select-text']").css("color","#999").text(placeholder==null||placeholder==""?text:placeholder)}else{select.parent().find("span[class='awsui-select-text']").css("color","#000").text(text)}}};$(this).each(function(i){cf($(this))})};$.cookie=function(key,value,options){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(value))||value===null||value===undefined)){options=$.extend({},options);if(value===null||value===undefined){options.expires=-1}if(typeof options.expires==="number"){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days)}value=String(value);return(document.cookie=[encodeURIComponent(key),"=",options.raw?value:encodeURIComponent(value),options.expires?"; expires="+options.expires.toUTCString():"",options.path?"; path="+options.path:"",options.domain?"; domain="+options.domain:"",options.secure?"; secure":""].join(""))}options=value||{};var decode=options.raw?function(s){return s}:decodeURIComponent;var pairs=document.cookie.split("; ");for(var i=0,pair;pair=pairs[i]&&pairs[i].split("=");i++){if(decode(pair[0])===key){return decode(pair[1]||"")}}return null};function setDisabled(target,disabled){var state=$.data(target,"awsui")||{};var opts=state.options||{};$(target)[disabled?"addClass":"removeClass"]("disable");var tmp=$(target);if(disabled){opts.disabled=true;var href=tmp.attr("href");if(href){state.href=href;tmp.attr("href","javascript:void(0)")}if(target.onclick){state.onclick=target.onclick;target.onclick=null}}else{opts.disabled=false;if(state.href){tmp.attr("href",state.href)}if(state.onclick){target.onclick=state.onclick}}$.data(target,"awsui",state)}var methods={enable:function(jq){return jq.each(function(){setDisabled(this,false)})},disable:function(jq){return jq.each(function(){setDisabled(this,true)})}};$.fn.awsui=function(options,param){if(typeof options=="string"){return methods[options](this,param)}};$.fn.check=function(){if(arguments!=null&&typeof arguments[0]=="string"){if(arguments.length==1){return $(this).iCheck(arguments[0])}else{if(arguments.length==2){return $(this).prop(arguments[1])}else{if(arguments.length==3){return $(this).iCheck(arguments[2]?"check":"uncheck")}}}}var options={checkboxClass:"icheckbox_minimal-grey",radioClass:"iradio_minimal-grey",increaseArea:"20%"};$.extend(options,arguments[0]||{});return $(this).each(function(){$(this).iCheck(options);var chk=$(this);if(chk.attr("title")!=null){var t=chk.attr("title");chk.removeAttr("title");chk.parent().attr("title",t)}var checkAllGroup=chk.attr("group");if(chk.hasClass("check-all")&&chk.attr("type")=="checkbox"){var checkAll=function(){if($("input[group='"+checkAllGroup+"'][class*=check-all]").prop("checked")){$("input[group='"+checkAllGroup+"'][class=awsui-checkbox]").each(function(){if(typeof($(this).attr("disabled"))=="undefined"){$(this).check("option","checked",false)}})}else{$("input[group='"+checkAllGroup+"'][class=awsui-checkbox]").each(function(){if(typeof($(this).attr("disabled"))=="undefined"){$(this).check("option","checked",true)}})}try{var callback=$("input[group='"+checkAllGroup+"'][class*=check-all]").attr("callback");eval(callback)}catch(e){}};chk.on("ifClicked",checkAll)}if(checkAllGroup&&chk.hasClass("check-all")==false){var eachCheckClick=function(){$("input[class*=check-all][group='"+checkAllGroup+"']").check("option","checked",true);$("input[class=awsui-checkbox][group='"+checkAllGroup+"']").each(function(i,v){if(!$(v).prop("checked")){$("input[class*=check-all][group='"+checkAllGroup+"']").check("option","checked",false)}});try{var callback=chk.attr("callback");eval(callback)}catch(e){}};chk.on("ifChecked",eachCheckClick);chk.on("ifUnchecked",function(){$("input[class*=check-all][group='"+checkAllGroup+"']").check("option","checked",false);try{var callback=chk.attr("callback");eval(callback)}catch(e){}})}})}})(jQuery);String.prototype.format=function(c){var a=this;if(arguments.length>0){if(arguments.length==1&&typeof(c)=="object"){for(var e in c){if(c[e]!=undefined){var f=new RegExp("({"+e+"})","g");a=a.replace(f,c[e])}}}else{for(var d=0;d<arguments.length;d++){if(arguments[d]!=undefined){var f=new RegExp("({)"+d+"(})","g");a=a.replace(f,arguments[d])}}}}return a};function stopPropagation(a){a=window.event||a;if(document.all){a.cancelBubble=true}else{a.stopPaopagation()}}function isTelphone(a){var c="((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)";if(a.test(c)){return true}return false}(function(a){a.fn.addBack=a.fn.addBack||a.fn.andSelf;a.fn.extend({actual:function(c,m){if(!this[c]){throw'$.actual => The jQuery method "'+c+'" you called does not exist'}var g={absolute:false,clone:false,includeMargin:false};var j=a.extend(g,m);var f=this.eq(0);var i,k;if(j.clone===true){i=function(){var n="position: absolute !important; top: -1000 !important; ";f=f.clone().attr("style",n).appendTo("body")};k=function(){f.remove()}}else{var h=[];var e="";var d;i=function(){d=f.parents().addBack().filter(":hidden");e+="visibility: hidden !important; display: block !important; ";if(j.absolute===true){e+="position: absolute !important; "}d.each(function(){var n=a(this);var o=n.attr("style");h.push(o);n.attr("style",o?o+";"+e:e)})};k=function(){d.each(function(n){var p=a(this);var o=h[n];if(o===undefined){p.removeAttr("style")}else{p.attr("style",o)}})}}i();var l=/(outer)/.test(c)?f[c](j.includeMargin):f[c]();k();return l}})})(jQuery);function mobileCachetDialog(g,e,f,c,a){var d="<header id='mobile-header' class='mui-bar mui-bar-nav'><a class='mui-icon mui-icon-left-nav mui-pull-left' id='cachetCancelBtn'><font size='4'>"+返回+"</font></a><a class='mui-icon mui-pull-right' id='cachetOkBtn'><font size='4'>"+确定+"</font></a></header><div class='mui-content' style='padding:54px 10px 10px 10px'><div class='mui-input-row'><label>"+印章密码+"</label><span class='required'><input type='password' name='confirmPwd' id='confirmPwd' class='mui-input-clear' value='' style='border: 1px solid rgba(0,0,0,.2);width:65%;'/></span></div></div>";$("#aws-form-container").hide();$("#boItemNameSearch_div").append(d);$("#boItemNameSearch_div").show();$("#cachetCancelBtn").off("click").on("click",function(h){if(c){c()}return false});$("#cachetOkBtn").off("click").on("click",function(h){if(f){f()}return false})}function mobileConfirmDialog(g,d,f,c,a){$("#aws-form-container").hide();var e=$("#frmMain");$("<div id='popup_cachet' class='mui-cachet-div'><header class='mui-bar mui-bar-nav'><a class='mui-icon mui-icon-left-nav mui-pull-left' id='cachetCancelBtn'>"+返回+"</a><a class='mui-icon' style='float:right;' id='cachetOkBtn'>"+保存+"</a></header><div class='mui-content'><div class='mui-input-row'><label>"+印章密码+"</label><span class='required'><input type='password' name='confirmPwd' id='confirmPwd' class='mui-input-clear' value='' style='border: 1px solid rgba(0,0,0,.2);width:65%;'/></span></div></div></div>").appendTo(e);$("#cachetCancelBtn").off("click").on("click",function(h){if(c){c()}$("#popup_cachet").remove();$("#aws-form-container").show()});$("#cachetOkBtn").off("click").on("click",function(h){if(f){f()}})}$.fn.extend({preventScroll:function(a){$(this).each(function(){var c=this;if(navigator.userAgent.indexOf("Firefox")>=0){c.addEventListener("DOMMouseScroll",function(d){if($(c).children().eq(0).is("iframe")){d.preventDefault()}if(a){a.get(0).scrollTop+=d.detail>0?60:-60;d.preventDefault()}},false)}else{c.onmousewheel=function(d){d=d||window.event;if($(c).children().eq(0).is("iframe")){return false}if(a){a.get(0).scrollTop+=d.wheelDelta>0?-60:60;return false}}}})}});
/*!
 * jQuery verson 1.10.2
 * AWS combobox 插件
 * author zhangy
 * 2014年9月
 */
(function(a){a.fn.extend({getSelectionStart:function(){if(this.lengh==0){return -1}input=this[0];var d=input.value.length;if(typeof(input.selectionStart)!="undefined"){d=input.selectionStart}else{if(input.createTextRange){var c=document.selection.createRange().duplicate();c.moveEnd("character",input.value.length);if(c.text==""){d=input.value.length}d=input.value.lastIndexOf(c.text)}}return d}})})(jQuery);(function(c){var a=function(d,e){this.opt=d;this.obj=e};a.prototype={selectVal:[],dataSource:{},init:function(){this.selectVal=[];this.dataSource={};if(this.opt&&this.opt.async&&this.opt.async.url&&this.opt.async.url.indexOf("%24")>0){this.getData()}else{this.dataToDataSource()}this.create();if(this.opt.selectVal!=""){this.selectVal=[];if(this.opt.multiple&&this.opt.selectVal.indexOf(this.opt.seperator)>0){var e=this.opt.selectVal.split(this.opt.seperator);for(var d=0;d<e.length;d++){this.selectVal.push(e[d])}this.setValue(false,true)}else{this.selectVal=[];this.selectVal.push(this.opt.selectVal);this.setValue(false,true)}}},getData:function(){var d=this;var g=c.extend({url:"",params:{}},d.opt.async||{});if(this.opt.search){this.opt.search(null,g.params)}try{if(g.params&&g.params.bindValue){g.params.bindValue=awsui.encode(AWSForm.getFormData(c("#frmMain"),c("#boItemList").val()))}}catch(f){}awsui.ajax.request({url:g.url,data:g.params,dataType:"json",type:"POST",async:false,success:function(e){d.opt.data=e;d.dataToDataSource()}});if(d.opt.data==null){d.opt.data=[]}},create:function(){if(c(this.obj).parent().hasClass("awsui-combobox")){c(this.obj).val(this.opt.selectVal);c(this.obj).prev().val(this.opt.selectVal);this.obj=c(this.obj).parent();c(this.obj).data("dataSource",this.dataSource);c(this.obj).data("dataSourceX",this.dataSourceX);if(this.dataSource){c(this.obj.children().eq(0)).attr("placeholder",请选择)}else{c(this.obj.children().eq(0)).attr("placeholder",无数据)}this.removeMenu();return}var e=this.obj.attr("event")?this.obj.attr("event"):"";var f=this.obj.attr("exstyle")?this.obj.attr("exstyle"):"";var d=this.opt.multiple&&this.opt.editable?" awsui-qtip='可填多个值,以 "+(this.opt.seperator!=" "?this.opt.seperator:"空格")+" 作为分隔符'":"";this.obj.after("<span id='"+c(this.obj).attr("id")+"_Tip' class='awsui-combobox' "+d+e+" style='"+f+"'></span>");var m=this.obj.next();m.append(this.obj);var h;if(!this.opt.width){this.opt.width=c(this.obj).css("width")}if(this.obj.attr("event")&&this.obj.attr("event").indexOf("nofit")>=0){var j=this.obj.parent(".awsui-combobox").attr("style");if(j.indexOf("width")>=0){var i=j.match("width:(.*?)px");this.opt.width=i[1]}}var k=this.obj;if(typeof(k.attr("placeholder"))=="string"&&k.attr("placeholder")!=""){this.opt.placeholder=k.attr("placeholder")}else{if(!this.opt.async&&(this.opt.data==undefined||!this.opt.data.length>0)){this.opt.placeholder=this.opt.noDataPlaceholder?this.opt.noDataPlaceholder:无数据}else{if(this.opt.editable&&this.opt.placeholder==undefined){this.opt.placeholder=请选择或输入}else{if(!this.opt.editable&&this.opt.placeholder==undefined){this.opt.placeholder=请选择}}}}if(k.val()&&k.val()!=""){this.opt.selectVal=k.val()}if(this.opt.hiddenName&&this.opt.hiddenName!=null){h=c("<input type='hidden' id='"+this.opt.hiddenName+"' name='"+this.opt.hiddenName+"'>")}else{var l="";if(this.obj.attr("id")!=null){k.hide();var g=c("<input type='text' id='_awsui_combobox_display_value_"+this.obj.attr("id")+"' "+e+" name='_awsui_combobox_value_"+this.obj.attr("id")+"' value='' >");if(this.obj.attr("title")!=undefined){g.attr("awsui-qtip",this.obj.attr("title"))}g.attr("placeholder",this.opt.placeholder);if(this.opt.editable==false){g.attr("readonly","readonly")}if(this.obj.width()){g.css("width",this.obj.width()-22)}k.before(g)}else{l="id='_awsui_combobox_hidden_' name='_awsui_combobox_hidden_'"}h=c("<input type='hidden' "+l+" >")}k.attr("placeholder",this.opt.placeholder);if(this.opt.editable==false){k.attr("readonly","readonly")}if(this.opt.editable==false||this.opt.disabled==true){this.opt.autoComplete=false}this.obj=m;if(this.opt.arrow){this.obj.append("<span class='aws-combobox-icons down'></span>")}this.initStyle();if(this.opt.disable||this.obj.find("input.awsui-combobox").attr("disabled")){this.disable()}else{this.bind()}c(".awsui-combobox").bind("mousewheel DOMMouseScroll",function(n){n.stopPropagation()})},createMenu:function(j){var g=this;if(this.opt&&this.opt.async!=null){this.getData()}var f=g.dataSource;c(this.obj).attr("createMenu","true");if(c(this.obj).data("dataSource")!=undefined){g.dataSourceX=c(this.obj).data("dataSourceX")}var l={};l.content=[];if(f!=null){var i=c("<ul id='awsui-combobox-list'></ul>").appendTo(g.obj).hide();try{setGridOverflow(c(this.obj).find("input:last").attr("boname"))}catch(h){}c.each(f,function(t,e){var o,v;if(typeof e=="string"){o=e;v=e}else{o=e.value;v=e.label}if(j!=null&&o.toUpperCase().indexOf(j.toUpperCase())<0&&v.toUpperCase().indexOf(j.toUpperCase())<0){return true}else{for(var p=0;p<g.opt.data.length;p++){var x=g.opt.data[p];var u="";if(g.opt.displayField){u=x[g.opt.displayField]}else{if(x.text!=null){u=x.text}}var w="";if(g.opt.valueField){w=x[g.opt.valueField]}else{if(x.value!=null){w=x.value}}if(j!=null&&(u.toUpperCase().indexOf(j.toUpperCase())>-1||w.toUpperCase().indexOf(j.toUpperCase())>-1)){l.content.push(x)}}}var s="";for(var q=0;q<g.opt.data.length;q++){var x=g.opt.data[q];var n="";if(g.opt.valueField){n=x[g.opt.valueField]}else{n=x.text}if(n==o){if(x.imgs){s=x.imgs}break}}if(g.opt.multiple){i.append("<li val='"+o+"'><span class='aws-combobox-icons check'></span>"+s+v.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</li>")}else{i.append("<li val='"+o+"'>"+s+v.replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</li>")}});var d=g.opt.width;if(g.opt.listWidth){d=g.opt.listWidth}if(g.opt.autoHeight==false){i.css({maxHeight:g.opt.menuMaxHeight,overflow:"auto"})}var k=g.obj.height()+2;var m=i.height();if(g.obj.html().indexOf("Grid")>=0){if(g.obj.parent().position().top+m>300){k-=(m+k+4)}}else{if(g.obj.offset().top+g.obj.height()+m-c(document).scrollTop()>c(window).height()){k-=(m+k+4)}}i.css({left:-1,top:k,width:d}).show();if(i.children().length==0){g.removeMenu(j)}g.bind(j?null:1)}if(g.opt.response){g.opt.response("",l);if(l.content.length==1){g.removeMenu()}}},getLabel:function(g,f){for(var e=0;e<g.length;e++){var d=g[e];if(d.value==f){return d.label}}return f},removeMenu:function(d){if(!c(this.obj).attr("createMenu")){return false}c(this.obj).removeAttr("createMenu");this.obj.find("ul").remove();if(!d&&this.opt.cascade){input=this.obj.find("input[type=text]");input.blur()}},setMenuSelect:function(){var e=this;if(e.opt.multiple){for(var d=0;d<e.selectVal.length;d++){var f=e.selectVal[d];e.obj.find("li[val='"+f+"']").find("span.check").addClass("ac")}}else{e.obj.find("li[val='"+e.selectVal[0]+"']").addClass("ac")}},dataToDataSource:function(){var d=this;var e=[];if(d.opt.data){e=d.opt.data}d.dataSource=[];d.dataSourceX={};c.each(e,function(h,j){var f,g;if(typeof j=="string"){f=j;g=j}else{f=j.label||j.text;g=d.opt.valueField?j[d.opt.valueField]:j.value}var k={value:g,label:f};d.dataSource.push(k);d.dataSourceX[f]=g})},setValue:function(j,u){var m=this,q=[],o=m.selectVal,h="";var l;var d=m.obj.data("oldTxt");var p=m.obj.data("oldVal");if(m.selectVal.length>1){var f=o.length;for(var k=0;k<f;k++){var e=o[k];var s=m.getLabel(m.dataSource,e);q.push(s)}h=q.join(m.opt.seperator);l=o.join(m.opt.seperator)}else{o=o[0];h=m.getLabel(m.dataSource,o);if(!h){if(this.opt.editable){h=o}else{h=o=""}}l=o}if(u&&c(this.obj).find("input:last").attr("displayValue")){l=c(this.obj).find("input:last").attr("value");h=c(this.obj).find("input:last").attr("displayValue")}m.obj.find("input:first").val(h);if(this.opt.hiddenName){m.obj.find("#"+this.opt.hiddenName).val(l)}else{m.obj.find("input:last").val(l)}if(m.opt.liveSearch){m.obj.find("input:first").val(l)}if(j&&m.opt.select){var n={};var g={};if(m.opt.valueField){n[m.opt.valueField]=l;g[m.opt.valueField]=l}else{n.value=l;g.value=l}if(m.opt.displayField){n[m.opt.displayField]=h;g[m.opt.displayField]=h}else{n.text=h;g.text=h}if(p==undefined){p=""}if(d==undefined){d=""}g.oldVal=p;g.oldTxt=d;n.data=g;m.opt.select(m,n)}m.obj.data("oldVal","");m.obj.data("oldTxt","");m.obj.data("selectVal",m.selectVal)},getPositionValue:function(g,e){var d=g.split(this.opt.seperator);var f=this.getPositionIndx(g,e);return d[f]},setPositionValue:function(f,d,g){var e=this.getPositionIndx(f,d);this.selectVal[e]=g},getPositionIndx:function(g,e){var d=this.getPositionSings(g);e--;var f=0;c.each(d,function(h,j){if(j.end-j.start==1&&e==j.start){f=h;return false}if(j.start<=e&&e<j.end){f=h;return false}});return f},getPositionSings:function(e){var d=e.split(this.opt.seperator);var f=[];c.each(d,function(g,j){var h={};if(g!=0){h.start=f[g-1].end;h.end=h.start+j.length+1}else{h.start=-1;h.end=j.length}f.push(h)});return f},getValue:function(){var d=this;if(d.selectVal.length>1){return d.selectVal.join(d.opt.seperator)}else{if(d.selectVal.length==1){return d.selectVal[0]}else{return""}}},removeRepeat:function(h){var e=h.split(this.opt.seperator);var d=[];var g=0;for(var f=0;f<e.length;f++){var j=this.dataSourceX[e[f]]!=null?this.dataSourceX[e[f]]:e[f];if(c.inArray(j,d)<0&&c.inArray(e[f],d)<0&&j!=""){d.push(e[f])}else{if(f>0&&this.selIndx!=null&&g<this.selIndx){this.selIndx-=e[f].length+1}}g+=e[f].length}return d},changeValue:function(e){if(this.dataSourceX==null){return e}var d=this;c.each(e,function(g,h){var f=d.dataSourceX[h];e[g]=f!=null?f:e[g]});return e},filterValue:function(g){var e=g.split(this.opt.seperator);var d=[];for(var f=0;f<e.length;f++){var h=this.dataSourceX[e[f]];if(h!=null&&c.inArray(h,d)<0&&c.inArray(e[f],d)<0&&h!=""){d.push(h)}}return d},saveToSelectVal:function(){var e=this,f=this.obj.find("input").val();var d=f.split(this.opt.seperator);e.selectVal=[];c.each(e.dataSource,function(g,h){if(c.inArray(h.label,d)>=0){e.selectVal.push(h.value)}})},initStyle:function(){var d=this;d.obj.css({width:d.opt.width,height:d.opt.height});var e=d.opt.width;if(typeof(e)=="string"){if(e.indexOf("px")>=0){e=parseInt(e.replace(/[^0-9]/ig,""))}else{if(e.indexOf("%")>-1){e=d.obj.width()}}}d.obj.find("input").css({height:d.opt.height-4,width:e-12});if(d.opt.arrow){d.obj.find("input:first").css({paddingRight:22,width:e-33})}},initStyleDict:function(){var d=this;d.obj.css({width:"100%",height:d.opt.height});var e=d.opt.width;if(typeof(d.opt.width)=="string"&&d.opt.width.indexOf("%")>-1){e=d.obj.width()}d.obj.find("input").css({height:d.opt.height-4,width:e-12});if(d.opt.arrow){d.obj.find("input").css({paddingRight:22,width:e})}},disable:function(){this.opt.disable=true;this.obj.addClass("awsui-combobox-disable");this.obj.find("input[type=text]").attr("disabled","disabled")},enable:function(){this.opt.disable=false;this.obj.removeClass("awsui-combobox-disable");this.obj.find("input[type=text]").attr("disabled",false);this.bind()},bind:function(f){var g=this,e=g.obj.find("input[type=text]");if(g.opt.arrow){var d="span.aws-combobox-icons.down";if(g.opt.editable==false){d="span.aws-combobox-icons.down, input[type=text]"}g.obj.find(d).off("click").on("click",function(){if(g.opt.disable){return}if(c("ul[id='awsui-combobox-list']").is(":visible")){g.removeMenu()}else{g.createMenu();if(e.val()!=""){g.setMenuSelect(e.val())}e.focus()}})}if(g.opt.autoComplete||g.opt.liveSearch){this.obj.find("input[type=text]").off("keyup.ap").on("keyup.ap",function(n){g.obj.data("oldVal",g.obj.find("input:last").val());var i=c(this).val();if(n.keyCode!=13&&n.keyCode!=40&&n.keyCode!=38){var h="";var t=g.obj.find("input:first").val();var s="";if(t.indexOf(" ")>-1){s=t.substring(t.lastIndexOf(" ")+1,t.length)}else{s=t}h=c.trim(s);if(g.opt.liveSearch){i=h}if(h.length>0){if(g.opt&&g.opt.async!=null){g.opt.async.params.query=h}}g.removeMenu(true);var j=i;if(g.opt.multiple&&g.opt.editable){var o=c(this).getSelectionStart();g.selIndx=o;j=g.getPositionValue(i,o)}var k=g.getDataTimeOut!=null?300:1;clearTimeout(g.getDataTimeOut);g.getDataTimeOut=setTimeout(function(){g.createMenu(j);if(e.val()!=""){var q=e.length==2?e.eq(1).val():e.eq(0).val();g.setMenuSelect(q)}},k);if(e.val()!=""){g.saveToSelectVal()}if(g.opt.filter==false){g.obj.find("input:last").val(i);if(i==""){g.selectVal=[]}else{g.selectVal=g.changeValue(i.split(g.opt.seperator))}c(g.obj).data("selectVal",g.selectVal)}else{g.selectVal=g.filterValue(i);c(g.obj).data("selectVal",g.selectVal)}}else{if(n.keyCode==13){var p=g.obj.find("li.ac");p.trigger("mouseup.combo")}}if(n.keyCode==38){var p=g.obj.find("li.ac"),m=g.obj.find("ul");var l=m.scrollTop();if(p.length){p.prev().addClass("ac").siblings().removeClass("ac");m.scrollTop(l-p.outerHeight())}else{m.find("li:last").addClass("ac")}n.preventDefault()}else{if(n.keyCode==40){var m=g.obj.find("ul"),p=m.find("li.ac");var l=m.scrollTop();if(p.length>0){p.next("li").addClass("ac").siblings("li").removeClass("ac");m.scrollTop(l+p.outerHeight())}else{m.find("li:first").addClass("ac")}n.preventDefault()}}});if(g.opt.multiple&&g.opt.editable){this.obj.find("input[type=text]").off("click.ap").on("click.ap",function(h){g.selIndx=c(this).getSelectionStart();var i=c(this).val();if(g.selIndx==0){var j=i.split(g.opt.seperator);if(j[0]!=""&&g.dataSourceX[j[0]]!=null){g.selIndx=null}}else{if(g.selIndx==i.length){g.selIndx=null}}c(g.obj).data("selectVal",g.selectVal)});this.obj.find("input[type=text]").off("blur.ap").on("blur.ap",function(i){var j=c(this).val();if(j!=""){var h=g.removeRepeat(j);c(this).val(h.join(g.opt.seperator));g.selectVal=g.changeValue(h);c(g.obj).data("selectVal",g.selectVal)}});this.obj.find("input[type=text]").off("keypress.ap").on("keypress.ap",function(m){if(String.fromCharCode(m.keyCode)!=g.opt.seperator){var o=c(this).val();var h=c(this).getSelectionStart();var n=g.getPositionValue(o,h);for(var j=0;j<g.selectVal.length;j++){var l=g.dataSourceX[n];if((g.selectVal[j]==n||g.selectVal[j]==l)&&j!=g.selectVal.length-1){var k=new RegExp(n+"$");c(this).val(o.replace(k,""));return false}}}})}}if(g.obj.find("li").length>0){if(g.opt.multiple){g.obj.find("li").off("mouseup.combo").on("mouseup.combo",function(o){if(c(g.obj).data("selectVal")!=undefined){g.selectVal=c(g.obj).data("selectVal")}g.obj.data("oldTxt",g.obj.find("input:first").val());var n=c(this);var p=n.attr("val");if(n.find("span.check").hasClass("ac")){n.find("span.check").removeClass("ac");for(var h in g.selectVal){if(g.selectVal[h]==p){g.selectVal.splice(h,1);break}}g.selIndx=null}else{n.find("span.check").addClass("ac");var m=g.obj.find("input[type=text]").val();if(g.opt.multiple&&g.opt.editable&&g.selIndx!=null){if(f==1){var k=g.getPositionIndx(m,g.selIndx);k++;if(k<g.selectVal.length){g.selectVal.splice(k,0,p)}else{g.selectVal.push(p)}var j=new RegExp(g.opt.seperator+"$");var l=j.test(g.obj.find("input").eq(0).val())?1:0;g.selIndx+=(n.text().length+l)}else{g.setPositionValue(m,g.selIndx,p);g.selIndx=null}}else{g.selectVal.push(p)}}g.setValue(true)})}else{g.obj.find("li").off("mouseup.combo").on("mouseup.combo",function(h){g.obj.data("oldTxt",g.obj.find("input:first").val());g.selectVal=[];var i=c(this).attr("val");g.selectVal.push(i);g.setValue(true);g.removeMenu()})}c(document).off("mousedown.combo").on("mousedown.combo",function(i){i.stopPropagation();var h=c(i.target);if(h.hasClass("aws-combobox-icons")||(h.attr("id")&&h.attr("id").indexOf("_awsui_combobox_display")>-1)){if(!c(h).parent().attr("createmenu")){g.removeMenu()}return}g.removeMenu();h.focus()});c(document).off("mousedown.combo",".awsui-combobox li,ul").on("mousedown.combo",".awsui-combobox li,ul",function(h){h.stopPropagation()});c(".awsui-combobox ul").bind("mousewheel DOMMouseScroll",function(h){if(h.deltaY<0&&c(this).context.scrollHeight-c(this).scrollTop()-c(this).height()==0){return false}else{if(h.deltaY>0&&c(this).scrollTop()==0){return false}else{h.stopPropagation()}}})}}};c.fn.setComboboxVal=function(e){var g=c(this);g.removeAttr("displayvalue");var f=g.data("comboboxObj");e=e.replace(/,/g,f.opt.seperator);if(f!=null){f.opt.selectVal=e;if(f.opt.async&&!f.opt.data){f.obj.find("span").click();f.obj.find("span").next().remove()}g.combobox(f.opt);g.blur();if(f.opt.select){var d={};d.value=e;f.opt.select(null,d)}}};c.fn.combobox=function(e,g){if(arguments!=null&&typeof arguments[0]=="string"){if(arguments.length==2){return c(this).parent().find("input:last").val()}else{if(arguments.length==3){return c(this).parent().find("input:last").val(arguments[2])}}}var f=c.extend({height:25,autoComplete:true,liveSearch:false,menuMaxHeight:200,autoHeight:false,arrow:true,multiple:false,editable:true,seperator:",",selectVal:"",disable:false,filter:false},e||{});if(e.source&&typeof f.source=="object"&&!f.data){f.data=e.source}if(e.source&&typeof f.source=="string"){f.async={url:e.source,params:{}}}if(e.trigger!=undefined){f.arrow=e.trigger}if(e.listHeight){f.menuMaxHeight=e.listHeight;f.autoHeight=false}if(e.value&&!f.selectVal){f.selectVal=e.value}if(e.disabled!=undefined){f.disable=e.disabled}var i=c(this);var d;var h=i.data("comboboxObj");if(c(i).parent().hasClass("awsui-combobox")&&h!=null){h.obj=i;d=h;d.opt=f;c(i).parent().data("selectVal",[])}else{d=new a(f,i);i.data("comboboxObj",d)}d.init();return d}})(jQuery);
/*!
 * jQuery verson 1.10.2
 * AWS Accordion 插件
 * author zhangy
 * 2013年8月23日18:25:02
 */
(function($){$.fn.accordion=function(options){var defaults={event:"click",style:"rows",active:0,animate:true,animateTime:250,showIcon:true,multiple:false};var temp=$(this);var opt=$.extend(defaults,options);if(opt.multiple){opt.autoHeight=true}reInitHeight();temp.addClass("ui-accordion");temp.find("[child-list]").addClass("ui-accordion-items");if(opt.addClass==null){temp.find("[tit]").addClass("ui-accordion-title");if(opt.showIcon){temp.find("[tit]").append("<span class='ui-accordion-icons arrow-down'></span>")}temp.find("[tit]").next().addClass("ui-accordion-content")}else{temp.find("[tit]").addClass(opt.addClass);temp.find("[tit]").next().addClass(opt.contentClass)}opt.current=$(temp.find("[tit]")[opt.active]);temp.find("[tit]").on("click",function(){var b=true;if(opt.onExpand!=null){var node=opt.current;b=opt.onExpand(node)}if(!b){return}if(opt.multiple){var open=$("span",this).hasClass("arrow-up");if(open){$(this).next().hide();$(this).removeClass("current");$(this).find(".ui-accordion-icons").removeClass("arrow-up").addClass("arrow-down")}else{$(this).next().show();$(this).addClass("current");$(this).find(".ui-accordion-icons").removeClass("arrow-down").addClass("arrow-up")}}else{if(opt.current[0]==$(this)[0]){var open=$(this).find(".arrow-up").length;if(open){$(this).next().hide();$(this).find(".ui-accordion-icons").removeClass("arrow-up").addClass("arrow-down");return}}opt.current=$(this);if(opt.current.next().is(":hidden")){initHeight()}}});if(opt.current!=null){opt.current.click()}$(window).on("resize.accordion",function(){initHeight()});function reInitHeight(){if(opt.autoHeight===true){return}var height=temp.parent().height();var other_height=0;for(var i=0;i<temp.siblings().length;i++){var o=temp.siblings()[i];other_height+=$(o).outerHeight()}temp.css({height:height-other_height})}function initHeight(){reInitHeight();var accordionDiv=opt.current.parent().parent();var expandEvent=eval(accordionDiv.attr("onexpand"));if(expandEvent==undefined){expandEvent=function(){}}opt.current.addClass("current").siblings(".current").removeClass("current");if(opt.showIcon){temp.find(".ui-accordion-icons").removeClass("arrow-up").addClass("arrow-down");opt.current.find(".ui-accordion-icons").removeClass("arrow-down").addClass("arrow-up")}var tit_height=opt.current.outerHeight();var size=temp.find("[tit]").length;if(opt.autoHeight==true){if(opt.animate){opt.current.next().siblings(".ui-accordion-content").stop().animate({},opt.animateTime,function(){$(this).hide()});opt.current.next().show().stop().animate({},opt.animateTime,undefined,function(){expandEvent(opt.current.next())})}else{opt.current.next().css({}).show().siblings(".ui-accordion-content").hide()}}else{if(opt.animate){opt.current.next().siblings(".ui-accordion-content").stop().animate({height:"0px"},opt.animateTime,function(){$(this).hide()});opt.current.next().show().stop().animate({height:temp.height()-tit_height*size-1},opt.animateTime,undefined,function(){expandEvent(opt.current.next())})}else{opt.current.next().css({height:temp.height()-tit_height*size-1}).show().siblings(".ui-accordion-content").hide()}}}}})(jQuery);
/*!
 * jQuery verson 1.10.2
 * AWS Layout 插件
 * author zhangy
 */
(function(a){a.fn.layout=function(C){var z=a(this);if(typeof C=="string"&&C=="destroy"){z.children().html("");return}else{if(typeof C=="string"&&C=="resize"){a(window).trigger("resize.layout");return}}var k={};var e=a.extend(k,C);z.addClass("awsui-layout");var p=0,t,D=0,A=0,E=0,v=0,d=0;var h=e.head;if(h!=null&&h.target!=null){var l={};h=a.extend(l,h)}var i=e.bottom;if(i!=null&&i.target!=null){var j={show:true};i=a.extend(j,i)}var x=e.separater;if(x!=null&&x.target!=null){var w={width:6};x=a.extend(w,x);a(x.target).css({width:x.width});if(x.width==0){a(x.target).css({borderRight:0})}}var B=e.right;if(B!=null&&B.target!=null){var c={};B=a.extend(c,B)}var g=e.left;if(g!=null&&g.target!=null){var s={closable:true,showCloseIcon:true,dragable:false};g=a.extend(s,g)}o();a(window).off("resize.layout").on("resize.layout",function(){o()});m();if(x!=null&&x.target!=null){if(!g.dragable){return}else{a(x.target).on("mouseenter",function(){a(this).css({cursor:"col-resize"})})}var u=null;var q=null;var y;a(x.target).on("mousedown.sep",function(G){var F=a(this);n(F)})}function n(F){if(u!=null){u.remove()}if(q!=null){q.remove()}a(document).on("selectstart",function(){return false});y=a(x.target).offset().left;u=a(x.target).clone(true).addClass("sep-moveObj").appendTo("body");q=a("<div></div>").addClass("sep-moveMask").appendTo("body");a(document).on("mousemove.sep",function(H){var G=Math.abs(y-H.pageX);u.css({left:H.pageX})});a(document).on("mouseup.sep",function(G){a(document).off("mousemove.sep");a(document).off("mouseup.sep");if(u!=null){E=v=G.pageX;a(g.target).animate({width:G.pageX},100,function(){a(window).trigger("resize.layout");if(g.afterDrag!=null){g.afterDrag(E)}})}u.remove();q.remove()})}function m(){if(g!=null){if(!g.closable){if(g.title==null){return}var F=g.nogradient?"nogradient":"";var G="<div class='awsui-layout-left-title "+F+"'>"+g.title+"</div>";a(g.target).prepend(G);return}var F=g.nogradient?"nogradient":"";var G="<div class='awsui-layout-left-title "+F+"'>"+g.title+"<span class='awsui-layout-left-op'><span class='awsui-layout-icon arrow-left'></span><span class='awsui-layout-icon arrow-right'></span></span></div>";a(g.target).prepend(G);if(!g.showCloseIcon){a(g.target).find(".awsui-layout-left-op").remove()}else{a(g.target).find(".awsui-layout-icon.arrow-left").off().on("click",function(){var H=a(this);a(g.target).animate({width:"0px"},100,function(){a(g.target).hide();a(g.target).find(".awsui-layout-icon.arrow-right").appendTo(a(x.target)).show()});a(x.target).animate({left:0+"px"},100);a(x.target).css({width:"32px"});a(B.target).animate({left:34+"px",width:t-34+"px"},100,function(){a(x.target).off("mousedown.sep");a(window).trigger("resize")})});if(g.open==false){a(g.target).find(".awsui-layout-icon.arrow-left").trigger("click")}if(g.dragable){a(g.target).find(".awsui-layout-icon.arrow-right").on("mousedown.sep",function(H){H.stopPropagation();return false})}a(g.target).find(".awsui-layout-icon.arrow-right").off().on("click",function(I){var H=a(this);a(g.target).animate({width:E},100,function(){a(g.target).show();a(x.target).find(".awsui-layout-icon.arrow-right").appendTo(a(g.target));a(g.target).find(".awsui-layout-icon.arrow-right").hide()});a(x.target).animate({left:E+"px",width:x.width},100);a(B.target).animate({left:E+x.width+"px",width:(t-E-x.wdith)+"px"},100,function(){a(x.target).on("mousedown.sep",function(K){var J=a(this);n(J)});a(window).trigger("resize")})})}}else{if(g!=null){a(g.target).css("border-right","1px solid #ccc")}}}function o(){p=z.height();t=z.width();if(h!=null){f("head",h)}if(i!=null){f("bottom",i)}if(g!=null){f("left",g)}if(x!=null){f("separater",x)}if(B!=null){f("right",B)}}function f(G,F){if(F.css){a(F.target).addClass(F.css)}else{a(F.target).addClass("awsui-layout-"+G)}if(G=="head"){if(F.show==false){if(a(h.target)!=null){a(h.target).hide()}D=0}else{if(F.height){a(F.target).css({height:F.height})}a(h.target).show();D=a(F.target).outerHeight()}}else{if(G=="bottom"){if(F.show==false){a(i.target).hide();A=0}else{if(F.height){a(F.target).css({height:F.height,"line-height":F.height})}a(i.target).show();A=a(F.target).outerHeight();if(a(i.target).parent().parent("div").length!=0){a(i.target).css("position","absolute")}}}else{if(G=="left"){if(E==0){E=v=a(F.target).outerWidth()}else{v=a(F.target).outerWidth()}}else{if(G=="separater"){if(F.show==false){a(F.target).css("width",0)}d=a(F.target).outerWidth();a(F.target).css({left:v,height:p-D-A,top:D,width:d-2})}else{if(G=="right"){a(F.target).css({width:t-v-d,left:v+d})}}}}}if(G=="left"||G=="right"){a(F.target).css({height:p-D-A,top:D})}}}})(jQuery);
/*!
 * jQuery verson 1.10.2
 * AWS Tree 插件
 * Author : zhangy
 * Date : 2013-8-26
 */
awsui.tree={init:function(obj,options){var tree={setting:{showLine:true,showIcon:true,single:false,checkbox:false,checkInherit:true,rememberNode:false,showTitle:false,showTitleOptions:{},animate:false,animateTime:150,dblClickToExpand:true,sort:false,autoHeight:false,checkChildrens:true,dataModel:{url:"",method:"GET",dataType:"json",params:{},data:null},event:{},contextMenu:null},config:{data:{},nodes:{},treeObj:{},levelCount:1},getData:function(dataModel,nodeId){if(nodeId!=null){tree.config.treeObj.find("#tree_icon_"+nodeId).addClass("root-file-loading")}var result;$.ajax({url:dataModel.url,type:dataModel.method,async:false,cache:false,data:dataModel.params,dataType:dataModel.dataType,success:function(jsonData){result=jsonData;if(typeof jsonData=="string"){if(jsonData.indexOf(":RO;")>-1&&jsonData.indexOf("errorCode")>-1&&jsonData.indexOf('"result":"error"')>-1){r=awsui.decode(jsonData);var msg=r.msg;if(r.data&&r.data.desc){msg+="\n"+r.data.desc}$.simpleAlert(msg+r.data.desc,r.result);result=null}else{result=eval(jsonData)}}return result},error:function(){result=null;return result},complete:function(){if(nodeId!=null){tree.config.treeObj.find(".root-file-loading").removeClass("root-file-loading")}}});return result},buildChilren:function(data,treeNode,type,callback){var parentNode=tree.config.treeObj.find("#tree_li_"+treeNode.id);var ul=parentNode.find("#tree_ul_"+treeNode.id);if(ul!=null&&ul.html()!=null&&type!="reload"){return}if(type!=null&&type=="reload"){ul.html("")}for(var i=0&&data!=null;i<data.length;i++){tree.addNode(data[i],parentNode,callback);tree.initIcon(data[i])}tree.initEvent(callback);tree.initStyles()},initEvent:function(callback){if(callback!=null){callback()}if(tree.setting.showTitle){var tooltipOptions={bordercolor:"#000",color:"#fff",bgcolor:"#333"};tree.setting.showTitleOptions=$.extend(tooltipOptions,tree.setting.showTitleOptions);$.each(tree.config.nodes,function(i,obj){if(obj.title!=null){$("#tree_span_"+i).on("mouseenter",function(){tree.setting.showTitleOptions.text=obj.title;$(this).quicktip(tooltipOptions)}).on("mouseleave",function(){$(this).quicktip("close")})}})}if(tree.setting.checkbox){tree.bindCheckBoxEvent()}$(".tree-items").click(function(){tree.changeClass($(this))});tree.rootIconClick();if(tree.setting.event!=null&&tree.setting.event.onClick!=null){tree.onClick(tree.setting.event.onClick)}if(tree.setting.sort&&tree.setting.event.beforeDrag!=null){tree.onMouseDown(null,"sort")}if(tree.setting.contextMenu!=null){tree.onMouseDownRight()}if(tree.setting.event!=null&&tree.setting.event.onDblClick){tree.onDblClick()}},createNode:function(node){var nodeHtml=$("<li li_index='"+node.id+"' id='tree_li_"+node.id+"'></li>");var title;var cls=node.cls!=null?node.cls:"";var disabled=node.disabled?"disable":"";if(node.dropable==false){cls+=" nodrop"}var canSort="";if(tree.setting.sort){canSort="<div sep-index='"+node.id+"' class='tree-items-sep'></div>"}if(node.open!=null){var icon=node.open==true?"root-open":"root-close";title=$("<a parent class='tree-items'></a>").appendTo(nodeHtml);var node_title=(node.title&&tree.setting.showTitle)?node.title:"";var html="<span nodestate id='tree_switch_"+node.id+"' class='"+icon+"'></span>"+tree.bindCheckBox("file",node)+"<span id='tree_icon_"+node.id+"' nodeIcon class='root-file'></span><span class='tree-items-title "+disabled+" "+cls+"'  tit awsui-qtip='"+node_title+"' id='tree_span_"+node.id+"'>"+node.name+"</span>"+canSort;title.append(html)}else{title=$("<a class='tree-items'></a>").appendTo(nodeHtml);var node_title=(node.title&&tree.setting.showTitle)?node.title:"";var html="<span class='line-items'></span>"+tree.bindCheckBox("doc",node)+"<span id='tree_icon_"+node.id+"' nodeIcon class='root-doc'></span><span class='tree-items-title "+disabled+" "+cls+"' tit awsui-qtip='"+node_title+"' id='tree_span_"+node.id+"'>"+node.name+"</span>"+canSort;title.append(html)}title.attr("tbindex",node.id);return nodeHtml.append(title)},createRootNode:function(node){var icon=node.open==null?"tree-indent":(node.open==true?"root-open":"root-close");var cls=node.cls!=null?node.cls:"";if(node.dropable==false){cls+=" nodrop"}var node_title=node.title?node.title:"";var li=$("<li main level='0' li_index="+node.id+" id='tree_li_"+node.id+"'><a tbindex='"+node.id+"' parent class='tree-items'><span nodestate id='tree_switch_"+node.id+"' class='"+icon+"'></span>"+tree.bindCheckBox("root",node)+"<span id='tree_icon_"+node.id+"' class='root-file'></span><span class='tree-items-title "+cls+"' tit awsui-qtip='"+node_title+"' id='tree_span_"+node.id+"'>"+node.name+"</span></a></li>");return li},initIcon:function(node){var treeNode=tree.config.treeObj.find("#tree_icon_"+node.id);var prev=treeNode.prev();var isOpen=false;if(prev.hasClass("root-open")){isOpen=true}if(node.icon!=null){treeNode.css({background:"url("+node.icon+") no-repeat"})}else{if(node.iconOpen!=null&&(isOpen||node.open)){treeNode.css({background:"url("+node.iconOpen+") no-repeat"})}else{if(node.iconClose!=null&&(!isOpen||!node.open)){treeNode.css({background:"url("+node.iconClose+") no-repeat"})}else{if(node.iconCls!=null){treeNode.addClass(node.iconCls)}}}}},initStyles:function(){if(!tree.setting.showIcon){tree.config.treeObj.find(".root-file").hide();tree.config.treeObj.find(".root-doc").hide()}if(!tree.setting.showLine){tree.config.treeObj.find(".tree-indent").removeClass("line");tree.config.treeObj.find("[nodestate]").addClass("none");tree.config.treeObj.find(".line-items").addClass("none")}else{function changeStyle(i){var nodes=tree.config.treeObj.find("li[level="+i+"]");var pid="-100";for(var j=0;j<nodes.length;j++){var temp=$(nodes[j]);var id=temp.attr("li_index");if(j==(nodes.length-1)){doChange(temp)}var parentNode=tree.config.nodes[id];if(parentNode.pid!=null&&parentNode.pid!=pid){var newTemp=$(nodes[j-1]);doChange(newTemp)}pid=parentNode.pid}}function doChange(temp){temp.find("[nodestate]:first").addClass("end");temp.find("span[level="+i+"]").removeClass("line");temp.children("ul").find("li:last > a:first > .line-items").addClass("end")}tree.config.treeObj.find("ul[tit]").each(function(){var temp=$(this);var last=temp.children(":last");temp.find("li:last > a:first > .line-items").addClass("end")});for(var i=0;i<tree.config.levelCount;i++){changeStyle(i)}var nodeFirst=tree.config.treeObj.find("li[level=0]");if(nodeFirst.length>1){tree.config.treeObj.find("[nodestate]:first").addClass("start")}else{tree.config.treeObj.find("[nodestate]:first").addClass("first")}}},resizeTree:function(){if(tree.setting.autoHeight!=null&&tree.setting.autoHeight==true){return}var height=tree.config.treeObj.parent().height();var otherHeight=0;tree.config.treeObj.siblings(":visible").each(function(){otherHeight+=$(this).outerHeight()});tree.config.treeObj.css({height:height-otherHeight})},addNode:function(newNode,parentNodeDom,callback){var parent=tree.config.treeObj.find("#tree_ul_"+newNode.pid);if(parent.length){var index=parent.parent().attr("level");tree.config.nodes[newNode.id+""]=newNode;tree.createNode(newNode).appendTo(parent);tree.getIndent(newNode.id,(parseInt(index)+1));if(callback!=null){callback()}}else{var style="";var index=parentNodeDom.attr("li_index");if(parentNodeDom.find("a[tbindex="+index+"]").find(".root-doc").length){tree.changeToFolder(index);tree.config.nodes[index].open=true}var pNode=tree.config.nodes[index];if(pNode!=null){if(pNode.open!=null&&pNode.open==false){style="style='display:none'"}parent=$("<ul tit id='tree_ul_"+newNode.pid+"' "+style+"></ul>").appendTo(parentNodeDom);tree.addNode(newNode,parentNodeDom,callback)}}},addNodeByTarget:function(newNode,targetNodeId,position,callback){var target=tree.getNodeLiDomById(targetNodeId);var pid=target.parent().prev("a").attr("tbindex");var targetIndex=tree.getIndex(targetNodeId);var li=tree.createNode(newNode);if(position=="before"){target.before(li)}else{target.after(li)}tree.getIndent(newNode.id,targetIndex);if(callback!=null){callback()}},buildTree:function(data,callback){tree.setting.line=tree.setting.showLine==true?"line":"";tree.setting.isOpen=false;for(var i=0;i<data.length;i++){var id=data[i].id;var pid=data[i].pid;var isOpen=data[i].open;var parent=tree.config.treeObj.find("#tree_li_"+pid);tree.config.nodes[id+""]=data[i];if(!parent.length&&pid==null){tree.createRootNode(data[i]).appendTo(tree.config.treeObj)}else{tree.addNode(data[i],parent,callback)}}this.initEvent(callback);if(tree.setting.event.afterLoad!=null){tree.setting.event.afterLoad(tree)}this.initStyles();if(this.setting.rememberNode){var nodeId=$.cookie("tree_node");if(nodeId!=""&&nodeId!=null){var nodeDom=this.getNodeDomById(nodeId);this.expandNodes(nodeDom,true,false,true)}}for(var i=0;i<data.length;i++){tree.initIcon(data[i])}},refreshDataFromNodes:function(){var data=[];$.each(tree.config.nodes,function(i,node){data.push(node)});tree.config.data=data},refresh:function(dataModel){tree.config.treeObj.html("");if(dataModel.data!=null){var data_=tree.config.data;if(dataModel.data!=null){data_=dataModel.data}tree.buildTree(data_)}else{if(dataModel.url!=null){var data=tree.getData(dataModel);var dataModel={};dataModel.data=data;this.refresh(dataModel)}}},refreshNode:function(params){if(params.data!=null){var node=tree.config.nodes[params.id];var nodeLi=tree.getNodeLiDomById(params.id);nodeLi.children("ul").find("li").remove();for(var i=0;i<params.data.length;i++){var node=params.data[i];tree.addNode(node,nodeLi);tree.initIcon(node)}tree.initEvent();tree.initStyles()}else{if(params.dataModel!=null){var data=tree.getData(params.dataModel);var newParams={};newParams.data=data;newParams.id=params.id;tree.refreshNode(newParams)}else{if(params.id!=null){var nodes=tree.getChildrenByPid(params.id);var newData=[];$.each(nodes,function(i,value){newData.push(value)});tree.refreshNode({data:newData,id:params.id})}}}},refreshNodeById:function(n,obj){var node=this.getNodeById(n.id);node=$.extend(node,n);var nodeDom=obj;if(obj==null){nodeDom=this.getNodeDomById(n.id)}nodeDom.find(".tree-items-title:first").text(node.name);this.config.nodes[n.id+""]=node},getIndent:function(id,index){var treeItemsLi=tree.config.treeObj.find("#tree_li_"+id);treeItemsLi.attr("level",index);if(index>tree.config.levelCount){tree.config.levelCount=index}var treeItems=treeItemsLi.find("a:first");var htmls="";for(var j=0;j<index;j++){htmls+="<span level="+j+" class='tree-indent line'></span>"}treeItems.prepend(htmls)},setIndent:function(id,dom){var li=tree.getNodeLiDomById(id);var index=li.attr("level");var sourceIndex=dom.attr("level");var changed=index-sourceIndex;var html="";if(changed>0){for(var i=0;i<changed+1;i++){html+="<span class='tree-indent line'></span>"}dom.find(".tree-items").prepend(html)}else{if(changed==0){dom.find(".tree-items").find(".tree-indent:last").after("<span class='tree-indent line'></span>")}else{for(var i=0;i<changed*(-1)-1;i++){dom.find(".tree-items").find(".tree-indent:first").remove()}}}dom.find(".tree-items").each(function(){var i=(parseInt(index)+1);$(this).parent().attr("level",i);if(i>tree.config.levelCount){tree.config.levelCount=i}})},getParentIndex:function(id){var curr_index=tree.config.treeObj.find("#tree_li_"+id).parent().prev().attr("level");return curr_index},getIndex:function(id){var curr_index=tree.config.treeObj.find("#tree_li_"+id).attr("level");return curr_index},exsitsChildren:function(id){var chilren=this.getNodeIdsByPid(id);if(chilren.length>=1){return true}else{return false}},existsChildren:function(id){var item=tree.config.treeObj.find(".tree-items[tbindex='"+id+"']");if(item.next("ul")==null||item.next("ul").html()==null||item.next("ul").html()==""){return false}else{return true}},bindCheckBox:function(type,obj){var html="";if(tree.setting.checkbox&&obj.nocheck!=true){var node=tree.config.nodes[obj.id];var disabled="";if(obj.disabled){disabled="disabled='disabled'"}if(tree.config.treeObj.find("#ckb_"+node.pid).is(":checked")||node.checked){if(tree.setting.checkInherit){if(!tree.setting.checkChildrens&&!node.checked){html="<input value='"+obj.id+"' "+type+" type='checkbox'  "+disabled+" id='ckb_"+obj.id+"' />"}else{html="<input value='"+obj.id+"' "+type+" type='checkbox' checked='checked' "+disabled+" id='ckb_"+obj.id+"' />"}}else{html="<input value='"+obj.id+"' "+type+" type='checkbox' "+disabled+" id='ckb_"+obj.id+"' />"}}else{html="<input value='"+obj.id+"' "+type+" type='checkbox'"+disabled+" id='ckb_"+obj.id+"' />"}}return html},toggleNodeUI:function(obj,hide){var node_item=tree.config.treeObj.find("#tree_li_"+(obj.id||obj));hide=hide||node_item.is(":visible");node_item[hide?"hide":"show"]()},toggleCheck:function(obj,check){var ck=tree.config.treeObj.find("#tree_li_"+(obj.id||obj)).find("input[type=checkbox]");check=check||!ck.is(":checked");ck.prop("checked",check)},isChecked:function(obj){return tree.config.treeObj.find("#tree_li_"+(obj.id||obj)).find("input[type=checkbox]").prop("checked")},bindCheckBoxEvent:function(){tree.config.treeObj.find("input[type=checkbox]").off("click.check").on("click.check",function(event){var ck=$(this);var nodeObj=tree.getNodeById(ck.attr("value"));if(tree.setting.event.onCheck!=null){tree.setting.event.onCheck(ck,nodeObj)}if(tree.setting.event.checkChange!=null&&tree.setting.event.checkChange(nodeObj,ck.is(":checked"))===false){event.stopPropagation();return}if(ck.attr("doc")==null){if(tree.setting.checkInherit){ck.parent().next().find("input[type=checkbox]").each(function(){var ckd=ck.is(":checked");if(this.checked!=ckd){this.checked=ckd;if(tree.setting.event.onCheck!=null){var nodeObj=tree.getNodeById($(this).attr("value"));tree.setting.event.onCheck(this,nodeObj)}}})}}else{var type=ck.is(":checked");var checked=ck.parent().parent().siblings().find("input[type=checkbox]:checked");if(checked.length>0){event.stopPropagation();return}checkParent(ck.attr("value"),type)}function checkParent(id,type){var node=tree.getParentNodeById(id);if(node==null){return}if(!tree.setting.checkInherit){return}tree.config.treeObj.find("#ckb_"+node.id).prop("checked",type);if(node.pid!=0){checkParent(node.id,type)}}event.stopPropagation()})},checkBoxEvent:function(ck,event){},setCheckNodes:function(nodeIdsArr,bool){$.each(nodeIdsArr,function(i,v){tree.config.treeObj.find("#ckb_"+v).prop("checked",true);var obj=tree.config.treeObj.find(".tree-items[tbindex='"+v+"']");if(bool){tree.expandNodes(obj,true)}})},getCheckedNodes:function(){var nodes=[];tree.config.treeObj.find("input[type=checkbox]:checked").each(function(){var id=$(this).attr("value");var node=tree.getNodeById(id);nodes.push(node)});return nodes},getUnique:function(arr){var data=[];var obj={};for(var i=0;i<arr.length;i++){obj[arr[i]]=arr[i]}for(key in obj){if(obj.hasOwnProperty(key)){data.push(key)}}return data},getSelectedNode:function(){var obj=tree.config.treeObj.find(".tree-items.current");var tbindex=obj.attr("tbindex");if(tbindex!=null){return tree.config.nodes[tbindex]}},getNodeById:function(id){return tree.config.nodes[id]},getNodeDomById:function(id){return tree.config.treeObj.find(".tree-items[tbindex='"+id+"']")},getNodeLiDomById:function(id){return tree.config.treeObj.find("#tree_li_"+id)},getNodeLevel:function(id){var li=tree.getNodeLiDomById(id);if(li!=null){return li.attr("level")}else{return"0"}},removeNodeLiById:function(id){tree.config.treeObj.find("#tree_li_"+id).remove()},getParentNodeById:function(id){var node=tree.getNodeById(id);if(node==null){return null}return tree.getNodeById(node.pid)},getRootNode:function(){var root=[];$.each(tree.config.nodes,function(i,value){if(value.pid==null){root.push(value)}});return root},isChildren:function(sourceNodeDom,targetNodeDom){var b=false;var pid=targetNodeDom.attr("tbindex")?targetNodeDom.attr("tbindex"):targetNodeDom.attr("id").substring(8);var sourceId=sourceNodeDom.attr("tbindex");var children=tree.getNodeIdsByPid(pid);for(var i=0;i<children.length;i++){if(sourceId==children[i]){b=true;break}}return b},isLeafNode:function(targetNodeDom,sourceNodeDom){var sourceId=targetNodeDom.attr("tbindex")?targetNodeDom.attr("tbindex"):targetNodeDom.attr("id").substring(8);var pid=sourceNodeDom.attr("tbindex");var pids=[];tree.getParentIdsById(sourceId,pids);for(var i=0;i<pids.length;i++){if(pid==pids[i]){return true}}return false},getNodeIdsByPid:function(id){var data=[];$.each(tree.config.nodes,function(i,value){if(value.pid==id){data.push(value.id)}});return data},getParentIdsById:function(id,pids){var node=tree.getNodeById(id);if(node!=undefined&&node.pid!=null){pids.push(node.pid);tree.getParentIdsById(node.pid,pids)}},getChildrenByPid:function(id){var data=[];function getChildren(id){var newData=[];$.each(tree.config.nodes,function(i,value){if(value.pid==id){newData.push(value);if(value.open!=null){var nodes=getChildren(value.id);$.each(nodes,function(j,v){newData.push(v)})}}});return newData}data=getChildren(id);return data},getNodesByPid:function(id,data,containParent){data=data||[];containParent=containParent!=null?containParent:true;var dataSource=tree.config.data;for(var i=0;i<dataSource.length;i++){var node=dataSource[i];if(node.pid==id){if(!containParent){if(node.open==null){data.push(node)}}else{data.push(node)}tree.getNodesByPid(node.id,data,containParent)}}return data},clickToExpand:function(){tree.config.treeObj.find(".tree-items[parent]").off("click.expand").on("click.expand",function(){var obj=$(this);tree.expandNode(obj)})},dblClickToExpand:function(){tree.config.treeObj.find(".tree-items[parent]").off("dblclick.expand").on("dblclick.expand",function(){var obj=$(this);if(tree.setting.event.dblClick!=null){tree.setting.event.dblClick()}tree.expandNode(obj)})},rootIconClick:function(){tree.config.treeObj.find(".tree-items[parent]").find("span[nodestate]").off("mouseup.expand").on("mouseup.expand",function(e){if(e.which==3){return}var obj=$(this).parent();tree.expandNode(obj)});if(tree.setting.dblClickToExpand){tree.config.treeObj.find(".tree-items[parent]").find("span[nodestate]").off("dblclick.expand").on("dblclick.expand",function(e){e.stopPropagation()});tree.dblClickToExpand()}else{tree.config.treeObj.find(".tree-items[parent]").find("span[nodestate]").off("click.expand").on("click.expand",function(e){e.stopPropagation()});tree.clickToExpand()}},showOrHide:function(isParent,obj,keepOpen){if(isParent!=null){var id=obj.parent().attr("li_index");if(obj.next().css("display")=="none"||obj.next().css("display")==null){if(tree.setting.animate){obj.next().slideDown(tree.setting.animateTime)}else{obj.next().show()}tree.changeIcon(id,"open");if(this.setting.rememberNode){$.cookie("tree_node",id,{expires:30})}if(tree.setting.event!=null&&tree.setting.event.afterExpand!=null){tree.setting.event.afterExpand(tree)}}else{if(keepOpen&&keepOpen!=null){if(tree.setting.animate){obj.next().slideDown(tree.setting.animateTime)}else{obj.next().show()}return;tree.changeIcon(id,"open");if(this.setting.rememberNode){$.cookie("tree_node",id,{expires:30})}if(tree.setting.event!=null&&tree.setting.event.afterExpand!=null){tree.setting.event.afterExpand(tree)}}else{if(!keepOpen&&keepOpen!=null){if(tree.setting.animate){obj.next().slideUp(tree.setting.animateTime)}else{obj.next().hide()}tree.changeIcon(id,"close")}else{if(tree.setting.animate){obj.next().slideUp(tree.setting.animateTime)}else{obj.next().hide()}tree.changeIcon(id,"close")}}}tree.changeRootIcon(obj)}},changeToFolder:function(id){var obj=tree.getNodeDomById(id);var nodeIcon=obj.find("#tree_icon_"+id);var switchIcon=$("<span nodestate id='tree_switch_"+id+"' class='root-open'></span>");if(!$("#tree_switch_"+id).length){obj.find(".line-items:first").remove();nodeIcon.before(switchIcon)}nodeIcon.removeClass("root-doc").addClass("root-file");obj.attr("parent","")},changeToNormal:function(id){var obj=tree.getNodeDomById(id);if(tree.config.treeObj.find("#tree_ul_"+id).html()==null||tree.config.treeObj.find("#tree_ul_"+id).html()==""){obj.removeAttr("parent");obj.find("#tree_icon_"+id).removeClass("root-file").addClass("root-doc");obj.find("[nodestate]").before("<span class='line-items'></span>");obj.find("[nodestate]").remove()}},expandNode:function(obj,keepOpen){var isParent=obj.attr("parent");if(tree.setting.event!=null&&tree.setting.event.beforeExpand!=null){var node=tree.config.nodes[(obj.attr("tbindex")+"")];tree.setting.event.beforeExpand(node)}tree.showOrHide(isParent,obj,keepOpen)},expandNodes:function(obj,expandParent,currentStyle,keepOpen){var b=false;if(keepOpen){b=true}if(obj.next().css("display")=="none"||obj.next().css("display")==null||obj.next().length==0){var isParent=obj.attr("parent");if(currentStyle!=null&&currentStyle){obj.addClass("current")}if(expandParent){var parentNode=tree.getParentNodeById(obj.attr("tbindex"));if(parentNode!=null){var nodeObj=tree.getNodeDomById(parentNode.id);tree.expandNodes(nodeObj,true,keepOpen)}}if(tree.setting.event!=null&&tree.setting.event.beforeExpand!=null){var node=tree.config.nodes[obj.attr("tbindex")];tree.setting.event.beforeExpand(node)}tree.showOrHide(isParent,obj,b)}},selectNode:function(id,expandParent){var obj=tree.getNodeDomById(id);if(obj==null){return}tree.config.treeObj.find(".tree-items").removeClass("current");obj.addClass("current");if(expandParent){var pids=[];tree.getParentIdsById(id,pids);for(var i=0;i<pids.length;i++){var pNode=pids[i];var objDom=tree.getNodeDomById(pNode);tree.showOrHide(true,objDom,true)}}},cancelSelectNode:function(){tree.config.treeObj.find(".tree-items").removeClass("current")},changeIcon:function(id,type){var obj=tree.config.nodes[id];if(type=="open"){var iconOpen=obj.iconOpen;if(iconOpen!=null){tree.config.treeObj.find("#tree_icon_"+id).css({background:"url("+iconOpen+") no-repeat"})}}else{if(type=="close"){var iconClose=obj.iconClose;if(iconClose!=null){tree.config.treeObj.find("#tree_icon_"+id).css({background:"url("+iconClose+") no-repeat"})}}}},changeClass:function(obj){tree.config.treeObj.find(".tree-items").removeClass("current");obj.addClass("current")},changeRootIcon:function(obj){if(obj.find("[nodestate]").hasClass("root-open")){obj.find("[nodestate]").removeClass("root-open").addClass("root-close");var nodeFirst=tree.config.treeObj.find("li[level=0]");if(nodeFirst.length>1){tree.config.treeObj.find("[nodestate]:first").addClass("start")}else{tree.config.treeObj.find("[nodestate]:first").addClass("first").removeClass("end")}}else{obj.find("[nodestate]").removeClass("root-close").addClass("root-open")}},focusNode:function(id){var obj=this.getNodeDomById(id);tree.config.treeObj.find(".tree-items").removeClass("current");obj.addClass("current")},collapse:function(obj){obj.next().hide();tree.changeIcon(tree.config.data,id,"close");tree.changeRootIcon(obj)},beforeExpand:function(treeNode,callback){var b=false;var node=tree.getNodesByPid(treeNode.id);if(node!=null){b=true}else{}return b},onExpand:function(treeNode){if(this.beforeExpand(treeNode)){return true}else{return false}},onClick:function(callback,e){tree.config.treeObj.find(".tree-items").off("click.nodeClick").on("click.nodeClick",function(e){var tbindex=$(this).attr("tbindex");var treeNode=tree.config.nodes[tbindex];if(callback!=null){callback(treeNode,e);e.stopPropagation()}});tree.config.treeObj.find(".tree-items").find("span[nodestate]").off("click.nodeClick").on("click.nodeClick",function(e){e.stopPropagation()})},onDblClick:function(){tree.config.treeObj.find(".tree-items").off("dblclick.nodeClick").on("dblclick.nodeClick",function(e){var obj=$(this);var id=obj.attr("tbindex");var node=tree.config.nodes[id];if(obj.attr("parent")!=null){return}tree.setting.event.onDblClick(node)})},onMouseDownRight:function(){tree.config.treeObj.find(".tree-items").on("mousedown",function(e){if(e.which==3){var temp=$(this);var id=temp.attr("tbindex");var node=tree.config.nodes[id];if(node!=null&&node.menu!=null&&node.menu==false){return}tree.config.treeObj.find(".tree-items").removeClass("current");var contextMenu=tree.setting.contextMenu;temp.addClass("current");var target=$(contextMenu.target);var options={left:e.pageX,top:e.pageY,target:temp,items:contextMenu.items,useTargetPosition:false};target.menu(options);e.stopPropagation();$(document).off("contextmenu").on("contextmenu",function(){return false})}})},moveObj:null,moveNode:null,moveIndex:0,moveParentObj:null,onMouseDown:function(callback,type){tree.config.treeObj.find(".tree-items").off("mousedown.mousedown").on("mousedown.mousedown",function(e){if(e.which==3){tree.config.treeObj.find(".tree-items").off("mouseup.mouseup");tree.config.treeObj.find(".tree-items").off("mousemove.drag");tree.config.treeObj.find(".tree-items").find(".tree-items-sep").off("mouseenter.sep");return}var tbindex=$(this).attr("tbindex");var treeNode=tree.config.nodes[tbindex];if(callback!=null&&type==null){callback(treeNode)}else{if(type=="sort"){if(treeNode.dragable==false){return}var b=false;if(tree.setting.event.beforeDrag!=null){b=tree.setting.event.beforeDrag(treeNode)}tree.moveNode=treeNode;if(b){tree.moveIndex=tbindex;tree.onMouseEnter();tree.onMouseUp(null,"sort");tree.treeItemSepMouseUp(null,"sort");tree.onMouseMove("",tree.moveObj,e.pageY)}}}})},onMouseUp:function(callback,type){tree.config.treeObj.find(".tree-items").off("mouseup.mouseup").on("mouseup.mouseup",function(e){var temp=$(this);var tbindex=temp.attr("tbindex");var treeNode=tree.config.nodes[tbindex];var parentLi=temp.parent();if(callback!=null&&type==null){callback(treeNode)}else{if(type=="sort"){if(tbindex==tree.moveIndex){}else{if(tree.moveObj!=null){if(tree.isLeafNode(temp.parent(),tree.moveObj)||(tree.moveObj.attr("parent")==""&&tree.isChildren(temp.parent(),tree.moveObj))){}else{if((treeNode.dropable==true||treeNode.dropable==null)){var b=false;if(tree.setting.event.beforeDrop!=null){if(tree.moveObj.find("span:first").hasClass("insert")){b=tree.setting.event.beforeDrop(treeNode,tree.moveNode,"below")}else{b=tree.setting.event.beforeDrop(treeNode,tree.moveNode)}}if(b){var sourceNode=tree.config.nodes[tree.moveIndex];tree.config.nodes[(tree.moveIndex+"")]=sourceNode;if(tree.setting.event.onDrop!=null){if(tree.moveObj.find("span:first").hasClass("insert")){tree.setting.event.onDrop(treeNode,tree.moveNode,"below");if(treeNode.pid!=null){sourceNode.pid=treeNode.pid}else{sourceNode.pid=null}}else{tree.setting.event.onDrop(treeNode,tree.moveNode);if(treeNode.pid!=null){sourceNode.pid=treeNode.id}else{sourceNode.pid=null}}}}}}}}$(".tree-items").off("mousemove.drag");$(".tree-items").find(".tree-items-sep").off("mouseenter.sep");$(".tree-items").find("span[tit]").off("mouseenter.drag");tree.moveObj=null;if(tree.moveParentObj!=null){tree.changeToNormal(tree.moveParentObj.attr("tbindex"))}$(".tree-items").find("span[tit]").removeClass("tree-items-mouseenter");$(".tree-items-mousedown-curr").remove();tree.moveParentObj=null}}})},onMouseMove:function(type,obj,y){tree.config.treeObj.find(".tree-items").off("mousemove.drag").on("mousemove.drag",function(e){if(tree.moveObj==null){var top=e.pageY;if(Math.abs(top-y)<5){return}tree.moveObj=$(this).clone(true).appendTo("body").off("mousedown.mousedown");tree.moveParentObj=$(this).parent().parent().prev();tree.moveObj.find("span:first").addClass("ui-tree-icons inner")}tree.moveObj.css({left:e.pageX+15,top:e.pageY+15});if(!tree.moveObj.hasClass("tree-items-mousedown-curr")){tree.moveObj.addClass("tree-items-mousedown-curr")}})},onMouseEnter:function(){tree.config.treeObj.find(".tree-items").find("span[tit]").off("mouseenter.drag").on("mouseenter.drag",function(e){var th=$(this);th.addClass("tree-items-mouseenter");var parent=th.parent();if(parent.attr("parent")!=null&&parent.attr("tbindex")!=tree.moveObj.attr("tbindex")){tree.expandNodes(parent)}if(th.hasClass("nodrop")){tree.moveObj.find("span:first").addClass("ui-tree-icons nodrop").removeClass("insert").removeClass("inner")}else{if(!tree.moveObj.find("span:first").hasClass("inner")){tree.moveObj.find("span:first").addClass("ui-tree-icons inner").removeClass("insert")}}}).off("mouseleave.drag").on("mouseleave.drag",function(e){var th=$(this);th.removeClass("tree-items-mouseenter");if(th.hasClass("nodrop")){if(tree.moveObj!=null){tree.moveObj.find("span:first").removeClass("nodrop")}}});$(".tree-items").find(".tree-items-sep").off("mouseenter.sep").on("mouseenter.sep",function(e){$(this).addClass("tree-items-sep-line");if(tree.moveObj!=null){if(!tree.moveObj.find("span:first").hasClass("insert")){tree.moveObj.find("span:first").addClass("ui-tree-icons insert").removeClass("inner")}}}).off("mouseleave.sep").on("mouseleave.sep",function(e){$(this).removeClass("tree-items-sep-line")})},treeItemSepMouseUp:function(callback){tree.config.treeObj.find(".tree-items").find(".tree-items-sep").off("mouseup.sep").on("mouseup.sep",function(event){if(tree.moveObj!=null){var dropSort="below";var temp=$(this);var parentAttr=temp.parent().attr("parent");if(parentAttr!=undefined&&parentAttr!=null&&parentAttr.length>0){temp=$(this).parent().next("ul").find("div[sep-index]:first");dropSort="above"}if(tree.isLeafNode(temp.parent(),tree.moveObj)||(tree.moveObj.attr("parent")!=null&&tree.moveObj.attr("parent")==""&&tree.isChildren(temp.parent(),tree.moveObj))){}else{var tbindex=temp.attr("sep-index");var treeNode=tree.config.nodes[tbindex];var sourceIndex=tree.moveObj.attr("tbindex");var text=$(this).parent().text();var b=false;if(tree.setting.event.beforeDrop!=null){if(tree.moveObj.find("span:first").hasClass("insert")){b=tree.setting.event.beforeDrop(treeNode,tree.moveNode,dropSort)}else{b=tree.setting.event.beforeDrop(treeNode,tree.moveNode)}}if(b&&tree.setting.event.onDrop!=null){if(tree.moveObj.find("span:first").hasClass("insert")){tree.setting.event.onDrop(treeNode,tree.moveNode,dropSort)}else{tree.setting.event.onDrop(treeNode,tree.moveNode)}var pindex=tree.getParentIndex($(this).parent().attr("tbindex"));var sourceNode=tree.config.nodes[sourceIndex];if(treeNode.pid!=null){sourceNode.pid=treeNode.pid}else{sourceNode.pid=null}tree.config.nodes[sourceIndex]=sourceNode;tree.refreshDataFromNodes();if(tree.setting.event.afterDrop!=null){tree.setting.event.afterDrop()}}}}$(".tree-items").find("span[tit]").off("mouseenter.drag");$(".tree-items").off("mousemove.drag");$(".tree-items").find(".tree-items-sep").off("mouseup.sep");$(".tree-items-mousedown-curr").remove();$(".tree-items").off("mousemove.drag");$(".tree-items").find(".tree-items-sep").off("mouseenter.sep");$(".tree-items").find("span[tit]").off("mouseenter.drag").removeClass("tree-items-mouseenter");tree.changeToNormal(tree.moveParentObj.attr("tbindex"));tree.moveObj=null;tree.moveParentObj=null;event.stopPropagation();tree.initEvent();tree.initStyles()})},destroy:function(){tree.config.treeObj.html("")}};tree.setting=$.extend(true,tree.setting,options);if(tree.setting.dataModel.url!=""){var result=tree.getData(tree.setting.dataModel);tree.setting.dataModel.data=result}tree.config.data=tree.setting.dataModel.data;tree.config.treeObj=obj;tree.config.treeObj.addClass("ui-tree");tree.buildTree(tree.config.data);tree.resizeTree();$(window).bind("selectstart",function(){});return tree}};
/*!
 * jQuery verson 1.10.2
 * AWS Tabs 插件
 * author zhangy
 * 2013年8月23日19:13:42
 */
(function(a){awsui.tabs={init:function(e,c){var d={config:{height:"33",nogradient:false},memory:[],tabObj:null,tabContainer:null,tabContentPanel:null,addTab:function(f,j){f=a.extend(c,f);var h=f.item;if(d.existsTab(h.index)){d.focusTab(h.index);return}d.tabContainer.find(".awsui-tabs-items[index]").removeClass("current");var g=a("<div index="+h.index+" class='awsui-tabs-items "+c.tabPosition+"'><span>"+h.title+"</span></div>").appendTo(d.tabContainer);g.css({height:c.height-8,"line-height":(c.height-7)+"px"});g.addClass("current");if(f.contextMenu){d.initContextMenu(h.index,f)}d.bindClick(h);if(f.close){var i=a("<span class='awsui-tabs-icon close'></span>").appendTo(g);i.off("click.tabclose").on("click.tabclose",function(l){var k=d.onCloseTab(i.parent());if(k!==false){d.closeTab(h.index)}l.stopPropagation()})}d.focusTab(h.index);d.resizeTab(g);if(j!=null){j()}},onCloseTab:function(g){var f=true;if(c.onCloseTab!=null){f=c.onCloseTab(g)}return f},closeTab:function(f,j){var l=a('.awsui-tabs-items[index="'+f+'"]');if(j!=null&&j=="all"){var k=null;d.tabObj.find(".awsui-tabs-items").each(function(){if(a(this).find(".awsui-tabs-icon.close").length){a('.awsui-layout-iframe[index="'+a(this).attr("index")+'"]').remove();a(this).remove()}});d.resizeTab("remove")}else{if(j!=null&&j=="others"){d.tabObj.find(".awsui-tabs-items").each(function(){var m=a(this).attr("index");if(f!=m&&a(this).find(".awsui-tabs-icon.close").length){a('.awsui-layout-iframe[index="'+m+'"]').remove();a(this).remove()}});d.focusTab(f);d.resizeTab("remove")}else{if(a.inArray(f,this.memory)>=0){this.memory.splice(a.inArray(f,this.memory),1)}var g=this.memory.length;if(l.hasClass("current")){var i;if(g<2){i=this.memory[0]}else{i=this.memory[g-1]}var h=this.getTabItem(i);d.focusTab(h)}a('.awsui-layout-iframe[index="'+f+'"]').remove();l.remove();d.resizeTab("remove");return}}},focusTab:function(i){if(typeof i=="object"){var g=i.attr("index");var h={};h.beforeTabIndex=d.getCurrentTab().attr("index");d.tabContainer.find("div[index]").removeClass("current");i.addClass("current");a('.awsui-layout-iframe[index="'+g+'"]').show().siblings(".awsui-layout-iframe").hide();if(a.inArray(g,this.memory)>=0){this.memory.splice(a.inArray(g,this.memory),1)}if(g!=null){this.memory.push(g)}d.resizeTab(i);if(c.afterClick!=null){b=c.afterClick(i)}if(c.focusShowAfter!=null&&i.beforeTabIndex!=g){var f=i.text();h.title=f;h.index=g;c.focusShowAfter(h)}}else{var h=d.getTabItem(i);d.focusTab(h)}},getTabFirst:function(){var f=d.tabObj.find(".awsui-tabs-items[index]:first");return f},getTabLast:function(){var f=d.tabObj.find(".awsui-tabs-items[index]:last");return f},getCurrentTab:function(){var f=d.tabObj.find(".awsui-tabs-items[index].current");return f},getTabItem:function(f){var g=d.tabObj.find('.awsui-tabs-items[index="'+f+'"]');return g},changeIndex:function(f,g){var h=this.getTabItem(f);if(h!=null){h.attr("index",g)}if(a(".awsui-layout-iframe[index="+f+"]").length){a(".awsui-layout-iframe[index="+f+"]").attr("index",g)}var i={index:g,title:h.html()};this.bindClick(i)},removeAllTabs:function(){d.tabObj.find(".awsui-tabs-items[index]").remove();this.memory=[]},setTitle:function(f,i){var g=d.getTabItem(f);var h;g.find(".awsui-tabs-icon.close").length==0?h=false:h=true;if(h){g.html(i+"<span class='awsui-tabs-icon close'></span>");var j=g.find(".awsui-tabs-icon.close").eq(0);j.off("click.tabclose").on("click.tabclose",function(l){var k=d.onCloseTab(j.parent());if(k!==false){d.closeTab(f)}l.stopPropagation()})}else{g.html(i)}},getTabItemPrev:function(f){var g=d.tabObj.find('.awsui-tabs-items[index="'+f+'"]');return g.prev()},existsTab:function(f){var g=false;d.tabContainer.find(".awsui-tabs-items[index]").each(function(){var h=a(this).attr("index");if(h==f){g=true;current_item=a(this)}});return g},isOverWidth:function(){var g=d.tabObj.outerWidth();var f=0;d.tabObj.find(".awsui-tabs-items").each(function(){f+=a(this).outerWidth()});return(f>=g-25)},resizeTab:function(f){if(d.isOverWidth()){if(!a(".awsui-tabs-items-prev").length){g()}d.bindMove(f)}else{if(f=="remove"){d.tabContainer.animate({left:"0px"},50)}h()}function g(){d.tabObj.append("<span class='awsui-tabs-items-prev'></span><span class='awsui-tabs-items-next hide'></span>");d.tabObj.find(".awsui-tabs-items-prev, .awsui-tabs-items-next").css({height:c.height-1})}function h(){if(a(".awsui-tabs-items-next").length){a(".awsui-tabs-items-next").remove();a(".awsui-tabs-items-prev").remove()}}},bindMove:function(f){if(f!=null&&f=="remove"){var j=a(".awsui-tabs-items-prev").offset().left;var m=d.tabContainer.find(".awsui-tabs-items:first");var i=m.offset().left;if(i>=j){return}d.tabContainer.animate({left:"+="+m.outerWidth()},200,function(){})}else{if(typeof f=="object"){if(f==null){return}var l=f.offset().left;var n=a(".awsui-tabs-items-prev").offset().left;var g=a(".awsui-tabs-items-next").offset().left;if(l<=g&&(l+f.outerWidth())>g){h("right");a(".awsui-tabs-items-prev").removeClass("hide")}else{if(l<=n&&(l+f.outerWidth())>n){d.tabContainer.stop().animate({left:"+="+(n-l+25)},200);a(".awsui-tabs-items-next").removeClass("hide")}else{if((l+f.outerWidth())<n){h("left")}else{if(l>g){h("right")}}}}if(d.tabContainer.find(".awsui-tabs-items:first").attr("index")==f.attr("index")){a(".awsui-tabs-items-prev").addClass("hide");a(".awsui-tabs-items-next").removeClass("hide")}if(d.tabContainer.find(".awsui-tabs-items:last").attr("index")==f.attr("index")){a(".awsui-tabs-items-next").addClass("hide");a(".awsui-tabs-items-prev").removeClass("hide")}}}a(".awsui-tabs-items-prev").off().on("mousedown",function(){k("scroll_right")});a(".awsui-tabs-items-next").off().on("mousedown",function(){k("scroll_left")});function k(q){if(q=="scroll_left"){var s=a(".awsui-tabs-items-next").offset().left;var t=d.tabContainer.find(".awsui-tabs-items:last").offset().left;var o=d.tabContainer.find(".awsui-tabs-items:last").outerWidth();if(t+o<=s-7){return}d.tabContainer.stop().animate({left:"-="+o},200,function(){t=d.tabContainer.find(".awsui-tabs-items:last").offset().left;if(t+o<=s-7){a(".awsui-tabs-items-next").addClass("hide");d.tabContainer.css({right:0+"px"})}if(a(".awsui-tabs-items-prev").hasClass("hide")){a(".awsui-tabs-items-prev").removeClass("hide")}})}else{if(q=="scroll_right"){var s=a(".awsui-tabs-items-prev").offset().left;var t=d.tabContainer.find(".awsui-tabs-items:first").offset().left;var p=d.tabContainer.find(".awsui-tabs-items:first").outerWidth();if(t>=s+7){return}d.tabContainer.stop().animate({left:"+="+p},200,function(){t=d.tabContainer.find(".awsui-tabs-items:first").offset().left;if(t>=s+5){a(".awsui-tabs-items-prev").addClass("hide");d.tabContainer.stop().animate({left:0+"px"},50)}if(a(".awsui-tabs-items-next").hasClass("hide")){a(".awsui-tabs-items-next").removeClass("hide")}})}}}function h(o){if(o=="left"){d.tabContainer.stop().animate({left:"0px"},50)}else{if(o=="right"){d.tabContainer.stop().animate({left:"-="+(l+f.outerWidth()-g+10)},200)}}}},bindClick:function(f){d.tabObj.find('.awsui-tabs-items[index="'+f.index+'"]').off("click.tab").on("click.tab",function(){var g=true;if(c.onClick!=null){g=c.onClick(f)}if(g){d.focusTab(f.index)}})},initContextMenu:function(f,g){a('.awsui-tabs-items[index="'+f+'"]').off("mousedown").on("mousedown",function(l){var i=a(this);if(l.which==3){var k=l.pageX;var j=l.pageY;var m=[];if(g.close){m.push({text:关闭,tit:"closeMe",method:function(){d.closeTab(f);a("#"+g.contextMenuTarget).menu("close")}})}m.push({text:关闭其他,tit:"closeOthers",method:function(){d.closeTab(f,"others");a("#"+g.contextMenuTarget).menu("close")}});if(g.close){m.push({text:关闭全部,tit:"closeAll",method:function(){d.closeTab(f,"all");a("#"+g.contextMenuTarget).menu("close")}})}var h={left:k,top:j,items:m};a("#"+g.contextMenuTarget).menu(h);l.stopPropagation();a(document).off("contextmenu").on("contextmenu",function(){return false})}})},resizePage:function(h){var f=h.parent().height();var g=0;h.siblings(":visible").each(function(){if(a(this).attr("id")==="window-mask"){return true}if(a(this).hasClass("awsui-dialog")){return true}g+=a(this).height()});h.css({height:f-g-1})}};if(c.tabPosition==null){c.tabPosition="top"}c=a.extend(d.config,c);d.tabObj=e;d.tabObj.addClass("awsui-tabs").css({height:c.height});if(c.nogradient){d.tabObj.addClass("nogradient")}d.tabContainer=a("<div class='awsui-tabs-container "+c.tabPosition+"'></div>").appendTo(d.tabObj);d.tabContainer.css({height:c.height-1});if(c.contentPanel!=null){d.tabContentPanel=c.contentPanel;d.resizePage(c.contentPanel)}a(window).resize(function(){d.resizePage(c.contentPanel)});return d}}})(jQuery);
/*!
 * jQuery File Upload Plugin 5.40.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
(function(c){if(typeof define==="function"&&define.amd){define(["jquery","jquery.ui.widget"],c)}else{c(window.jQuery)}}(function(c){c.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||c('<input type="file">').prop("disabled"));c.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);c.support.xhrFormDataFileUpload=!!window.FormData;c.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);c.widget("blueimp.fileupload",{options:{dropZone:c(document),pasteZone:c(document),fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(d,a){d=this.messages[d]||d.toString();if(a){c.each(a,function(g,f){d=d.replace("{"+g+"}",f)})}return d},formData:function(a){return a.serializeArray()},add:function(d,a){if(d.isDefaultPrevented()){return false}if(a.autoUpload||(a.autoUpload!==false&&c(this).fileupload("option","autoUpload"))){a.process().done(function(){a.submit()})}},processData:false,contentType:false,cache:false},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:c.support.blobSlice&&function(){var a=this.slice||this.webkitSlice||this.mozSlice;return a.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(g,h,a){var f=g-this.timestamp;if(!this.bitrate||!a||f>a){this.bitrate=(h-this.loaded)*(1000/f)*8;this.loaded=h;this.timestamp=g}return this.bitrate}},_isXHRUpload:function(a){return !a.forceIframeTransport&&((!a.multipart&&c.support.xhrFileUpload)||c.support.xhrFormDataFileUpload)},_getFormData:function(a){var d;if(c.type(a.formData)==="function"){return a.formData(a.form)}if(c.isArray(a.formData)){return a.formData}if(c.type(a.formData)==="object"){d=[];c.each(a.formData,function(g,f){d.push({name:g,value:f})});return d}return[]},_getTotal:function(d){var a=0;c.each(d,function(g,f){a+=f.size||1});return a},_initProgressObject:function(d){var a={loaded:0,total:0,bitrate:0};if(d._progress){c.extend(d._progress,a)}else{d._progress=a}},_initResponseObject:function(a){var d;if(a._response){for(d in a._response){if(a._response.hasOwnProperty(d)){delete a._response[d]}}}else{a._response={}}},_onProgress:function(e,g){if(e.lengthComputable){var h=((Date.now)?Date.now():(new Date()).getTime()),a;if(g._time&&g.progressInterval&&(h-g._time<g.progressInterval)&&e.loaded!==e.total){return}g._time=h;a=Math.floor(e.loaded/e.total*(g.chunkSize||g._progress.total))+(g.uploadedBytes||0);this._progress.loaded+=(a-g._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(h,this._progress.loaded,g.bitrateInterval);g._progress.loaded=g.loaded=a;g._progress.bitrate=g.bitrate=g._bitrateTimer.getBitrate(h,a,g.bitrateInterval);this._trigger("progress",c.Event("progress",{delegatedEvent:e}),g);this._trigger("progressall",c.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(a){var f=this,e=a.xhr?a.xhr():c.ajaxSettings.xhr();if(e.upload){c(e.upload).bind("progress",function(h){var d=h.originalEvent;h.lengthComputable=d.lengthComputable;h.loaded=d.loaded;h.total=d.total;f._onProgress(h,a)});a.xhr=function(){return e}}},_isInstanceOf:function(a,d){return Object.prototype.toString.call(d)==="[object "+a+"]"},_initXHRData:function(l){var j=this,h,k=l.files[0],a=l.multipart||!c.support.xhrFileUpload,i=c.type(l.paramName)==="array"?l.paramName[0]:l.paramName;l.headers=c.extend({},l.headers);if(l.contentRange){l.headers["Content-Range"]=l.contentRange}if(!a||l.blob||!this._isInstanceOf("File",k)){l.headers["Content-Disposition"]='attachment; filename="'+encodeURI(k.name)+'"'}if(!a){l.contentType=k.type||"application/octet-stream";l.data=l.blob||k}else{if(c.support.xhrFormDataFileUpload){if(l.postMessage){h=this._getFormData(l);if(l.blob){h.push({name:i,value:l.blob})}else{c.each(l.files,function(e,d){h.push({name:(c.type(l.paramName)==="array"&&l.paramName[e])||i,value:d})})}}else{if(j._isInstanceOf("FormData",l.formData)){h=l.formData}else{h=new FormData();c.each(this._getFormData(l),function(e,d){h.append(d.name,d.value)})}if(l.blob){h.append(i,l.blob,k.name)}else{c.each(l.files,function(e,d){if(j._isInstanceOf("File",d)||j._isInstanceOf("Blob",d)){h.append((c.type(l.paramName)==="array"&&l.paramName[e])||i,d,encodeURI(d.uploadName||d.name))}})}}l.data=h}}l.blob=null},_initIframeSettings:function(a){var d=c("<a></a>").prop("href",a.url).prop("host");a.dataType="iframe "+(a.dataType||"");a.formData=this._getFormData(a);if(a.redirect&&d&&d!==location.host){a.formData.push({name:a.redirectParamName||"redirect",value:a.redirect})}},_initDataSettings:function(a){if(this._isXHRUpload(a)){if(!this._chunkedUpload(a,true)){if(!a.data){this._initXHRData(a)}this._initProgressListener(a)}if(a.postMessage){a.dataType="postmessage "+(a.dataType||"")}}else{this._initIframeSettings(a)}},_getParamName:function(a){var f=c(a.fileInput),e=a.paramName;if(!e){e=[];f.each(function(){var i=c(this),h=i.prop("name")||"files[]",d=(i.prop("files")||[1]).length;while(d){e.push(h);d-=1}});if(!e.length){e=[f.prop("name")||"files[]"]}}else{if(!c.isArray(e)){e=[e]}}return e},_initFormSettings:function(a){if(!a.form||!a.form.length){a.form=c(a.fileInput.prop("form"));if(!a.form.length){a.form=c(this.options.fileInput.prop("form"))}}a.paramName=this._getParamName(a);if(!a.url){a.url=a.form.prop("action")||location.href}a.type=(a.type||(c.type(a.form.prop("method"))==="string"&&a.form.prop("method"))||"").toUpperCase();if(a.type!=="POST"&&a.type!=="PUT"&&a.type!=="PATCH"){a.type="POST"}if(!a.formAcceptCharset){a.formAcceptCharset=a.form.attr("accept-charset")}},_getAJAXSettings:function(d){var a=c.extend({},this.options,d);this._initFormSettings(a);this._initDataSettings(a);return a},_getDeferredState:function(a){if(a.state){return a.state()}if(a.isResolved()){return"resolved"}if(a.isRejected()){return"rejected"}return"pending"},_enhancePromise:function(a){a.success=a.done;a.error=a.fail;a.complete=a.always;return a},_getXHRPromise:function(h,i,j){var a=c.Deferred(),g=a.promise();i=i||this.options.context||g;if(h===true){a.resolveWith(i,j)}else{if(h===false){a.rejectWith(i,j)}}g.abort=a.promise;return this._enhancePromise(g)},_addConvenienceMethods:function(e,g){var h=this,a=function(d){return c.Deferred().resolveWith(h,d).promise()};g.process=function(d,f){if(d||f){g._processQueue=this._processQueue=(this._processQueue||a([this])).pipe(function(){if(g.errorThrown){return c.Deferred().rejectWith(h,[g]).promise()}return a(arguments)}).pipe(d,f)}return this._processQueue||a([this])};g.submit=function(){if(this.state()!=="pending"){g.jqXHR=this.jqXHR=(h._trigger("submit",c.Event("submit",{delegatedEvent:e}),this)!==false)&&h._onSend(e,this)}return this.jqXHR||h._getXHRPromise()};g.abort=function(){if(this.jqXHR){return this.jqXHR.abort()}this.errorThrown="abort";h._trigger("fail",null,this);return h._getXHRPromise(false)};g.state=function(){if(this.jqXHR){return h._getDeferredState(this.jqXHR)}if(this._processQueue){return h._getDeferredState(this._processQueue)}};g.processing=function(){return !this.jqXHR&&this._processQueue&&h._getDeferredState(this._processQueue)==="pending"};g.progress=function(){return this._progress};g.response=function(){return this._response}},_getUploadedBytes:function(g){var a=g.getResponseHeader("Range"),f=a&&a.split("-"),h=f&&f.length>1&&parseInt(f[1],10);return h&&h+1},_chunkedUpload:function(a,t){a.uploadedBytes=a.uploadedBytes||0;var u=this,w=a.files[0],v=w.size,y=a.uploadedBytes,x=a.maxChunkSize||v,q=this._blobSlice,p=c.Deferred(),n=p.promise(),s,o;if(!(this._isXHRUpload(a)&&q&&(y||x<v))||a.data){return false}if(t){return true}if(y>=v){w.error=a.i18n("uploadedBytes");return this._getXHRPromise(false,a.context,[null,"error",w.error])}o=function(){var d=c.extend({},a),e=d._progress.loaded;d.blob=q.call(w,y,y+x,w.type);d.chunkSize=d.blob.size;d.contentRange="bytes "+y+"-"+(y+d.chunkSize-1)+"/"+v;u._initXHRData(d);u._initProgressListener(d);s=((u._trigger("chunksend",null,d)!==false&&c.ajax(d))||u._getXHRPromise(false,d.context)).done(function(h,f,g){y=u._getUploadedBytes(g)||(y+d.chunkSize);if(e+d.chunkSize-d._progress.loaded){u._onProgress(c.Event("progress",{lengthComputable:true,loaded:y-d.uploadedBytes,total:y-d.uploadedBytes}),d)}a.uploadedBytes=d.uploadedBytes=y;d.result=h;d.textStatus=f;d.jqXHR=g;u._trigger("chunkdone",null,d);u._trigger("chunkalways",null,d);if(y<v){o()}else{p.resolveWith(d.context,[h,f,g])}}).fail(function(h,f,g){d.jqXHR=h;d.textStatus=f;d.errorThrown=g;u._trigger("chunkfail",null,d);u._trigger("chunkalways",null,d);p.rejectWith(d.context,[h,f,g])})};this._enhancePromise(n);n.abort=function(){return s.abort()};o();return n},_beforeSend:function(d,a){if(this._active===0){this._trigger("start");this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0}this._initResponseObject(a);this._initProgressObject(a);a._progress.loaded=a.loaded=a.uploadedBytes||0;a._progress.total=a.total=this._getTotal(a.files)||1;a._progress.bitrate=a.bitrate=0;this._active+=1;this._progress.loaded+=a.loaded;this._progress.total+=a.total},_onDone:function(a,h,i,k){var j=k._progress.total,l=k._response;if(k._progress.loaded<j){this._onProgress(c.Event("progress",{lengthComputable:true,loaded:j,total:j}),k)}l.result=k.result=a;l.textStatus=k.textStatus=h;l.jqXHR=k.jqXHR=i;this._trigger("done",null,k)},_onFail:function(i,g,h,j){var a=j._response;if(j.recalculateProgress){this._progress.loaded-=j._progress.loaded;this._progress.total-=j._progress.total}a.jqXHR=j.jqXHR=i;a.textStatus=j.textStatus=g;a.errorThrown=j.errorThrown=h;this._trigger("fail",null,j)},_onAlways:function(g,f,h,a){this._trigger("always",null,a)},_onSend:function(m,o){if(!o.submit){this._addConvenienceMethods(m,o)}var n=this,e,s,l,q,a=n._getAJAXSettings(o),p=function(){n._sending+=1;a._bitrateTimer=new n._BitrateTimer();e=e||(((s||n._trigger("send",c.Event("send",{delegatedEvent:m}),a)===false)&&n._getXHRPromise(false,a.context,s))||n._chunkedUpload(a)||c.ajax(a)).done(function(g,d,f){n._onDone(g,d,f,a)}).fail(function(g,d,f){n._onFail(g,d,f,a)}).always(function(d,h,f){n._onAlways(d,h,f,a);n._sending-=1;n._active-=1;if(a.limitConcurrentUploads&&a.limitConcurrentUploads>n._sending){var g=n._slots.shift();while(g){if(n._getDeferredState(g)==="pending"){g.resolve();break}g=n._slots.shift()}}if(n._active===0){n._trigger("stop")}});return e};this._beforeSend(m,a);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){l=c.Deferred();this._slots.push(l);q=l.pipe(p)}else{this._sequence=this._sequence.pipe(p,p);q=this._sequence}q.abort=function(){s=[undefined,"abort","abort"];if(!e){if(l){l.rejectWith(a.context,s)}return p()}return e.abort()};return this._enhancePromise(q)}return p()},_onAdd:function(i,x){var j=this,F=true,G=c.extend({},this.options,x),C=x.files,a=C.length,B=G.limitMultiFileUploads,z=G.limitMultiFileUploadSize,H=G.limitMultiFileUploadSizeOverhead,v=0,w=this._getParamName(G),D,E,e,y,A=0;if(z&&(!a||C[0].size===undefined)){z=undefined}if(!(G.singleFileUploads||B||z)||!this._isXHRUpload(G)){e=[C];D=[w]}else{if(!(G.singleFileUploads||z)&&B){e=[];D=[];for(y=0;y<a;y+=B){e.push(C.slice(y,y+B));E=w.slice(y,y+B);if(!E.length){E=w}D.push(E)}}else{if(!G.singleFileUploads&&z){e=[];D=[];for(y=0;y<a;y=y+1){v+=C[y].size+H;if(y+1===a||((v+C[y+1].size+H)>z)||(B&&y+1-A>=B)){e.push(C.slice(A,y+1));E=w.slice(A,y+1);if(!E.length){E=w}D.push(E);A=y+1;v=0}}}else{D=w}}}x.originalFiles=C;c.each(e||C,function(g,f){var d=c.extend({},x);d.files=e?f:[f];d.paramName=D[g];j._initResponseObject(d);j._initProgressObject(d);j._addConvenienceMethods(i,d);F=j._trigger("add",c.Event("add",{delegatedEvent:i}),d);return F});return F},_replaceFileInput:function(a){var d=a.clone(true);c("<form></form>").append(d)[0].reset();a.after(d).detach();c.cleanData(a.unbind("remove"));this.options.fileInput=this.options.fileInput.map(function(g,f){if(f===a[0]){return d[0]}return f});if(a[0]===this.element[0]){this.element=d}},_handleFileTreeEntry:function(m,k){var p=this,l=c.Deferred(),q=function(d){if(d&&!d.entry){d.entry=m}l.resolve([d])},o=function(d){p._handleFileTreeEntries(d,k+m.name+"/").done(function(e){l.resolve(e)}).fail(q)},n=function(){a.readEntries(function(d){if(!d.length){o(s)}else{s=s.concat(d);n()}},q)},a,s=[];k=k||"";if(m.isFile){if(m._file){m._file.relativePath=k;l.resolve(m._file)}else{m.file(function(d){d.relativePath=k;l.resolve(d)},q)}}else{if(m.isDirectory){a=m.createReader();n()}else{l.resolve([])}}return l.promise()},_handleFileTreeEntries:function(a,e){var f=this;return c.when.apply(c,c.map(a,function(d){return f._handleFileTreeEntry(d,e)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(d){d=d||{};var a=d.items;if(a&&a.length&&(a[0].webkitGetAsEntry||a[0].getAsEntry)){return this._handleFileTreeEntries(c.map(a,function(f){var g;if(f.webkitGetAsEntry){g=f.webkitGetAsEntry();if(g){g._file=f.getAsFile()}return g}return f.getAsEntry()}))}return c.Deferred().resolve(c.makeArray(d.files)).promise()},_getSingleFileInputFiles:function(g){g=c(g);var a=g.prop("webkitEntries")||g.prop("entries"),h,f;if(a&&a.length){return this._handleFileTreeEntries(a)}h=c.makeArray(g.prop("files"));if(!h.length){f=g.prop("value");if(!f){return c.Deferred().resolve([]).promise()}h=[{name:f.replace(/^.*\\/,"")}]}else{if(h[0].name===undefined&&h[0].fileName){c.each(h,function(e,d){d.name=d.fileName;d.size=d.fileSize})}}return c.Deferred().resolve(h).promise()},_getFileInputFiles:function(a){if(!(a instanceof c)||a.length===1){return this._getSingleFileInputFiles(a)}return c.when.apply(c,c.map(a,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_onChange:function(e){var a=this,f={fileInput:c(e.target),form:c(e.target.form)};this._getFileInputFiles(f.fileInput).always(function(d){f.files=d;if(a.options.replaceFileInput){a._replaceFileInput(f.fileInput)}if(a._trigger("change",c.Event("change",{delegatedEvent:e}),f)!==false){a._onAdd(e,f)}})},_onPaste:function(e){var a=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,f={files:[]};if(a&&a.length){c.each(a,function(i,d){var h=d.getAsFile&&d.getAsFile();if(h){f.files.push(h)}});if(this._trigger("paste",c.Event("paste",{delegatedEvent:e}),f)!==false){this._onAdd(e,f)}}},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var a=this,g=e.dataTransfer,h={};if(g&&g.files&&g.files.length){e.preventDefault();this._getDroppedFiles(g).always(function(d){h.files=d;if(a._trigger("drop",c.Event("drop",{delegatedEvent:e}),h)!==false){a._onAdd(e,h)}})}},_onDragOver:function(d){d.dataTransfer=d.originalEvent&&d.originalEvent.dataTransfer;var a=d.dataTransfer;if(a&&c.inArray("Files",a.types)!==-1&&this._trigger("dragover",c.Event("dragover",{delegatedEvent:d}))!==false){d.preventDefault();a.dropEffect="copy"}},_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop});this._on(this.options.pasteZone,{paste:this._onPaste})}if(c.support.fileInput){this._on(this.options.fileInput,{change:this._onChange})}},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragover drop");this._off(this.options.pasteZone,"paste");this._off(this.options.fileInput,"change")},_setOption:function(a,f){var e=c.inArray(a,this._specialOptions)!==-1;if(e){this._destroyEventHandlers()}this._super(a,f);if(e){this._initSpecialOptions();this._initEventHandlers()}},_initSpecialOptions:function(){var a=this.options;if(a.fileInput===undefined){a.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]')}else{if(!(a.fileInput instanceof c)){a.fileInput=c(a.fileInput)}}if(!(a.dropZone instanceof c)){a.dropZone=c(a.dropZone)}if(!(a.pasteZone instanceof c)){a.pasteZone=c(a.pasteZone)}},_getRegExp:function(e){var f=e.split("/"),a=f.pop();f.shift();return new RegExp(f.join("/"),a)},_isRegExpOption:function(a,d){return a!=="url"&&c.type(d)==="string"&&/^\/.*\/[igm]{0,3}$/.test(d)},_initDataAttributes:function(){var f=this,a=this.options,e=c(this.element[0].cloneNode(false));c.each(e.data(),function(i,h){var d="data-"+i.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();if(e.attr(d)){if(f._isRegExpOption(i,h)){h=f._getRegExp(h)}a[i]=h}})},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(d){var a=this;if(!d||this.options.disabled){return}if(d.fileInput&&!d.files){this._getFileInputFiles(d.fileInput).always(function(e){d.files=e;a._onAdd(null,d)})}else{d.files=c.makeArray(d.files);this._onAdd(null,d)}},send:function(i){if(i&&!this.options.disabled){if(i.fileInput&&!i.files){var k=this,a=c.Deferred(),h=a.promise(),l,j;h.abort=function(){j=true;if(l){return l.abort()}a.reject(null,"abort","abort");return h};this._getFileInputFiles(i.fileInput).always(function(d){if(j){return}if(!d.length){a.reject();return}i.files=d;l=k._onSend(null,i);l.then(function(g,e,f){a.resolve(g,e,f)},function(g,e,f){a.reject(g,e,f)})});return this._enhancePromise(h)}i.files=c.makeArray(i.files);if(i.files.length){return this._onSend(null,i)}}return this._getXHRPromise(false,i&&i.context)}})}));
/*!
 * jQuery File Upload Processing Plugin 1.3.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
(function(c){if(typeof define==="function"&&define.amd){define(["jquery","./jquery.fileupload"],c)}else{c(window.jQuery)}}(function(d){var c=d.blueimp.fileupload.prototype.options.add;d.widget("blueimp.fileupload",d.blueimp.fileupload,{options:{processQueue:[],add:function(a,g){var e=d(this);g.process(function(){return e.fileupload("process",g)});c.call(this,a,g)}},processActions:{},_processFile:function(a,h){var i=this,k=d.Deferred().resolveWith(i,[a]),j=k.promise();this._trigger("process",null,a);d.each(a.processQueue,function(g,f){var e=function(l){if(h.errorThrown){return d.Deferred().rejectWith(i,[h]).promise()}return i.processActions[f.action].call(i,l,f)};j=j.pipe(e,f.always&&e)});j.done(function(){i._trigger("processdone",null,a);i._trigger("processalways",null,a)}).fail(function(){i._trigger("processfail",null,a);i._trigger("processalways",null,a)});return j},_transformProcessQueue:function(e){var a=[];d.each(e.processQueue,function(){var j={},h=this.action,i=this.prefix===true?h:this.prefix;d.each(this,function(g,f){if(d.type(f)==="string"&&f.charAt(0)==="@"){j[g]=e[f.slice(1)||(i?i+g.charAt(0).toUpperCase()+g.slice(1):g)]}else{j[g]=f}});a.push(j)});e.processQueue=a},processing:function(){return this._processing},process:function(a){var f=this,g=d.extend({},this.options,a);if(g.processQueue&&g.processQueue.length){this._transformProcessQueue(g);if(this._processing===0){this._trigger("processstart")}d.each(a.files,function(j){var e=j?d.extend({},g):g,i=function(){if(a.errorThrown){return d.Deferred().rejectWith(f,[a]).promise()}return f._processFile(e,a)};e.index=j;f._processing+=1;f._processingQueue=f._processingQueue.pipe(i,i).always(function(){f._processing-=1;if(f._processing===0){f._trigger("processstop")}})})}return this._processingQueue},_create:function(){this._super();this._processing=0;this._processingQueue=d.Deferred().resolveWith(this).promise()}})}));
/*!
 * jQuery File Upload User Interface Plugin 9.5.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
(function(c){if(typeof define==="function"&&define.amd){define(["jquery","tmpl","./jquery.fileupload-image","./jquery.fileupload-audio","./jquery.fileupload-video","./jquery.fileupload-validate"],c)}else{c(window.jQuery,window.tmpl)}}(function(c,d){c.blueimp.fileupload.prototype._specialOptions.push("filesContainer","uploadTemplateId","downloadTemplateId");c.widget("blueimp.fileupload",c.blueimp.fileupload,{options:{autoUpload:false,uploadTemplateId:"template-upload",downloadTemplateId:"template-download",filesContainer:undefined,prependFiles:false,dataType:"json",getNumberOfFiles:function(){return this.filesContainer.children().not(".processing").length},getFilesFromResponse:function(a){if(a.result&&c.isArray(a.result.files)){return a.result.files}return[]},add:function(a,i){if(a.isDefaultPrevented()){return false}var e=c(this),j=e.data("blueimp-fileupload")||e.data("fileupload"),k=j.options;i.context=j._renderUpload(i.files).data("data",i).addClass("processing");k.filesContainer[k.prependFiles?"prepend":"append"](i.context);j._forceReflow(i.context);j._transition(i.context);i.process(function(){return e.fileupload("process",i)}).always(function(){i.context.each(function(f){c(this).find(".size").text(j._formatFileSize(i.files[f].size))}).removeClass("processing");j._renderPreviews(i)}).done(function(){i.context.find(".start").prop("disabled",false);if((j._trigger("added",a,i)!==false)&&(k.autoUpload||i.autoUpload)&&i.autoUpload!==false){i.submit()}}).fail(function(){if(i.files.error){i.context.each(function(f){var g=i.files[f].error;if(g){c(this).find(".error").text(g)}})}})},send:function(a,e){if(a.isDefaultPrevented()){return false}var g=c(this).data("blueimp-fileupload")||c(this).data("fileupload");if(e.context&&e.dataType&&e.dataType.substr(0,6)==="iframe"){e.context.find(".progress").addClass(!c.support.transition&&"progress-animated").attr("aria-valuenow",100).children().first().css("width","100%")}return g._trigger("sent",a,e)},done:function(a,e){if(a.isDefaultPrevented()){return false}var k=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),n=e.getFilesFromResponse||k.options.getFilesFromResponse,l=n(e),m,o;if(e.context){e.context.each(function(g){var f=l[g]||{error:"Empty file upload result"};o=k._addFinishedDeferreds();k._transition(c(this)).done(function(){var h=c(this);m=k._renderDownload([f]).replaceAll(h);k._forceReflow(m);k._transition(m).done(function(){e.context=c(this);k._trigger("completed",a,e);k._trigger("finished",a,e);o.resolve()})})})}else{m=k._renderDownload(l)[k.options.prependFiles?"prependTo":"appendTo"](k.options.filesContainer);k._forceReflow(m);o=k._addFinishedDeferreds();k._transition(m).done(function(){e.context=c(this);k._trigger("completed",a,e);k._trigger("finished",a,e);o.resolve()})}},fail:function(a,e){if(a.isDefaultPrevented()){return false}var i=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),j,k;if(e.context){e.context.each(function(g){if(e.errorThrown!=="abort"){var f=e.files[g];f.error=f.error||e.errorThrown||true;k=i._addFinishedDeferreds();i._transition(c(this)).done(function(){var h=c(this);j=i._renderDownload([f]).replaceAll(h);i._forceReflow(j);i._transition(j).done(function(){e.context=c(this);i._trigger("failed",a,e);i._trigger("finished",a,e);k.resolve()})})}else{k=i._addFinishedDeferreds();i._transition(c(this)).done(function(){c(this).remove();i._trigger("failed",a,e);i._trigger("finished",a,e);k.resolve()})}})}else{if(e.errorThrown!=="abort"){e.context=i._renderUpload(e.files)[i.options.prependFiles?"prependTo":"appendTo"](i.options.filesContainer).data("data",e);i._forceReflow(e.context);k=i._addFinishedDeferreds();i._transition(e.context).done(function(){e.context=c(this);i._trigger("failed",a,e);i._trigger("finished",a,e);k.resolve()})}else{i._trigger("failed",a,e);i._trigger("finished",a,e);i._addFinishedDeferreds().resolve()}}},progress:function(a,e){if(a.isDefaultPrevented()){return false}var g=Math.floor(e.loaded/e.total*100);if(e.context){e.context.each(function(){c(this).find(".progress").attr("aria-valuenow",g).children().first().css("width",g+"%")})}},progressall:function(e,k){if(e.isDefaultPrevented()){return false}var j=c(this),l=Math.floor(k.loaded/k.total*100),m=j.find(".fileupload-progress"),a=m.find(".progress-extended");if(a.length){a.html((j.data("blueimp-fileupload")||j.data("fileupload"))._renderExtendedProgress(k))}m.find(".progress").attr("aria-valuenow",l).children().first().css("width",l+"%")},start:function(a){if(a.isDefaultPrevented()){return false}var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload");e._resetFinishedDeferreds();e._transition(c(this).find(".fileupload-progress")).done(function(){e._trigger("started",a)})},stop:function(a){if(a.isDefaultPrevented()){return false}var e=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),g=e._addFinishedDeferreds();c.when.apply(c,e._getFinishedDeferreds()).done(function(){e._trigger("stopped",a)});e._transition(c(this).find(".fileupload-progress")).done(function(){c(this).find(".progress").attr("aria-valuenow","0").children().first().css("width","0%");c(this).find(".progress-extended").html("&nbsp;");g.resolve()})},processstart:function(a){if(a.isDefaultPrevented()){return false}c(this).addClass("fileupload-processing")},processstop:function(a){if(a.isDefaultPrevented()){return false}c(this).removeClass("fileupload-processing")},destroy:function(e,h){if(e.isDefaultPrevented()){return false}var i=c(this).data("blueimp-fileupload")||c(this).data("fileupload"),a=function(){i._transition(h.context).done(function(){c(this).remove();i._trigger("destroyed",e,h)})};if(h.url){h.dataType=h.dataType||i.options.dataType;c.ajax(h).done(a).fail(function(){i._trigger("destroyfailed",e,h)})}else{a()}}},_resetFinishedDeferreds:function(){this._finishedUploads=[]},_addFinishedDeferreds:function(a){if(!a){a=c.Deferred()}this._finishedUploads.push(a);return a},_getFinishedDeferreds:function(){return this._finishedUploads},_enableDragToDesktop:function(){var a=c(this),h=a.prop("href"),i=a.prop("download"),g="application/octet-stream";a.bind("dragstart",function(f){try{f.originalEvent.dataTransfer.setData("DownloadURL",[g,i,h].join(":"))}catch(e){}})},_formatFileSize:function(a){if(typeof a!=="number"){return""}if(a>=1000000000){return(a/1000000000).toFixed(2)+" GB"}if(a>=1000000){return(a/1000000).toFixed(2)+" MB"}return(a/1000).toFixed(2)+" KB"},_formatBitrate:function(a){if(typeof a!=="number"){return""}if(a>=1000000000){return(a/1000000000).toFixed(2)+" Gbit/s"}if(a>=1000000){return(a/1000000).toFixed(2)+" Mbit/s"}if(a>=1000){return(a/1000).toFixed(2)+" kbit/s"}return a.toFixed(2)+" bit/s"},_formatTime:function(f){var g=new Date(f*1000),a=Math.floor(f/86400);a=a?a+"d ":"";return a+("0"+g.getUTCHours()).slice(-2)+":"+("0"+g.getUTCMinutes()).slice(-2)+":"+("0"+g.getUTCSeconds()).slice(-2)},_formatPercentage:function(a){return(a*100).toFixed(2)+" %"},_renderExtendedProgress:function(a){return this._formatBitrate(a.bitrate)+" | "+this._formatTime((a.total-a.loaded)*8/a.bitrate)+" | "+this._formatPercentage(a.loaded/a.total)+" | "+this._formatFileSize(a.loaded)+" / "+this._formatFileSize(a.total)},_renderTemplate:function(a,f){if(!a){return c()}var g=a({files:f,formatFileSize:this._formatFileSize,options:this.options});if(g instanceof c){return g}return c(this.options.templatesContainer).html(g).children()},_renderPreviews:function(a){a.context.find(".preview").each(function(g,f){c(f).append(a.files[g].preview)})},_renderUpload:function(a){return this._renderTemplate(this.options.uploadTemplate,a)},_renderDownload:function(a){return this._renderTemplate(this.options.downloadTemplate,a).find("a[download]").each(this._enableDragToDesktop).end()},_startHandler:function(a){a.preventDefault();var i=c(a.currentTarget),h=i.closest(".template-upload"),e=h.data("data");i.prop("disabled",true);if(e&&e.submit){e.submit()}},_cancelHandler:function(a){a.preventDefault();var g=c(a.currentTarget).closest(".template-upload,.template-download"),e=g.data("data")||{};e.context=e.context||g;if(e.abort){e.abort()}else{e.errorThrown="abort";this._trigger("fail",a,e)}},_deleteHandler:function(a){a.preventDefault();var e=c(a.currentTarget);this._trigger("destroy",a,c.extend({context:e.closest(".template-download"),type:"DELETE"},e.data()))},_forceReflow:function(a){return c.support.transition&&a.length&&a[0].offsetWidth},_transition:function(a){var e=c.Deferred();if(c.support.transition&&a.hasClass("fade")&&a.is(":visible")){a.bind(c.support.transition.end,function(g){if(g.target===a[0]){a.unbind(c.support.transition.end);e.resolveWith(a)}}).toggleClass("in")}else{a.toggleClass("in");e.resolveWith(a)}return e},_initButtonBarEventHandlers:function(){var e=this.element.find(".fileupload-buttonbar"),a=this.options.filesContainer;this._on(e.find(".start"),{click:function(g){g.preventDefault();a.find(".start").click()}});this._on(e.find(".cancel"),{click:function(g){g.preventDefault();a.find(".cancel").click()}});this._on(e.find(".delete"),{click:function(g){g.preventDefault();a.find(".toggle:checked").closest(".template-download").find(".delete").click();e.find(".toggle").prop("checked",false)}});this._on(e.find(".toggle"),{change:function(g){a.find(".toggle").prop("checked",c(g.currentTarget).is(":checked"))}})},_destroyButtonBarEventHandlers:function(){this._off(this.element.find(".fileupload-buttonbar").find(".start, .cancel, .delete"),"click");this._off(this.element.find(".fileupload-buttonbar .toggle"),"change.")},_initEventHandlers:function(){this._super();this._on(this.options.filesContainer,{"click .start":this._startHandler,"click .cancel":this._cancelHandler,"click .delete":this._deleteHandler});this._initButtonBarEventHandlers()},_destroyEventHandlers:function(){this._destroyButtonBarEventHandlers();this._off(this.options.filesContainer,"click");this._super()},_enableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",false).parent().removeClass("disabled")},_disableFileInputButton:function(){this.element.find(".fileinput-button input").prop("disabled",true).parent().addClass("disabled")},_initTemplates:function(){var a=this.options;a.templatesContainer=this.document[0].createElement(a.filesContainer.prop("nodeName"));if(d){if(a.uploadTemplateId){a.uploadTemplate=d(a.uploadTemplateId)}if(a.downloadTemplateId){a.downloadTemplate=d(a.downloadTemplateId)}}},_initFilesContainer:function(){var a=this.options;if(a.filesContainer===undefined){a.filesContainer=this.element.find(".files")}else{if(!(a.filesContainer instanceof c)){a.filesContainer=c(a.filesContainer)}}},_initSpecialOptions:function(){this._super();this._initFilesContainer();this._initTemplates()},_create:function(){this._super();this._resetFinishedDeferreds();if(!c.support.fileInput){this._disableFileInputButton()}},enable:function(){var a=false;if(this.options.disabled){a=true}this._super();if(a){this.element.find("input, button").prop("disabled",false);this._enableFileInputButton()}},disable:function(){if(!this.options.disabled){this.element.find("input, button").prop("disabled",true);this._disableFileInputButton()}this._super()}})}));
/*!
 * =====================================================
 * AWS附件上传通用库文件
 * v1.0 (http://www.actionsoft.com.cn)
 * 发布后文件名：aws.upfile.js
 * =====================================================
 */
function __awsui_upfile_handler(e,a,d){var c=$("#"+e).parent().data("upfile-opts");var f=c[a];if(f!=null){if(a=="complete"){f()}else{return f.apply(c,d)}}}(function(c){var d=false;var a=navigator.userAgent.toLowerCase();if(a.indexOf("msie 8")>-1||a.indexOf("msie 9")>-1){d=true}var e=function(){var h=document.URL;var g="uf";if(h&&h.indexOf("/r/")!=-1){g=h.substring(0,h.indexOf("/r/"))+"/r/uf"}var f=g+"?";return f};c.fn.upfile=function(j){if(d){if("close"==j){c(this).find("div[t_upfile]").remove();c(this).removeData("upfile-instance");return}if(c(this).data("upfile-instance")!=null){return}}var t=c(this);var f=j||{};var n=j.sid,u=j.groupValue,P=j.fileValue,I=j.repositoryName;var R=false;var B=5*1024*1024;if(j.maxFileSize!=null||j.sizeLimit!=null){B=j.maxFileSize||j.sizeLimit}AWSFile.sizelimit=B;var y="[]";if(j.filter!=null||j.filesToFilter!=null){y=j.filter||j.filesToFilter;if(jQuery.isArray(y)){y=awsui.encode(y)}}if(j.isShowProgress&&j.isShowProgress==true){R=true;AWSFile.initProgress()}var k=j.appId;var L=0;if(j.numLimit!=null||j.maxUpLength!=null){L=j.numLimit||j.maxUpLength}if(j.filesToFilter){var m;try{m=j.filesToFilter[0][1]}catch(M){}}var A=0;var G="";if(d){if(c(this).attr("id")!=undefined){G="upfile_"+c(this).attr("id")}else{G="upfile_"+c("embed").length}var g={sizeLimit:B,filter:y,numLimit:L,url:e()+"appId="+j.appId+"&sid="+n+"&groupValue="+u+"&fileValue="+P+"&repositoryName="+I,eId:G};var O=j.complete;var F=j.progress;var D=j.done;var C=j.add;j.add=function(V,w){AWSFile.currentLoading_t=0;AWSFile.currentLoading_t_progress=1;A=0;var T=c("#"+j.fileDomId).val();if(T){A=T.split("@@@@").length}var X={};var h=new Array();var U=arguments[0].length;if(U>0){for(var S=0;S<U;S++){var p={};p.name=arguments[0][S]["fileName"];p.type=arguments[0][S]["fileType"];p.size=arguments[0][S]["fileSize"];h.push(p)}}X.files=h;X.originalFiles=h;var W=AWSFile.addCallbackFn(C,X,j,A);if(W){c.simpleAlert(正在上传请稍候,"loading",{model:true})}return W};j.progress=function(T,S){var p={};var w=new Array();if(arguments!=null){var h={};h.name=arguments[0];w.push(h)}p.files=w;p.loaded=arguments[1];p.total=arguments[2];AWSFile.progressCallbackFn(F,p,R)},j.done=function(V,U){c.simpleAlert("close");var h=false;if(arguments.length>3&&arguments[3]!=null){try{var w=awsui.decode(arguments[3]);if(w.data.result!=="ok"){h=true}if(h&&j.error!=null){j.error.apply(t,arguments)}}catch(V){alert(V)}}if(!h){var S={};var T=new Array();if(arguments!=null){var p={};p.name=arguments[0];p.type=arguments[2];p.size=arguments[1];T.push(p)}S.files=T;var w=awsui.decode(arguments[3]);S.result=w;AWSFile.doneCallbackFn(D,j,S)}};j.complete=function(p,h){c.simpleAlert("close");c(".ph_loaded").html(100+"%");c(".inner_mask").css("width",100+"%");c.simpleAlert(上传成功,"ok",2000);if(O!=null){O.apply(t,arguments)}else{AWSFile.completeCallbackFn(R)}};var s="upfile"+G;var l="../commons/js/jquery/scripts/ui/upfile/FileUpload.swf";htmls="";htmls+='<div id="'+s+'" style="position :absolute;top:0px;left:0px;">';htmls+='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%" id="'+G+'">';htmls+='<param name="movie" value="'+l+'" />';htmls+='<param name="quality" value="high" />';htmls+='<param name="allowScriptAccess" value="sameDomain" />';htmls+='<param name="allowFullScreen" value="true" />';htmls+='<param name="wmode" value="transparent" />';htmls+='<param name="flashvars" value="'+c.param(g)+'" />';htmls+='<embed id="'+G+'" name="'+G+'" wmode="transparent" allowScriptAccess="sameDomain" allowNetworking ="all" quality="high" width="100%" height="100%" src="'+l;htmls+='" type="application/x-shockwave-flash" pluginspage="http://www.adobe.com/cn/products/flashplayer" flashvars="'+c.param(g)+'">';htmls+="</embed>";htmls+="</object>";htmls+="</div>";c(this).css("position","relative");var x=c(this).actual("outerWidth");var K=c(this).actual("outerHeight");var N=c(htmls).appendTo(c(this));c(this).data("upfile-instance",N);N.data("upfile-opts",j);N.width(x);N.height(K)}else{G="upfile_"+c("input[type='file'][id^=upfile]").length;var z="";var i="";if(j.filesToFilter){var H=j.filesToFilter[0][1];if(H){var J=H.split(";").join(",");J=J.replace(/\*/g,"");if(J.length>0){if(J.indexOf(".xls,")>-1){J=J.replace(".xls,","application/vnd.ms-excel,")}if(J.indexOf(".xlsx,")>-1){J=J.replace(".xlsx,","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,")}if(J.indexOf(".doc,")>-1){J=J.replace(".doc,","application/msword,")}if(J.indexOf(".docx,")>-1){J=J.replace(".docx,","application/vnd.openxmlformats-officedocument.wordprocessingml.document,")}if(J.indexOf(".ppt,")>-1){J=J.replace(".ppt,","application/vnd.ms-powerpoint,")}if(J.indexOf(".pptx,")>-1){J=J.replace(".pptx,","application/vnd.openxmlformats-officedocument.presentationml.presentation,")}}i="accept='"+J+"'"}}z="<input type='file' style='display:none;' id='"+G+"' "+(L==1?"":"multiple='multiple' ")+i+">";c(z).insertAfter(c(this));var l=encodeURI(e()+"appId="+j.appId+"&sid="+n+"&groupValue="+u+"&fileValue="+P+"&repositoryName="+I);var q={appId:j.appId,sid:n,groupValue:u,fileValue:P,repositoryName:I};var v=0;var Q={url:l,autoUpload:true,dataType:"json",fileInput:c("#"+G),paramName:q,add:function(S,w){A=0;var h=c("#"+j.fileDomId).val();if(h){A=h.split("@@@@").length}var p=AWSFile.addCallbackFn(j.add,w,j,A);if(p){w.submit();if(v==0){c.simpleAlert(正在上传请稍候,"loading",{model:true})}v++}},progress:function(p,h){AWSFile.progressCallbackFn(j.progress,h,R)},complete:function(p,h){if(j.complete){j.complete(p,h)}else{AWSFile.completeCallbackFn(R)}},done:function(p,h){v--;if(v==0){c.simpleAlert("close")}AWSFile.doneCallbackFn(j.done,j,h)},error:function(p,h){}};c("#"+G).on("click",function(){c("#"+G).fileupload(Q);c("#"+G).off("click")});var E=c("#isMobile").val();var o="click";if(E=="true"){o="tap"}c(this).off(o).on(o,function(){if(c(this).hasClass("disable")){return}c("#"+G).trigger("click");AWSFile.currentLoading_t=0;AWSFile.currentLoading_t_progress=1;return false})}}})(jQuery);var AWSFile={currentLoading_t:0,currentLoading_t_progress:1,sizelimit:0,addCallbackFn:function(a,g,m,l){var h=this;var j;var k=true;if(a){var c=a(j,g);if(c==false){k=false}}else{if(m.numLimit!=0&&m.numLimit<l+g.originalFiles.length){$.simpleAlert(上传文件总数不允许超过+m.numLimit,"info");k=false}if(g.originalFiles.length>0){$.each(g.originalFiles,function(e,n){if(n.size>0){if(m.sizeLimit!=0&&m.sizeLimit<n.size){k=false;var o=h.formatSize(m.sizeLimit);o=o.replace(".00","");$.simpleAlert(文件大小不允许超过+o,"info",2000);return false}}else{k=false;$.simpleAlert(空文件不能上传,"info",2000);return false}})}var d="";if(m.filesToFilter){var i=m.filesToFilter[0][1];if(i){var f=i.split(";").join(",");d=f.replace(/\*/g,"")}}if(k){$.each(g.files,function(o,p){d=d.toLowerCase();if(d.length>0){var q=p.name.lastIndexOf(".");if(q==-1){k=false;$.simpleAlert(文件类型不正确,"info",2000);return false}var n=p.name.substring(q,p.name.length);n=n.toLowerCase();if((d+",").indexOf(n+",")==-1){k=false;$.simpleAlert(文件类型不正确,"info",2000);return false}}if(p.size>0){try{if(m.isShowProgress){AWSFile.upfileAddCallBackFun(p.name,p.type,p.size)}}catch(s){}}})}}return k},progressCallbackFn:function(a,d,c){var f;if(a){a(f,d)}else{$.each(d.files,function(g,h){try{if(c){AWSFile.upfileProgressCallBackFun(h.name,d.loaded,d.total)}}catch(i){}})}},doneCallbackFn:function(d,c,f){var g;if(d){d(g,f)}else{var a=$("#"+c.fileDomId).val();$.each(f.files,function(e,h){a=a+"@@@@"+h.name;if(c.saveFile){c.saveFile(h.name,h.size,c.fileDomId,c.boId,c.groupValue,c.fileValue,c.repositoryName)}});if(a.startWith("@@@@")){a=a.substring(4,a.length)}$("#"+c.fileDomId).val(a)}if(c.isShowProgress){}},completeCallbackFn:function(a){$.simpleAlert(上传成功,"ok",2000);if(a){setTimeout(function(){$(".progress_wrap").animate({height:"0px"},"fast",function(){$(".dlg_hd .min").removeClass("min").addClass("max")})},"2000")}},initProgress:function(){if(!($("div").hasClass("dlg_hd"))){progressFile="";progressFile+='<div class="box">';progressFile+='<div class="dlg_hd"><font style="font-size:16px;">'+上传状态+'</font>  <h3><a href="javascript:void();" class="min zom"></a><a href="#" class="progress_close"></a></h3></div>';progressFile+='<div class="progress_wrap"><div class="progress_header clearfix">';progressFile+='<div class="progress_title">'+标题+'</div><div class="progress_size">'+大小+"</div>";progressFile+='<div class="progress_loaded">'+进度+'</div><div class="progress_content"></div></div></div></div>';$(progressFile).appendTo("body")}},upfileAddCallBackFun:function(a,d,c){AWSFile.currentLoading_t++;if($(".box").is(":visible")==false){$(".box").slideToggle("fast",function(){});$(".dlg_hd .zom").off("click").on("click",function(){if($(this).hasClass("min")){$(".progress_wrap").animate({height:"0px"},"fast",function(){$(".dlg_hd .min").removeClass("min").addClass("max")});return false}else{$(".progress_wrap").animate({height:"170px"},"fast",function(){$(".dlg_hd .max").removeClass("max").addClass("min")});return false}});$(".dlg_hd .progress_close").off("click").on("click",function(){AWSFile.currentLoading_t=0;AWSFile.currentLoading_t_progress=1;$(".box").hide();$(".progress_content").empty();return false})}else{$(".progress_wrap").animate({height:"170px"},"fast",function(){$(".dlg_hd .max").removeClass("max").addClass("min")})}if(AWSFile.currentLoading_t==1){$(".progress_content").empty()}var e=$("<div class='p_item' t="+AWSFile.currentLoading_t+"><div class='inner_mask'></div><div class='inner_result'><div class='ph_title'></div><div class='ph_size'></div><div class='ph_loaded'></div></div>");$(".progress_content").append(e);return true},upfileProgressCallBackFun:function(a,e,d){if(a!=""&&a!=null&&a!=undefined){var c=(e/d)*100;$(".p_item[t="+AWSFile.currentLoading_t_progress+"]").find(".ph_title").html(a);$(".p_item[t="+AWSFile.currentLoading_t_progress+"]").find(".ph_size").html(AWSFile.formatSize(d));$(".p_item[t="+AWSFile.currentLoading_t_progress+"]").find(".ph_loaded").html(Math.floor(c)+"%");$(".p_item[t="+AWSFile.currentLoading_t_progress+"]").find(".inner_mask").css("width",c+"%");if(e==d){AWSFile.currentLoading_t_progress++}}},formatSize:function formatSize(d){if(d=="0"){return"-"}d=parseFloat(d);var a=["B","KB","MB","GB","TB","PB","EB","ZB","YB","BB"];var e=1024;var c=0;while(true){if(d>=1024){d=parseFloat(d/e).toFixed(2);c++}else{break}}return d+a[c]},removeFile:function(d,e,g,c,f){var a=$("#isMobile").val();awsui.MessageBox.confirm(提示,确定要删除吗文件名+f,function(){AWSFile.removeFileAjax(d,e,g,c,f)})},removeFileAjax:function(d,e,g,a,f){var c=this;awsui.ajax.request({url:"./jd",method:"POST",alert:false,data:{sid:$("#sid").val(),cmd:"CLIENT_UI_FILE_ROVEME",uuId:d,appId:e,fileName:f,boDefId:g,boItemName:a},success:function(i){if(i.result=="ok"){$.simpleAlert(i.msg,i.result);$("#"+d).remove();var j=$("#"+a).val();var h="@@@@";if(j.indexOf(h)>-1){if(j.endWith(f)){j=j.replace(h+f,"")}else{j=j.replace(f+h,"")}}else{j=""}$("#"+a).val(j);if(c.removeComplete){c.removeComplete()}}else{$.simpleAlert(i.msg,i.result)}}})},addComment:function(d,e,c,a){if(!$("#"+e).parent().is("body")){$(document.body).append($("#"+e))}$("#"+e).popbox({target:$("#img_"+e),height:100});$("#"+c).off("blur").on("blur",function(){if(!a){var f=$(this).val();awsui.ajax.request({url:"./jd",method:"POST",data:{sid:$("#sid").val(),cmd:"CLIENT_UI_FILE_SAVE_COMMENT",uuId:d,remark:f},success:function(g){if(awsui.ajax.ok(g)){$("#"+c).val(f)}}})}})},officeFilePreview:function(d,i,e,l,n,j,f,g,k,m){var a="";var c=$("#sid").val();var h={downloadUrl:d,appId:n,repositoryName:l,groupValue:JSON.stringify(e),fileValue:j,fileName:i,editType:f,copyType:g,printType:k,localType:m,showHandToolbar:0,documentHeight:"95%"};a="./w?sid="+c+"&cmd=com.actionsoft.apps.formui.iweboffice_view_online&"+$.param(h);window.open(a)},addWaterMark:function(e,j,i,c,g,h){if(!h){var d=$("#sid").val();var f={sid:d,uuId:e,appId:j,fileName:g,boDefId:i,boItemName:c};var a="./jd?cmd=CLIENT_UI_FILE_ADD_WATERMARK";awsui.ajax.post(a,f,function(l){if(l.result=="ok"){var k=l.data["pictureLogoThumDownLoadUrl"];$("#img_"+e).attr("src",k+"&v="+new Date().getTime());$("#preview_a_"+e).attr("href",k);if($("#isMobile").val()!="true"){$("a[rel=fancyboxgrouppreview]").fancybox({transitionIn:"none",transitionOut:"none",titlePosition:"over",showNavArrows:"true"});$.simpleAlert(水印添加成功,"info")}}else{$.simpleAlert(l.msg,l.result)}},"json")}else{}},compressFile:function(e,k,j,c,h,i){if(!i){var f=$("#compresswidth_"+e).val();var d=$("#sid").val();var g={sid:d,uuId:e,appId:k,fileName:h,boDefId:j,boItemName:c,compressWidth:f};var a="./jd?cmd=CLIENT_UI_FILE_COMPRESS_FILE";awsui.ajax.post(a,g,function(m){if(m.result=="ok"){var l=m.data["pictureLogoThumDownLoadUrl"];$("#img_"+e).attr("src",l+"&v="+new Date().getTime());$("#preview_a_"+e).attr("href",l);if($("#isMobile").val()!="true"){$("a[rel=fancyboxgrouppreview]").fancybox({transitionIn:"none",transitionOut:"none",titlePosition:"over",showNavArrows:"true"});$.simpleAlert(图片压缩成功,"info")}}else{$.simpleAlert(m.msg,m.result)}},"json")}else{}},fileAuth:function(c){var a="./w?sid="+$("#sid").val()+"&cmd=CLIENT_COMMON_AC_ACTION_OPEN&resourceId="+c+"&resourceType=portal.uifile";FrmDialog.open({title:"AC授权",width:750,height:400,url:a,id:"addFileAC",buttons:[{text:"确定",cls:"blue",handler:function(){FrmDialog.win().saveAC()}},{text:"关闭",handler:function(){FrmDialog.close()}}]})}};function confirmDialog(d,c,f){var e="popupDialog";$('<div data-role="popup" id="'+e+'" data-confirmed="no" data-transition="pop" data-overlay-theme="a" data-theme="a" data-dismissible="false" style="max-width:500px;"> <div data-role="header" data-theme="a"><h1>'+d+'</h1></div><div role="main" class="ui-content"><h3 class="ui-title">'+d+"</h3>"+c+'<br><a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b optionConfirm" data-rel="back">Yes</a><a href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-btn-b optionCancel" data-rel="back" data-transition="flow">No</a></div></div>').appendTo($.mobile.pageContainer);var a=$("#"+e);a.trigger("create");a.popup({afterclose:function(h,i){a.find(".optionConfirm").first().off("click");var g=a.attr("data-confirmed")==="yes"?true:false;$(h.target).remove();if(g&&f){f()}}});a.popup("open");a.find(".optionConfirm").first().on("click",function(){a.attr("data-confirmed","yes")})}
/*!
 * 注意awsui.combobox_old已经被新的替代，但是为了兼容awsui.userinput插件，所以保留代码至此，使用压缩处理
 * 
 * AWS UI Combobox
 * jQuery verson 1.10.2
 * author chengy
 * 2013年10月23日19:13:42
 * 
 * 该插件已经作废
 * 
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.widget.js
 */
(function(e,d){var f=0;e.widget("awsui.combobox_old",{version:"1.10.3",defaultElement:"<input>",options:{renderTo:null,target:null,autoFocus:true,hiddenName:null,delay:300,minLength:0,trigger:true,triggerClass:"awsui-combobox-trigger",triggerOpenClass:"awsui-combobox-trigger-open",source:null,disabled:false,editable:true,multiple:false,multipleCheck:"awsui-combobox-item-check",multipleUnCheck:"awsui-combobox-item-uncheck",seperator:",",valueField:"value",displayField:"label",change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_initTrigger:function(){if(this.options.trigger!==false){var a=this.element,c=this;this.wrapper=this.element.wrap("<span class='awsui-combobox-wrap'></span>").parent();this.trigger=e('<a href="javaScript:void"  class="'+this.options.triggerClass+'"> </a>').appendTo(this.wrapper).click(function(){c._triggerClick()});var g=this.trigger.outerWidth(true);a.css({width:a.width()-g+4});a.css({"padding-right":g});if(this.options.triggerOpenClass!=null){var c=this;this.element.on("comboboxopen",function(){if(c.trigger!=null){c.trigger.addClass(c.options.triggerOpenClass)}})}}},widget:function(){return this.wrapper||this.element},_isExpanded:function(){return this.list.is(":visible")},_scrollIntoView:function(l){var a,m,k,o,n,c;if(this.list.outerHeight()<this.list.prop("scrollHeight")){a=parseFloat(e.css(this.list[0],"borderTopWidth"))||0;m=parseFloat(e.css(this.list[0],"paddingTop"))||0;k=l.offset().top-this.list.offset().top-a-m;o=this.list.scrollTop();n=this.list.height();c=l.height();if(k<0){this.list.scrollTop(o+k)}else{if(k+c>n){this.list.scrollTop(o+k-n+c)}}}},_initList:function(){var a=this.element;this.list=e("<ul id='"+a.attr("id")+"_menu'>").addClass("awsui-menu").appendTo(this.__renderTo());if(this.options.triggerOpenClass!=null){var c=this;this.list.on("close",function(){if(c.trigger!=null){c.trigger.removeClass(c.options.triggerOpenClass)}})}this._on(this.element,{keyup:function(l){if(this.element.prop("readOnly")){return}var j=e.ui.keyCode;switch(l.keyCode){case j.UP:if(!this._isExpanded()){this.search(null,l);if(this.options.autoFocus){this._menuselect(e("li:last",this.list))}}else{if(e("li:first",this.list)[0]===e("li.active",this.list)[0]){return}if(e("li.active",this.list).length==0){this._menuselect(e("li:last",this.list))}else{this._menuselect(e("li.active",this.list).prev())}}break;case j.DOWN:if(!this._isExpanded()){this.search(null,l);this._menuselect(e("li:first",this.list))}else{if(e("li:last",this.list)[0]===e("li.active",this.list)[0]){return}if(e("li.active",this.list).length==0){this._menuselect(e("li:first",this.list))}else{this._menuselect(e("li.active",this.list).next())}}break;case j.ENTER:case j.NUMPAD_ENTER:var k=e("li.active",this.list);if(this._isExpanded()&&k.length==1){l.preventDefault();var m=k.data("awsui-combobox-item");this._select(k,m)}break;case j.ESCAPE:if(this._isExpanded()){this.close(l);l.preventDefault()}break;default:clearTimeout(this.searching);this.searching=this._delay(function(){if(this.lastQuery!==this._value()){this.selectedItem=null;this.search(null,l)}},this.options.delay);break}}})},_menuselect:function(a){e("li.active",this.list).removeClass("active");a.addClass("active");this._scrollIntoView(a)},_reList:function(o){var p=this;var a=function(g){p._select(e(this),g.data)};var c=this._value();for(var m=0;m<o.length;m++){var i=o[m];i.text=i[this.options.displayField];if(this.options.multiple){i.iconCls=this.options.multipleUnCheck;if(this._isChecked(i[this.options.valueField])){i.iconCls=this.options.multipleCheck}}i.method=a}var n=this.options.target!=null?this.options.target:this.element;this.list.menu({target:n,items:o});if(this.options.autoFocus){this._menuselect(e("li:first",this.list))}},_initState:function(){if(this.options.editable===false){this._setOption("editable",false)}if(this.options.disabled===true){this.disable()}},_initSize:function(){var c=this.list;if(this.options.listHeight!=null){c.css({"max-height":this.options.listHeight,"overflow-y":"auto","overflow-x":"hidden"})}if(this.options.width!=null){this.element.css({width:a})}var a=this.options.target!=null?this.options.target.outerWidth():this.element.outerWidth();var g=this.options.listWidth!=null?this.options.listWidth:a;c.outerWidth(g)},_create:function(){this.element.addClass("awsui-combobox-input").attr("autocomplete","off");if(this.options.hiddenName!=null){this.hiddenField=e("<input type='hidden' id='"+this.options.hiddenName+"' name='"+this.options.hiddenName+"'>").insertBefore(this.element);if(this.element.attr("name")==this.options.hiddenName){this.element.removeAttr("name")}}this._initTrigger();this._initList();this._initSize();this._initSource();this._initData();this._initState();this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_initData:function(){if(this.options.value==null){if(this.options.initData!=null&&e.isArray(this.options.initData)){var a=this;e.each(this.options.initData,function(g,c){a._addItemValue(a._normItem(c))})}}},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("awsui-combobox-input").removeAttr("autocomplete");this.list.element.remove();if(this.trigger){this.trigger.remove()}if(this.hiddenField){this.hiddenField.remove()}},_setOption:function(c,a){this._super(c,a);if(c==="source"){this._initSource()}if(c==="appendTo"){this.list.appendTo(this.__renderTo())}if(c==="editable"){this.element.prop("readOnly",!a);if(a===false){var g=this;this.element.on("mousedown",function(h){if(!g._isExpanded()){h.stopPropagation();g._triggerClick()}})}}if(c==="disabled"){this.element.prop("disabled",a);if(a&&this.xhr){this.xhr.abort()}}},_triggerClick:function(){this.element.focus();if(this._isExpanded()){return}this.search("",null)},_select:function(j,c){var l=this;var k=this._trigger("select",null,{item:j,data:c,value:c[l.options.valueField],oldVal:this._value()});if(k!==false){if(this.options.multiple===true){var m=this._value();var a=j.find(".icon").hasClass(this.options.multipleCheck);if(a){this._deleteItemValue(c);j.find(".icon").removeClass(this.options.multipleCheck).addClass(this.options.multipleUnCheck)}else{this._addItemValue(c);j.find(".icon").removeClass(this.options.multipleUnCheck).addClass(this.options.multipleCheck)}}else{this._addItemValue(c)}this._trigger("selected",null,{item:j,data:c,value:l._value()})}if(this.options.multiple!==true){this._close()}},_addItemValue:function(a){var g=a[this.options.valueField];var c=a[this.options.displayField];if(this.options.multiple===true){c=this._value().length>0?this._value()+this.options.seperator+a[this.options.displayField]:a[this.options.displayField];g=this.option("value")!=null&&this.option("value").length>0?this.option("value")+this.options.seperator+a[this.options.valueField]:a[this.options.valueField]}this._setvalue(g);this._value(c)},_deleteItemValue:function(a){var c=this.value().split(this.options.seperator);var i=this._value().split(this.options.seperator);for(var h=0;h<c.length;h++){if(c[h]==a[this.options.valueField]){c.splice(h,1);i.splice(h,1)}}this._setvalue(c.join(this.options.seperator));this._value(i.join(this.options.seperator))},_setvalue:function(a){this.option("value",a);if(this.hiddenField){this.hiddenField.val(a)}},value:function(){return this.option("value")==null?"":this.option("value")},_initSource:function(){var a,g,c=this;if(e.isArray(this.options.source)){a=this.options.source;this.source=function(i,j){j(c._filter(a,i.term))}}else{if(typeof this.options.source==="string"){g=this.options.source;this.source=function(i,j){if(c.xhr){c.xhr.abort()}c.xhr=e.ajax({url:g,dataType:"json",data:i,success:function(h){if(e.isArray(h)){j(h)}else{console.log("error:combobox data must json array")}},error:function(){j([])}})}}else{this.source=this.options.source}}},search:function(a,g){a=a!=null?a:this._value();this.lastQuery=this._value();if(a.length<this.options.minLength){return this.close(g)}var c={term:a};if(this._trigger("search",g,c)===false){return}this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source(c,this._query())},_query:function(){var a=this,c=++f;return function(g){if(c===f){a._process(g)}a.pending--;if(!a.pending){a.element.removeClass("ui-autocomplete-loading")}}},_isChecked:function(c){var a=this.value();return a!=""&&(this.options.seperator+a+this.options.seperator).indexOf(this.options.seperator+c+this.options.seperator)!=-1},_process:function(a){if(a){a=this._normalize(a)}this._trigger("response",null,{content:a});if(!this.options.disabled&&a&&a.length&&!this.cancelSearch){this._reList(a);this._trigger("open")}else{this._close()}},close:function(a){this.cancelSearch=true;this._close(a)},_close:function(a){this.list.menu("close")},_normItem:function(a){if(typeof a==="string"){return{label:a,value:a}}return e.extend({label:a[this.options.displayField]||a[this.options.valueField],value:a[this.options.valueField]||a[this.options.displayField]},a)},_normalize:function(a){if(a==null&&a==""){a=[]}if(a.length&&a[0][this.options.displayField]&&a[0][this.options.valueField]){return a}return e.map(a,this._normItem)},_value:function(){var a=this.element[0].nodeName.toLowerCase(),c=a==="textarea",i=a==="input";var h=this.element[c||i?"val":"text"];return h.apply(this.element,arguments)},_escapeRegex:function(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},_filter:function(a,h){var c=new RegExp(this._escapeRegex(h),"i");var i=this;return e.grep(a,function(g){return c.test(g[i.options.displayField]||g[i.options.valueField]||g)})},__renderTo:function(){var a=this.options.appendTo;if(a){a=a.jquery||a.nodeType?e(a):this.document.find(a).eq(0)}if(!a){a=this.element.closest(".ui-front")}if(!a.length){a=this.document[0].body}return a}})}(jQuery));
/*!
 * 
 * AWS UI UserInput主函数
 * jQuery verson 1.10.2
 * 
 */
(function(a){a.widget("awsui.userinput",a.awsui.combobox_old,{options:{trigger:false},_initData:function(){this.box=a("<div style='overflow:auto;'></div>").prependTo(this.options.superbox);a.awsui.combobox_old.prototype._initData.call(this);if(this.options.disabled){this.box.find(".close").hide()}},_setOption:function(c,d){this._super(c,d);if(this.box&&c==="disabled"){this.box.find(".close")[d?"hide":"show"]();this.options.superbox[d?"addClass":"removeClass"]("disable")}},_addItemValue:function(g){var c="";if(g.notfind){c="notfind"}var e=a("<span class='awsui-supertext-items "+c+"'><span class='awsui-supertext-item'>"+g[this.options.displayField]+"</span><span class='forms-icon down close'></span></span>").appendTo(this.box);e.data("awsui-supertext-items-data",g);var d=this;e.find(".close").on("click",function(){a(this).parent().fadeOut(function(){d.__r(a(this))})});d._setvalue(d._getvalue());d._trigger("add",null,{label:g[this.options.displayField],v:g.value});var h=this.element;var f=a("#"+h.attr("id")+"_menu");f.css({left:this.options.target.offset().left,top:this.options.target.offset().top+this.options.target.outerHeight(true)});if(this.options.callback!=null){this.options.callback()}},__r:function(e){var c=e.data("awsui-supertext-items-data");e.remove();this._setvalue(this._getvalue());this._trigger("del",null,{label:c[this.options.displayField],v:c.value})},_deleteItemValue:function(e){var c=this;a.each(this.box.find(".awsui-supertext-items"),function(){if(e.value==a(this).data("awsui-supertext-items-data")[c.options.valueField]){a(this).fadeOut(function(){c.__r(a(this))})}});var f=this.element;var d=a("#"+f.attr("id")+"_menu");d.css({left:this.options.target.offset().left,top:this.options.target.offset().top+this.options.target.outerHeight(true)})},_isChecked:function(e){var f=false;var d=this;a.each(this.box.find(".awsui-supertext-items"),function(){if(e==a(this).data("awsui-supertext-items-data")[d.options.valueField]){f=true;return false}});return f},_getvalue:function(){var d="";var c=this;a.each(this.box.find(".awsui-supertext-items"),function(){if(d!=""){d+=c.options.seperator}d+=a(this).data("awsui-supertext-items-data")[c.options.valueField]});return d},_destroy:function(){a.awsui.combobox_old.prototype._destroy.call(this);this.box.remove()}})})(jQuery);
/*!
 * =====================================================
 * Switchery
 * iOS 7 style switches for your checkboxes
 * http://abpetkov.github.io/switchery/
 * =====================================================
 */
(function(){function c(a){var d=c.modules[a];if(!d){throw new Error('failed to require "'+a+'"')}if(!("exports" in d)&&typeof d.definition==="function"){d.client=d.component=true;d.definition.call(this,d.exports={},d);delete d.definition}return d.exports}c.loader="component";c.helper={};c.helper.semVerSort=function(m,n){var t=m.version.split(".");var p=n.version.split(".");for(var q=0;q<t.length;++q){var s=parseInt(t[q],10);var a=parseInt(p[q],10);if(s===a){var i=t[q].substr((""+s).length);var o=p[q].substr((""+a).length);if(i===""&&o!==""){return 1}if(i!==""&&o===""){return -1}if(i!==""&&o!==""){return i>o?1:-1}continue}else{if(s>a){return 1}else{return -1}}}return 0};c.latest=function(x,i){function u(d){throw new Error('failed to find latest module of "'+d+'"')}var y=/(.*)~(.*)@v?(\d+\.\d+\.\d+[^\/]*)$/;var a=/(.*)~(.*)/;if(!a.test(x)){u(x)}var t=Object.keys(c.modules);var q=[];var v=[];for(var s=0;s<t.length;s++){var z=t[s];if(new RegExp(x+"@").test(z)){var p=z.substr(x.length+1);var A=y.exec(z);if(A!=null){q.push({version:p,name:z})}else{v.push({version:p,name:z})}}}if(q.concat(v).length===0){u(x)}if(q.length>0){var w=q.sort(c.helper.semVerSort).pop().name;if(i===true){return w}return c(w)}var w=v.pop().name;if(i===true){return w}return c(w)};c.modules={};c.register=function(a,d){c.modules[a]={definition:d}};c.define=function(d,a){c.modules[d]={exports:a}};c.register("abpetkov~transitionize@0.0.3",function(a,f){f.exports=e;function e(g,d){if(!(this instanceof e)){return new e(g,d)}this.element=g;this.props=d||{};this.init()}e.prototype.isSafari=function(){return(/Safari/).test(navigator.userAgent)&&(/Apple Computer/).test(navigator.vendor)};e.prototype.init=function(){var d=[];for(var g in this.props){d.push(g+" "+this.props[g])}this.element.style.transition=d.join(", ");if(this.isSafari()){this.element.style.webkitTransition=d.join(", ")}}});c.register("ftlabs~fastclick@v0.6.11",function(a,f){function e(h){var d,i=this;this.trackingClick=false;this.trackingClickStart=0;this.targetElement=null;this.touchStartX=0;this.touchStartY=0;this.lastTouchIdentifier=0;this.touchBoundary=10;this.layer=h;if(!h||!h.nodeType){throw new TypeError("Layer must be a document node")}this.onClick=function(){return e.prototype.onClick.apply(i,arguments)};this.onMouse=function(){return e.prototype.onMouse.apply(i,arguments)};this.onTouchStart=function(){return e.prototype.onTouchStart.apply(i,arguments)};this.onTouchMove=function(){return e.prototype.onTouchMove.apply(i,arguments)};this.onTouchEnd=function(){return e.prototype.onTouchEnd.apply(i,arguments)};this.onTouchCancel=function(){return e.prototype.onTouchCancel.apply(i,arguments)};if(e.notNeeded(h)){return}if(this.deviceIsAndroid){h.addEventListener("mouseover",this.onMouse,true);h.addEventListener("mousedown",this.onMouse,true);h.addEventListener("mouseup",this.onMouse,true)}h.addEventListener("click",this.onClick,true);h.addEventListener("touchstart",this.onTouchStart,false);h.addEventListener("touchmove",this.onTouchMove,false);h.addEventListener("touchend",this.onTouchEnd,false);h.addEventListener("touchcancel",this.onTouchCancel,false);if(!Event.prototype.stopImmediatePropagation){h.removeEventListener=function(m,g,n){var l=Node.prototype.removeEventListener;if(m==="click"){l.call(h,m,g.hijacked||g,n)}else{l.call(h,m,g,n)}};h.addEventListener=function(l,g,m){var n=Node.prototype.addEventListener;if(l==="click"){n.call(h,l,g.hijacked||(g.hijacked=function(j){if(!j.propagationStopped){g(j)}}),m)}else{n.call(h,l,g,m)}}}if(typeof h.onclick==="function"){d=h.onclick;h.addEventListener("click",function(g){d(g)},false);h.onclick=null}}e.prototype.deviceIsAndroid=navigator.userAgent.indexOf("Android")>0;e.prototype.deviceIsIOS=/iP(ad|hone|od)/.test(navigator.userAgent);e.prototype.deviceIsIOS4=e.prototype.deviceIsIOS&&(/OS 4_\d(_\d)?/).test(navigator.userAgent);e.prototype.deviceIsIOSWithBadTarget=e.prototype.deviceIsIOS&&(/OS ([6-9]|\d{2})_\d/).test(navigator.userAgent);e.prototype.needsClick=function(d){switch(d.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(d.disabled){return true}break;case"input":if((this.deviceIsIOS&&d.type==="file")||d.disabled){return true}break;case"label":case"video":return true}return(/\bneedsclick\b/).test(d.className)};e.prototype.needsFocus=function(d){switch(d.nodeName.toLowerCase()){case"textarea":return true;case"select":return !this.deviceIsAndroid;case"input":switch(d.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return false}return !d.disabled&&!d.readOnly;default:return(/\bneedsfocus\b/).test(d.className)}};e.prototype.sendClick=function(j,i){var k,d;if(document.activeElement&&document.activeElement!==j){document.activeElement.blur()}d=i.changedTouches[0];k=document.createEvent("MouseEvents");k.initMouseEvent(this.determineEventType(j),true,true,window,1,d.screenX,d.screenY,d.clientX,d.clientY,false,false,false,false,0,null);k.forwardedTouchEvent=true;j.dispatchEvent(k)};e.prototype.determineEventType=function(d){if(this.deviceIsAndroid&&d.tagName.toLowerCase()==="select"){return"mousedown"}return"click"};e.prototype.focus=function(g){var d;if(this.deviceIsIOS&&g.setSelectionRange&&g.type.indexOf("date")!==0&&g.type!=="time"){d=g.value.length;g.setSelectionRange(d,d)}else{g.focus()}};e.prototype.updateScrollParent=function(h){var d,i;d=h.fastClickScrollParent;if(!d||!d.contains(h)){i=h;do{if(i.scrollHeight>i.offsetHeight){d=i;h.fastClickScrollParent=i;break}i=i.parentElement}while(i)}if(d){d.fastClickLastScrollTop=d.scrollTop}};e.prototype.getTargetElementFromEventTarget=function(d){if(d.nodeType===Node.TEXT_NODE){return d.parentNode}return d};e.prototype.onTouchStart=function(i){var k,d,j;if(i.targetTouches.length>1){return true}k=this.getTargetElementFromEventTarget(i.target);d=i.targetTouches[0];if(this.deviceIsIOS){j=window.getSelection();if(j.rangeCount&&!j.isCollapsed){return true}if(!this.deviceIsIOS4){if(d.identifier===this.lastTouchIdentifier){i.preventDefault();return false}this.lastTouchIdentifier=d.identifier;this.updateScrollParent(k)}}this.trackingClick=true;this.trackingClickStart=i.timeStamp;this.targetElement=k;this.touchStartX=d.pageX;this.touchStartY=d.pageY;if((i.timeStamp-this.lastClickTime)<200){i.preventDefault()}return true};e.prototype.touchHasMoved=function(i){var d=i.changedTouches[0],h=this.touchBoundary;if(Math.abs(d.pageX-this.touchStartX)>h||Math.abs(d.pageY-this.touchStartY)>h){return true}return false};e.prototype.onTouchMove=function(d){if(!this.trackingClick){return true}if(this.targetElement!==this.getTargetElementFromEventTarget(d.target)||this.touchHasMoved(d)){this.trackingClick=false;this.targetElement=null}return true};e.prototype.findControl=function(d){if(d.control!==undefined){return d.control}if(d.htmlFor){return document.getElementById(d.htmlFor)}return d.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")};e.prototype.onTouchEnd=function(o){var m,n,p,d,l,q=this.targetElement;if(!this.trackingClick){return true}if((o.timeStamp-this.lastClickTime)<200){this.cancelNextClick=true;return true}this.cancelNextClick=false;this.lastClickTime=o.timeStamp;n=this.trackingClickStart;this.trackingClick=false;this.trackingClickStart=0;if(this.deviceIsIOSWithBadTarget){l=o.changedTouches[0];q=document.elementFromPoint(l.pageX-window.pageXOffset,l.pageY-window.pageYOffset)||q;q.fastClickScrollParent=this.targetElement.fastClickScrollParent}p=q.tagName.toLowerCase();if(p==="label"){m=this.findControl(q);if(m){this.focus(q);if(this.deviceIsAndroid){return false}q=m}}else{if(this.needsFocus(q)){if((o.timeStamp-n)>100||(this.deviceIsIOS&&window.top!==window&&p==="input")){this.targetElement=null;return false}this.focus(q);if(!this.deviceIsIOS4||p!=="select"){this.targetElement=null;o.preventDefault()}return false}}if(this.deviceIsIOS&&!this.deviceIsIOS4){d=q.fastClickScrollParent;if(d&&d.fastClickLastScrollTop!==d.scrollTop){return true}}if(!this.needsClick(q)){o.preventDefault();this.sendClick(q,o)}return false};e.prototype.onTouchCancel=function(){this.trackingClick=false;this.targetElement=null};e.prototype.onMouse=function(d){if(!this.targetElement){return true}if(d.forwardedTouchEvent){return true}if(!d.cancelable){return true}if(!this.needsClick(this.targetElement)||this.cancelNextClick){if(d.stopImmediatePropagation){d.stopImmediatePropagation()}else{d.propagationStopped=true}d.stopPropagation();d.preventDefault();return false}return true};e.prototype.onClick=function(g){var d;if(this.trackingClick){this.targetElement=null;this.trackingClick=false;return true}if(g.target.type==="submit"&&g.detail===0){return true}d=this.onMouse(g);if(!d){this.targetElement=null}return d};e.prototype.destroy=function(){var d=this.layer;if(this.deviceIsAndroid){d.removeEventListener("mouseover",this.onMouse,true);d.removeEventListener("mousedown",this.onMouse,true);d.removeEventListener("mouseup",this.onMouse,true)}d.removeEventListener("click",this.onClick,true);d.removeEventListener("touchstart",this.onTouchStart,false);d.removeEventListener("touchmove",this.onTouchMove,false);d.removeEventListener("touchend",this.onTouchEnd,false);d.removeEventListener("touchcancel",this.onTouchCancel,false)};e.notNeeded=function(h){var i;var d;if(typeof window.ontouchstart==="undefined"){return true}d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1];if(d){if(e.prototype.deviceIsAndroid){i=document.querySelector("meta[name=viewport]");if(i){if(i.content.indexOf("user-scalable=no")!==-1){return true}if(d>31&&window.innerWidth<=window.screen.width){return true}}}else{return true}}if(h.style.msTouchAction==="none"){return true}return false};e.attach=function(d){return new e(d)};if(typeof define!=="undefined"&&define.amd){define(function(){return e})}else{if(typeof f!=="undefined"&&f.exports){f.exports=e.attach;f.exports.FastClick=e}else{window.FastClick=e}}});c.register("component~indexof@0.0.3",function(a,d){d.exports=function(i,g){if(i.indexOf){return i.indexOf(g)}for(var h=0;h<i.length;++h){if(i[h]===g){return h}}return -1}});c.register("component~classes@1.2.1",function(a,k){var l=c("component~indexof@0.0.3");var j=/\s+/;var i=Object.prototype.toString;k.exports=function(d){return new h(d)};function h(d){if(!d){throw new Error("A DOM element reference is required")}this.el=d;this.list=d.classList}h.prototype.add=function(e){if(this.list){this.list.add(e);return this}var f=this.array();var d=l(f,e);if(!~d){f.push(e)}this.el.className=f.join(" ");return this};h.prototype.remove=function(e){if("[object RegExp]"==i.call(e)){return this.removeMatching(e)}if(this.list){this.list.remove(e);return this}var f=this.array();var d=l(f,e);if(~d){f.splice(d,1)}this.el.className=f.join(" ");return this};h.prototype.removeMatching=function(d){var f=this.array();for(var e=0;e<f.length;e++){if(d.test(f[e])){this.remove(f[e])}}return this};h.prototype.toggle=function(e,d){if(this.list){if("undefined"!==typeof d){if(d!==this.list.toggle(e,d)){this.list.toggle(e)}}else{this.list.toggle(e)}return this}if("undefined"!==typeof d){if(!d){this.remove(e)}else{this.add(e)}}else{if(this.has(e)){this.remove(e)}else{this.add(e)}}return this};h.prototype.array=function(){var d=this.el.className.replace(/^\s+|\s+$/g,"");var e=d.split(j);if(""===e[0]){e.shift()}return e};h.prototype.has=h.prototype.contains=function(d){return this.list?this.list.contains(d):!!~l(this.array(),d)}});c.register("switchery",function(m,k){var n=c("abpetkov~transitionize@0.0.3"),a=c("ftlabs~fastclick@v0.6.11"),l=c("component~classes@1.2.1");k.exports=i;var j={showtextflag:true,color:"#64bd63",secondaryColor:"#dfdfdf",jackColor:"#ffffff",onColor:"#ffffff",offColor:"#000000",className:"switchery",disabled:false,disabledOpacity:0.5,speed:"0.4s",size:"default",ontext:"开",offtext:"关",swwidth:80,swheight:30,fontSize:13};function i(d,f){if(!(this instanceof i)){return new i(d,f)}this.element=d;this.options=f||{};for(var e in j){if(this.options[e]==null){this.options[e]=j[e]}}if(this.element!=null&&this.element.type=="checkbox"){this.init()}}i.prototype.hide=function(){this.element.style.display="none"};i.prototype.show=function(){var d=this.create();this.insertAfter(this.element,d)};i.prototype.create=function(){this.switcher=document.createElement("span");this.jack=document.createElement("small");this.switchtext=document.createElement("span");this.switcher.appendChild(this.jack);this.switcher.appendChild(this.switchtext);this.switcher.className=this.options.className;return this.switcher};i.prototype.insertAfter=function(e,d){e.parentNode.insertBefore(d,e.nextSibling)};i.prototype.isChecked=function(){return this.element.checked};i.prototype.changeStatus=function(d){this.element.checked=d;this.setPosition()};i.prototype.isDisabled=function(){return this.options.disabled||this.element.disabled||this.element.readOnly};i.prototype.setPosition=function(f){var u=this.options.showtextflag;var s=this.options.ontext;var h=this.options.offtext;var d=this.isChecked(),g=this.switcher,t=this.jack;switchtext=this.switchtext;if(f&&d){d=false}else{if(f&&!d){d=true}}if(d===true){this.element.checked=true;if(window.getComputedStyle){t.style.left=parseInt(window.getComputedStyle(g).width)-parseInt(window.getComputedStyle(t).width)+"px"}else{t.style.left=parseInt(g.currentStyle.width)-parseInt(t.currentStyle.width)+"px"}if(u==true){if(hasClass(t.nextSibling,"right")){removeClass(t.nextSibling,"right")}if(!hasClass(t.nextSibling,"left")){addClass(t.nextSibling,"left")}this.jack.nextSibling.innerHTML=s;var v=this.options.onColor;if(v!=""){$(switchtext).css("color",v)}}if(this.options.color){this.colorize()}this.setSpeed()}else{t.style.left=0;this.element.checked=false;this.switcher.style.boxShadow="inset 0 0 0 0 "+this.options.secondaryColor;this.switcher.style.borderColor=this.options.secondaryColor;this.switcher.style.backgroundColor=(this.options.secondaryColor!==j.secondaryColor)?this.options.secondaryColor:"#fff";this.jack.style.backgroundColor=this.options.jackColor;this.setSpeed();if(u==true){if(hasClass(t.nextSibling,"left")){removeClass(t.nextSibling,"left")}if(!hasClass(t.nextSibling,"right")){addClass(t.nextSibling,"right")}this.jack.nextSibling.innerHTML=h;var e=this.options.offColor;if(e!=""){$(switchtext).css("color",e)}}}};i.prototype.setSpeed=function(){var d={},e={left:this.options.speed.replace(/[a-z]/,"")/2+"s"};if(this.isChecked()){d={border:this.options.speed,"box-shadow":this.options.speed,"background-color":this.options.speed.replace(/[a-z]/,"")*3+"s"}}else{d={border:this.options.speed,"box-shadow":this.options.speed}}n(this.switcher,d);n(this.jack,e)};i.prototype.setText=function(){var d=this.options.ontext;var e=this.options.offtext};i.prototype.setSize=function(){var e=this.switcher,h=this.jack;switchtext=this.switchtext;var d=this.options.fontSize;if(d==undefined){d=13}$(switchtext).css("font-size",d+"px");var g=this.options.swwidth;if(g==undefined){g=20}var f=this.options.swheight;if(f==undefined){f=60}$(e).css("width",g+"px");$(e).css("height",f+"px");$(h).css("width",f+"px");$(h).css("height",f+"px");$(switchtext).css("height",f+"px");$(switchtext).css("line-height",f+"px")};i.prototype.colorize=function(){var d=this.switcher.offsetHeight/2;this.switcher.style.backgroundColor=this.options.color;this.switcher.style.borderColor=this.options.color;this.switcher.style.boxShadow="inset 0 0 0 "+d+"px "+this.options.color;this.jack.style.backgroundColor=this.options.jackColor};i.prototype.handleOnchange=function(d){if(document.dispatchEvent){var e=document.createEvent("HTMLEvents");e.initEvent("change",true,true);this.element.dispatchEvent(e)}else{this.element.fireEvent("onchange")}};i.prototype.handleChange=function(){var e=this,d=this.element;if(d.addEventListener){d.addEventListener("change",function(){e.setPosition()})}else{d.attachEvent("onchange",function(){e.setPosition()})}};i.prototype.handleClick=function(){var g=this,d=this.switcher,e=g.element.parentNode.tagName.toLowerCase(),f=(e==="label")?false:true;if(this.isDisabled()===false){a(d);if(d.addEventListener){var h=$("#isMobile").val();var o="click";if(h=="true"){o="tap"}d.addEventListener(o,function(p){g.setPosition(f);g.handleOnchange(g.element.checked)})}else{d.attachEvent("onclick",function(){g.setPosition(f);g.handleOnchange(g.element.checked)})}}else{this.element.disabled=true;this.switcher.style.opacity=this.options.disabledOpacity;this.switcher.style.cursor="default"}};i.prototype.markAsSwitched=function(){this.element.setAttribute("data-switchery",true)};i.prototype.markedAsSwitched=function(){return this.element.getAttribute("data-switchery")};i.prototype.init=function(){this.hide();this.show();this.setSize();this.setPosition();this.markAsSwitched();this.handleChange();this.handleClick()}});if(typeof exports=="object"){module.exports=c("switchery")}else{if(typeof define=="function"&&define.amd){define("Switchery",[],function(){return c("switchery")})}else{(this||window)["Switchery"]=c("switchery")}}})();function hasClass(c,d){return c.className.match(new RegExp("(\\s|^)"+d+"(\\s|$)"))}function addClass(c,d){if(!this.hasClass(c,d)){c.className+=" "+d}}function removeClass(f,e){if(hasClass(f,e)){var d=new RegExp("(\\s|^)"+e+"(\\s|$)");f.className=f.className.replace(d," ")}}function toggleClass(c,d){if(hasClass(c,d)){removeClass(c,d)}else{addClass(c,d)}}
/*!
 * pickadate.js v3.3.1, 2013/12/04
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */
!function(c){"function"==typeof define&&define.amd?define("picker",["jquery"],c):this.Picker=c(jQuery)}(function(e){function d(z,y,x,w){function v(){return d._.node("div",d._.node("div",d._.node("div",d._.node("div",a.component.nodes(t.open),q.box),q.wrap),q.frame),q.holder)}function u(g){g.stopPropagation(),"focus"==g.type&&a.$root.addClass(q.focused),a.open()}if(!z){return d}var t={id:Math.abs(~~(1000000000*Math.random()))},s=x?e.extend(!0,{},x.defaults,w):w||{},q=e.extend({},d.klasses(),s.klass),p=e(z),c=function(){return this.start()},a=c.prototype={constructor:c,$node:p,start:function(){return t&&t.start?a:(t.methods={},t.start=!0,t.open=!1,t.type=z.type,z.autofocus=z==document.activeElement,z.type="text",z.readOnly=!s.editable,a.component=new x(a,s),a.$root=e(d._.node("div",v(),q.picker)).on({focusin:function(g){a.$root.removeClass(q.focused),g.stopPropagation()},"mousedown click":function(g){var h=g.target;h!=a.$root.children()[0]&&(g.stopPropagation(),"mousedown"!=g.type||e(h).is(":input")||(g.preventDefault(),z.focus()))}}).on("click","[data-pick], [data-nav], [data-clear]",function(){var k=e(this),j=k.data(),i=k.hasClass(q.navDisabled)||k.hasClass(q.disabled),h=document.activeElement;h=h&&(h.type||h.href),(i||h&&!e.contains(a.$root[0],h))&&z.focus(),j.nav&&!i?a.set("highlight",a.component.item.highlight,{nav:j.nav}):d._.isInteger(j.pick)&&!i?a.set("select",j.pick).close(!0):j.clear&&a.clear().close(!0)}),s.formatSubmit&&(a._hidden=e('<input type=hidden name="'+("string"==typeof s.hiddenPrefix?s.hiddenPrefix:"")+z.name+("string"==typeof s.hiddenSuffix?s.hiddenSuffix:"_submit")+'"'+(p.data("value")?' value="'+d._.trigger(a.component.formats.toString,a.component,[s.formatSubmit,a.component.item.select])+'"':"")+">")[0]),p.data(y,a).addClass(q.input).val(p.data("value")?d._.trigger(a.component.formats.toString,a.component,[s.format,a.component.item.select]):z.value).after(a._hidden).on("focus.P"+t.id+" click.P"+t.id,u).on("change.P"+t.id,function(){a._hidden&&(a._hidden.value=z.value?d._.trigger(a.component.formats.toString,a.component,[s.formatSubmit,a.component.item.select]):"")}),s.editable||p.on("keydown.P"+t.id,function(h){var g=h.keyCode,i=/^(8|46)$/.test(g);return 27==g?(a.close(),!1):((32==g||i||!t.open&&a.component.key[g])&&(h.preventDefault(),h.stopPropagation(),i?a.clear().close():a.open()),void 0)}),s.container?e(s.container).append(a.$root):p.after(a.$root),a.on({start:a.component.onStart,render:a.component.onRender,stop:a.component.onStop,open:a.component.onOpen,close:a.component.onClose,set:a.component.onSet}).on({start:s.onStart,render:s.onRender,stop:s.onStop,open:s.onOpen,close:s.onClose,set:s.onSet}),z.autofocus&&a.open(),a.trigger("start").trigger("render"))},render:function(g){return g?a.$root.html(v()):a.$root.find("."+q.box).html(a.component.nodes(t.open)),a.trigger("render")},stop:function(){return t.start?(a.close(),a._hidden&&a._hidden.parentNode.removeChild(a._hidden),a.$root.remove(),p.removeClass(q.input).off(".P"+t.id).removeData(y),z.type=t.type,z.readOnly=!1,a.trigger("stop"),t.methods={},t.start=!1,a):a},open:function(g){return t.open?a:(p.addClass(q.active),a.$root.addClass(q.opened),g!==!1&&(t.open=!0,p.trigger("focus"),f.on("click.P"+t.id+" focusin.P"+t.id,function(i){var h=i.target;h!=z&&h!=document&&a.close(h===a.$root.children()[0])}).on("keydown.P"+t.id,function(k){var j=k.keyCode,i=a.component.key[j],h=k.target;27==j?a.close(!0):h!=z||!i&&13!=j?e.contains(a.$root[0],h)&&13==j&&(k.preventDefault(),h.click()):(k.preventDefault(),i?d._.trigger(a.component.key.go,a,[d._.trigger(i)]):a.$root.find("."+q.highlighted).hasClass(q.disabled)||a.set("select",a.component.item.highlight).close())})),a.trigger("open"))},close:function(g){return g&&(p.off("focus.P"+t.id).trigger("focus"),setTimeout(function(){p.on("focus.P"+t.id,u)},0)),p.removeClass(q.active),a.$root.removeClass(q.opened+" "+q.focused),t.open&&(t.open=!1,f.off(".P"+t.id)),a.trigger("close")},clear:function(){return a.set("clear")},set:function(A,o,n){var m,l,k=e.isPlainObject(A),j=k?A:{};if(n=k&&e.isPlainObject(o)?o:n||{},A){k||(j[A]=o);for(m in j){l=j[m],a.component.item[m]&&a.component.set(m,l,n),("select"==m||"clear"==m)&&p.val("clear"==m?"":d._.trigger(a.component.formats.toString,a.component,[s.format,a.component.get(m)])).trigger("change")}a.render()}return n.muted?a:a.trigger("set",j)},get:function(g,h){return g=g||"value",null!=t[g]?t[g]:"value"==g?z.value:a.component.item[g]?"string"==typeof h?d._.trigger(a.component.formats.toString,a.component,[h,a.component.get(g)]):a.component.get(g):void 0},on:function(h,m){var l,k,j=e.isPlainObject(h),i=j?h:{};if(h){j||(i[h]=m);for(l in i){k=i[l],t.methods[l]=t.methods[l]||[],t.methods[l].push(k)}}return a},trigger:function(g,i){var h=t.methods[g];return h&&h.map(function(j){d._.trigger(j,a,[i])}),a}};return new c}var f=e(document);return d.klasses=function(c){return c=c||"picker",{picker:c,opened:c+"--opened",focused:c+"--focused",input:c+"__input",active:c+"__input--active",holder:c+"__holder",frame:c+"__frame",wrap:c+"__wrap",box:c+"__box"}},d._={group:function(g){for(var j,i="",h=d._.trigger(g.min,g);h<=d._.trigger(g.max,g,[h]);h+=g.i){j=d._.trigger(g.item,g,[h]),i+=d._.node(g.node,j[0],j[1],j[2])}return i},node:function(a,i,h,g){return i?(i=e.isArray(i)?i.join(""):i,h=h?' class="'+h+'"':"",g=g?" "+g:"","<"+a+h+g+">"+i+"</"+a+">"):""},lead:function(c){return(10>c?"0":"")+c},trigger:function(h,g,i){return"function"==typeof h?h.apply(g,i||[]):h},digits:function(c){return/\d/.test(c[1])?2:1},isDate:function(c){return{}.toString.call(c).indexOf("Date")>-1&&this.isInteger(c.getDate())},isInteger:function(c){return{}.toString.call(c).indexOf("Number")>-1&&c%1===0}},d.extend=function(g,a){e.fn[g]=function(i,h){var c=this.data(g);return"picker"==i?c:c&&"string"==typeof i?(d._.trigger(c[i],c,[h]),this):this.each(function(){var j=e(this);j.data(g)||new d(this,g,a,i)})},e.fn[g].defaults=a.defaults},d});
/*!
 * Date picker for pickadate.js v3.3.1
 * http://amsul.github.io/pickadate.js/date.htm
 */
!function(c){"function"==typeof define&&define.amd?define(["picker","jquery"],c):c(Picker,jQuery)}(function(g,f){function j(l,k){var s=this,q=l.$node[0].value,p=l.$node.data("value"),o=p||q,n=p?k.formatSubmit:k.format,m=function(){return"rtl"===getComputedStyle(l.$root[0]).direction};s.settings=k,s.queue={min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"navigate create validate",view:"create validate viewset",disable:"flipItem",enable:"flipItem"},s.item={},s.item.disable=(k.disable||[]).slice(0),s.item.enable=-function(c){return c[0]===!0?c.shift():-1}(s.item.disable),s.set("min",k.min).set("max",k.max).set("now").set("select",o||s.item.now,{format:n,data:function(c){return o&&(c.indexOf("mm")>-1||c.indexOf("m")>-1)}(s.formats.toArray(n))}),s.key={40:7,38:-7,39:function(){return m()?-1:1},37:function(){return m()?1:-1},go:function(c){s.set("highlight",[s.item.highlight.year,s.item.highlight.month,s.item.highlight.date+c],{interval:c}),this.render()}},l.on("render",function(){l.$root.find("."+k.klass.selectMonth).on("change",function(){l.set("highlight",[l.get("view").year,this.value,l.get("highlight").date]),l.$root.find("."+k.klass.selectMonth).trigger("focus")}),l.$root.find("."+k.klass.selectYear).on("change",function(){l.set("highlight",[this.value,l.get("view").month,l.get("highlight").date]),l.$root.find("."+k.klass.selectYear).trigger("focus")})}).on("open",function(){l.$root.find("button, select").attr("disabled",!1)}).on("close",function(){l.$root.find("button, select").attr("disabled",!0)})}var i=7,h=6;j.prototype.set=function(k,e,m){var l=this;return l.item["enable"==k?"disable":"flip"==k?"enable":k]=l.queue[k].split(" ").map(function(a){return e=l[a](k,e,m)}).pop(),"select"==k?l.set("highlight",l.item.select,m):"highlight"==k?l.set("view",l.item.highlight,m):("flip"==k||"min"==k||"max"==k||"disable"==k||"enable"==k)&&l.item.select&&l.item.highlight&&l.set("select",l.item.select,m).set("highlight",l.item.highlight,m),l},j.prototype.get=function(c){return this.item[c]},j.prototype.create=function(n,m,l){var k,a=this;return m=void 0===m?n:m,m==-1/0||1/0==m?k=m:f.isPlainObject(m)&&g._.isInteger(m.pick)?m=m.obj:f.isArray(m)?(m=new Date(m[0],m[1],m[2]),m=g._.isDate(m)?m:a.create().obj):m=g._.isInteger(m)||g._.isDate(m)?a.normalize(new Date(m),l):a.now(n,m,l),{year:k||m.getFullYear(),month:k||m.getMonth(),date:k||m.getDate(),day:k||m.getDay(),obj:k||m,pick:k||m.getTime()}},j.prototype.now=function(e,d,k){return d=new Date,k&&k.rel&&d.setDate(d.getDate()+k.rel),this.normalize(d,k)},j.prototype.navigate=function(p,o,n){if(f.isPlainObject(o)){for(var m=new Date(o.year,o.month+(n&&n.nav?n.nav:0),1),l=m.getFullYear(),k=m.getMonth(),a=o.date;g._.isDate(m)&&new Date(l,k,a).getMonth()!==k;){a-=1}o=[l,k,a]}return o},j.prototype.normalize=function(c){return c.setHours(0,0,0,0),c},j.prototype.measure=function(a,k){var e=this;return k?g._.isInteger(k)&&(k=e.now(a,k,{rel:k})):k="min"==a?-1/0:1/0,k},j.prototype.viewset=function(d,c){return this.create([c.year,c.month,1])},j.prototype.validate=function(D,C,B){var A,z,y,x,w=this,v=C,u=B&&B.interval?B.interval:1,t=-1===w.item.enable,s=w.item.min,q=w.item.max,a=t&&w.item.disable.filter(function(k){if(f.isArray(k)){var d=w.create(k).pick;d<C.pick?A=!0:d>C.pick&&(z=!0)}return g._.isInteger(k)}).length;if(!B.nav&&(!t&&w.disabled(C)||t&&w.disabled(C)&&(a||A||z)||C.pick<=s.pick||C.pick>=q.pick)){for(t&&!a&&(!z&&u>0||!A&&0>u)&&(u*=-1);w.disabled(C)&&(Math.abs(u)>1&&(C.month<v.month||C.month>v.month)&&(C=v,u=Math.abs(u)/u),C.pick<=s.pick?(y=!0,u=1):C.pick>=q.pick&&(x=!0,u=-1),!y||!x);){C=w.create([C.year,C.month,C.date+u])}}return C},j.prototype.disabled=function(l){var k=this,a=k.item.disable.filter(function(c){return g._.isInteger(c)?l.day===(k.settings.firstDay?c:c-1)%7:f.isArray(c)||g._.isDate(c)?l.pick===k.create(c).pick:void 0});return a=a.length&&!a.filter(function(c){return f.isArray(c)&&"inverted"==c[3]}).length,-1===k.item.enable?!a:a||l.pick<k.item.min.pick||l.pick>k.item.max.pick},j.prototype.parse=function(n,m,l){var k=this,a={};if(!m||g._.isInteger(m)||f.isArray(m)||g._.isDate(m)||f.isPlainObject(m)&&g._.isInteger(m.pick)){return m}if(!l||!l.format){throw"Need a formatting option to parse this.."}return k.formats.toArray(l.format).map(function(d){var p=k.formats[d],o=p?g._.trigger(p,k,[m,a]):d.replace(/^!/,"").length;p&&(a[d]=m.substr(0,o)),m=m.substr(o)}),[a.yyyy||a.yy,+(a.mm||a.m)-(l.data?1:0),a.dd||a.d]},j.prototype.formats=function(){function a(k,e,m){var l=k.match(/\w+/)[0];return m.mm||m.m||(m.m=e.indexOf(l)),l.length}function d(c){return c.match(/\w+/)[0].length}return{d:function(e,k){return e?g._.digits(e):k.date},dd:function(e,k){return e?2:g._.lead(k.date)},ddd:function(e,c){return e?d(e):this.settings.weekdaysShort[c.day]},dddd:function(e,c){return e?d(e):this.settings.weekdaysFull[c.day]},m:function(e,k){return e?g._.digits(e):k.month+1},mm:function(e,k){return e?2:g._.lead(k.month+1)},mmm:function(e,l){var k=this.settings.monthsShort;return e?a(e,k,l):k[l.month]},mmmm:function(e,l){var k=this.settings.monthsFull;return e?a(e,k,l):k[l.month]},yy:function(e,c){return e?2:(""+c.year).slice(2)},yyyy:function(e,c){return e?4:c.year},toArray:function(c){return c.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(e,l){var k=this;return k.formats.toArray(e).map(function(c){return g._.trigger(k.formats[c],k,[0,l])||c.replace(/^!/,"")}).join("")}}}(),j.prototype.flipItem=function(k,o){var n=this,m=n.item.disable,l=-1===n.item.enable;return"flip"==o?n.item.enable=l?1:-1:"enable"==k&&o===!0||"disable"==k&&o===!1?(n.item.enable=1,m=[]):"enable"==k&&o===!1||"disable"==k&&o===!0?(n.item.enable=-1,m=[]):f.isArray(o)&&(l&&"enable"==k||!l&&"disable"==k?m=n.addDisabled(m,o):l||"enable"!=k?l&&"disable"==k&&(m=n.removeDisabled(m,o)):m=n.addEnabled(m,o)),m},j.prototype.addEnabled=function(l,k){var a=this;return k.map(function(c){a.filterDisabled(l,c,1).length&&(l=a.removeDisabled(l,[c]),f.isArray(c)&&l.filter(function(d){return g._.isInteger(d)&&a.create(c).day===d-1}).length&&(c=c.slice(0),c.push("inverted"),l.push(c)))}),l},j.prototype.addDisabled=function(e,l){var k=this;return l.map(function(a){k.filterDisabled(e,a).length?f.isArray(a)&&k.filterDisabled(e,a,1).length&&(e=k.removeDisabled(e,[a])):e.push(a)}),e},j.prototype.removeDisabled=function(e,d){var k=this;return d.map(function(a){e=k.filterDisabled(e,a,1)}),e},j.prototype.filterDisabled=function(o,n,m){var l=this,k=f.isArray(n)||g._.isDate(n),a=k&&l.create(n).pick;return o.filter(function(e){var d=k&&(f.isArray(e)||g._.isDate(e))?a===l.create(e).pick:n===e;return m?!d:d})},j.prototype.nodes=function(C){var B=this,A=B.settings,z=B.item.now,y=B.item.select,x=B.item.highlight,w=B.item.view,v=B.item.disable,u=B.item.min,t=B.item.max,s=function(c){return A.firstDay&&c.push(c.shift()),g._.node("thead",g._.group({min:0,max:i-1,i:1,node:"th",item:function(k){return[c[k],A.klass.weekdays]}}))}((A.showWeekdaysFull?A.weekdaysFull:A.weekdaysShort).slice(0)),e=function(c){return g._.node("div"," ",A.klass["nav"+(c?"Next":"Prev")]+(c&&w.year>=t.year&&w.month>=t.month||!c&&w.year<=u.year&&w.month<=u.month?" "+A.klass.navDisabled:""),"data-nav="+(c||-1))},d=function(k){return A.selectMonths?g._.node("select",g._.group({min:0,max:11,i:1,node:"option",item:function(c){return[k[c],0,"value="+c+(w.month==c?" selected":"")+(w.year==u.year&&c<u.month||w.year==t.year&&c>t.month?" disabled":"")]}}),A.klass.selectMonth,C?"":"disabled"):g._.node("div",k[w.month],A.klass.month)},a=function(){var F=w.year,D=A.selectYears===!0?5:~~(A.selectYears/2);if(D){var q=u.year,p=t.year,o=F-D,m=F+D;if(q>o&&(m+=q-o,o=q),m>p){var l=o-q,E=m-p;o-=l>E?E:l,m=p}return g._.node("select",g._.group({min:o,max:m,i:1,node:"option",item:function(c){return[c,0,"value="+c+(F==c?" selected":"")]}}),A.klass.selectYear,C?"":"disabled")}return g._.node("div",F,A.klass.year)};return g._.node("div",e()+e(1)+d(A.showMonthsShort?A.monthsShort:A.monthsFull)+a(),A.klass.header)+g._.node("table",s+g._.node("tbody",g._.group({min:0,max:h-1,i:1,node:"tr",item:function(c){var k=A.firstDay&&0===B.create([w.year,w.month,1]).day?-7:0;return[g._.group({min:i*c-w.day+k+1,max:function(){return this.min+i-1},i:1,node:"td",item:function(l){return l=B.create([w.year,w.month,l+(A.firstDay?1:0)]),[g._.node("div",l.date,function(m){return m.push(w.month==l.month?A.klass.infocus:A.klass.outfocus),z.pick==l.pick&&m.push(A.klass.now),y&&y.pick==l.pick&&m.push(A.klass.selected),x&&x.pick==l.pick&&m.push(A.klass.highlighted),(v&&B.disabled(l)||l.pick<u.pick||l.pick>t.pick)&&m.push(A.klass.disabled),m.join(" ")}([A.klass.day]),"data-pick="+l.pick)]}})]}})),A.klass.table)+g._.node("div",g._.node("button",A.today,A.klass.buttonToday,"type=button data-pick="+z.pick+(C?"":" disabled"))+g._.node("button",A.clear,A.klass.buttonClear,"type=button data-clear=1"+(C?"":" disabled")),A.klass.footer)},j.defaults=function(c){return{monthsFull:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdaysFull:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],today:"Today",clear:"Clear",format:"d mmmm, yyyy",klass:{table:c+"table",header:c+"header",navPrev:c+"nav--prev",navNext:c+"nav--next",navDisabled:c+"nav--disabled",month:c+"month",year:c+"year",selectMonth:c+"select--month",selectYear:c+"select--year",weekdays:c+"weekday",day:c+"day",disabled:c+"day--disabled",selected:c+"day--selected",highlighted:c+"day--highlighted",now:c+"day--today",infocus:c+"day--infocus",outfocus:c+"day--outfocus",footer:c+"footer",buttonClear:c+"button--clear",buttonToday:c+"button--today"}}}(g.klasses().picker+"__"),g.extend("pickadate",j)});
/*!
 * Time picker for pickadate.js v3.3.1
 * http://amsul.github.io/pickadate.js/time.htm
 */
!function(c){"function"==typeof define&&define.amd?define(["picker","jquery"],c):c(Picker,jQuery)}(function(i,h){function n(f,e){var o=this,g=f.$node.data("value");o.settings=e,o.queue={interval:"i",min:"measure create",max:"measure create",now:"now create",select:"parse create validate",highlight:"create validate",view:"create validate",disable:"flipItem",enable:"flipItem"},o.item={},o.item.interval=e.interval||30,o.item.disable=(e.disable||[]).slice(0),o.item.enable=-function(c){return c[0]===!0?c.shift():-1}(o.item.disable),o.set("min",e.min).set("max",e.max).set("now").set("select",g||f.$node[0].value||o.item.min,{format:g?e.formatSubmit:e.format}),o.key={40:1,38:-1,39:1,37:-1,go:function(c){o.set("highlight",o.item.highlight.pick+c*o.item.interval,{interval:c*o.item.interval}),this.render()}},f.on("render",function(){var p=f.$root.children(),a=p.find("."+e.klass.viewset);a.length&&(p[0].scrollTop=~~a.position().top-2*a[0].clientHeight)}).on("open",function(){f.$root.find("button").attr("disable",!1)}).on("close",function(){f.$root.find("button").attr("disable",!0)})}var m=24,l=60,k=12,j=m*l;n.prototype.set=function(f,e,o){var g=this;return g.item["enable"==f?"disable":"flip"==f?"enable":f]=g.queue[f].split(" ").map(function(a){return e=g[a](f,e,o)}).pop(),"select"==f?g.set("highlight",g.item.select,o):"highlight"==f?g.set("view",g.item.highlight,o):"interval"==f?g.set("min",g.item.min,o).set("max",g.item.max,o):("flip"==f||"min"==f||"max"==f||"disable"==f||"enable"==f)&&g.item.select&&g.item.highlight&&("min"==f&&g.set("max",g.item.max,o),g.set("select",g.item.select,o).set("highlight",g.item.highlight,o)),g},n.prototype.get=function(c){return this.item[c]},n.prototype.create=function(g,e,d){var a=this;return e=void 0===e?g:e,i._.isDate(e)&&(e=[e.getHours(),e.getMinutes()]),h.isPlainObject(e)&&i._.isInteger(e.pick)?e=e.pick:h.isArray(e)?e=+e[0]*l+ +e[1]:i._.isInteger(e)||(e=a.now(g,e,d)),"max"==g&&e<a.item.min.pick&&(e+=j),"min"!=g&&"max"!=g&&(e-a.item.min.pick)%a.item.interval!==0&&(e+=a.item.interval),e=a.normalize(g,e,d),{hour:~~(m+e/l)%m,mins:(l+e%l)%l,time:(j+e)%j,pick:e}},n.prototype.now=function(a,o){var g=new Date,e=g.getHours()*l+g.getMinutes();return e-=e%this.item.interval,i._.isInteger(o)?o+="min"==a&&0>o&&0===e?2:1:o=1,o*this.item.interval+e},n.prototype.normalize=function(f,e){var o=this.item.interval,g="min"==f?0:(e-this.item.min.pick)%o;return e-(g+(0>e?o:0))},n.prototype.measure=function(o,e,d){var a=this;return e?e===!0||i._.isInteger(e)?e=a.now(o,e,d):h.isPlainObject(e)&&i._.isInteger(e.pick)&&(e=a.normalize(o,e.pick,d)):e="min"==o?[0,0]:[m-1,l-1],e},n.prototype.validate=function(g,f,q){var p=this,o=q&&q.interval?q.interval:p.item.interval;return p.disabled(f)&&(f=p.shift(f,o)),f=p.scope(f),p.disabled(f)&&(f=p.shift(f,-1*o)),f},n.prototype.disabled=function(g){var f=this,a=f.item.disable.filter(function(c){return i._.isInteger(c)?g.hour==c:h.isArray(c)||i._.isDate(c)?g.pick==f.create(c).pick:void 0});return a=a.length&&!a.filter(function(c){return h.isArray(c)&&"inverted"==c[2]}).length,-1===f.item.enable?!a:a||g.pick<f.item.min.pick||g.pick>f.item.max.pick},n.prototype.shift=function(g,f){var q=this,p=q.item.min.pick,o=q.item.max.pick;for(f=f||q.item.interval;q.disabled(g)&&(g=q.create(g.pick+=f),!(g.pick<=p||g.pick>=o));){}return g},n.prototype.scope=function(e){var d=this.item.min.pick,f=this.item.max.pick;return this.create(e.pick>f?f:e.pick<d?d:e)},n.prototype.parse=function(q,p,o){var e=this,a={};if(!p||i._.isInteger(p)||h.isArray(p)||i._.isDate(p)||h.isPlainObject(p)&&i._.isInteger(p.pick)){return p}if(!o||!o.format){throw"Need a formatting option to parse this.."}return e.formats.toArray(o.format).map(function(d){var g=e.formats[d],f=g?i._.trigger(g,e,[p,a]):d.replace(/^!/,"").length;g&&(a[d]=p.substr(0,f)),p=p.substr(f)}),+a.i+l*(+(a.H||a.HH)||+(a.h||a.hh)%12+(/^p/i.test(a.A||a.a)?12:0))},n.prototype.formats={h:function(a,d){return a?i._.digits(a):d.hour%k||k},hh:function(a,d){return a?2:i._.lead(d.hour%k||k)},H:function(a,d){return a?i._.digits(a):""+d.hour%24},HH:function(a,d){return a?i._.digits(a):i._.lead(d.hour%24)},i:function(a,d){return a?2:i._.lead(d.mins)},a:function(d,c){return d?4:j/2>c.time%j?"a.m.":"p.m."},A:function(d,c){return d?2:j/2>c.time%j?"AM":"PM"},toArray:function(c){return c.split(/(h{1,2}|H{1,2}|i|a|A|!.)/g)},toString:function(a,f){var e=this;return e.formats.toArray(a).map(function(c){return i._.trigger(e.formats[c],e,[0,f])||c.replace(/^!/,"")}).join("")}},n.prototype.flipItem=function(g,s){var q=this,p=q.item.disable,o=-1===q.item.enable;return"flip"==s?q.item.enable=o?1:-1:"enable"==g&&s===!0||"disable"==g&&s===!1?(q.item.enable=1,p=[]):"enable"==g&&s===!1||"disable"==g&&s===!0?(q.item.enable=-1,p=[]):h.isArray(s)&&(o&&"enable"==g||!o&&"disable"==g?p=q.addDisabled(p,s):o||"enable"!=g?o&&"disable"==g&&(p=q.removeDisabled(p,s)):p=q.addEnabled(p,s)),p},n.prototype.addEnabled=function(g,f){var a=this;return f.map(function(c){a.filterDisabled(g,c,1).length&&(g=a.removeDisabled(g,[c]),h.isArray(c)&&g.filter(function(d){return i._.isInteger(d)&&a.create(c).hour===d}).length&&(c=c.slice(0),c.push("inverted"),g.push(c)))}),g},n.prototype.addDisabled=function(e,g){var f=this;return g.map(function(a){f.filterDisabled(e,a).length?h.isArray(a)&&f.filterDisabled(e,a,1).length&&(e=f.removeDisabled(e,[a])):e.push(a)}),e},n.prototype.removeDisabled=function(e,d){var f=this;return d.map(function(a){e=f.filterDisabled(e,a,1)}),e},n.prototype.filterDisabled=function(f,p,o){var g=h.isArray(p);return f.filter(function(c){var d=!g&&p===c||g&&h.isArray(c)&&p.toString()===c.toString();return o?!d:d})},n.prototype.i=function(a,d){return i._.isInteger(d)&&d>0?d:this.item.interval},n.prototype.nodes=function(a){var u=this,t=u.settings,s=u.item.select,q=u.item.highlight,p=u.item.view,o=u.item.disable;return i._.node("ul",i._.group({min:u.item.min.pick,max:u.item.max.pick,i:u.item.interval,node:"li",item:function(c){return c=u.create(c),[i._.trigger(u.formats.toString,u,[i._.trigger(t.formatLabel,u,[c])||t.format,c]),function(d,e){return s&&s.pick==e&&d.push(t.klass.selected),q&&q.pick==e&&d.push(t.klass.highlighted),p&&p.pick==e&&d.push(t.klass.viewset),o&&u.disabled(c)&&d.push(t.klass.disabled),d.join(" ")}([t.klass.listItem],c.pick),"data-pick="+c.pick]}})+i._.node("li",i._.node("button",t.clear,t.klass.buttonClear,"type=button data-clear=1"+(a?"":" disable"))),t.klass.list)},n.defaults=function(c){return{clear:"Clear",format:"h:i A",interval:30,klass:{picker:c+" "+c+"--time",holder:c+"__holder",list:c+"__list",listItem:c+"__list-item",disabled:c+"__list-item--disabled",selected:c+"__list-item--selected",highlighted:c+"__list-item--highlighted",viewset:c+"__list-item--viewset",now:c+"__list-item--now",buttonClear:c+"__button--clear"}}}(i.klasses().picker),i.extend("pickatime",n)});
/*!
 * jQuery verson 1.10.2
 * AWS UI PhotoCut
 */
(function($){$.fn.submitForm=function(opt){var defaultOpt={json:true};var options=$.extend(defaultOpt,opt);var form=$(this);if(options.onSubmit){if(options.onSubmit.call(form)==false){return}}if(options.url){form.attr("action",options.url)}var frameId="submit_frame_"+(new Date().getTime());var frame=$("<iframe id="+frameId+" name="+frameId+"></iframe>").attr("src",window.ActiveXObject?"javascript:false":"about:blank").css({position:"absolute",top:-1000,left:-1000});form.attr("target",frameId);frame.appendTo("body");frame.bind("load",submitCallback);form.append("<input type='hidden' name='submitFormByHiddenFrame' id='submitFormByHiddenFrameParam' value='hiddenFrame'/>");form[0].submit();$("#submitFormByHiddenFrameParam").remove();var checkCount=10;function submitCallback(){frame.unbind();var body=$("#"+frameId).contents().find("body");var data=body.html();if(data==""){if(--checkCount){setTimeout(submitCallback,200);return}return}var ta=body.find(">textarea");if(ta.length){data=ta.val()}else{var pre=body.find(">pre");if(pre.length){data=pre.html()}}eval("data="+data);if(options.success){options.success(data)}setTimeout(function(){frame.unbind();frame.remove()},100)}};$.fn.clipper=function(options){var clipper=$(this);if(typeof options=="string"){if(options=="get"){var image=clipper.find("img");var oriWidth=parseInt(image.attr("w"));var oriHeight=parseInt(image.attr("h"));var width=image.width();var height=image.height();var imgX=image.position().left;var imgY=image.position().top;var offsetX=Math.abs(imgX-30)/width;var offsetY=Math.abs(imgY-30)/height;var result={x:Math.round(offsetX*oriWidth),y:Math.round(offsetY*oriHeight),w:Math.round(oriWidth*(240/width)),h:Math.round(oriHeight*(240/height))};return result}return}clipper.bind("selectstart",function(){return false});clipper.html('<div class="awsui-clipper"><img class="loading" src=""/><div>'+加载中+'</div></div><div class="awsui-clipper_control"><div class="zoom zoomout"></div><div class="zoom zoomin"></div><div class="slidebar"><div class="slideline"></div><div class="slidecircle"></div></div></div>');clipper.find("img").unbind().bind("load",function(){var img=$(this);img.removeClass("loading");clipper.find(".awsui-clipper").find("div").remove();var w=img.width();var h=img.height();img.attr({w:w,h:h});if(w>h){w=w/h*240;h=240}else{h=h/w*240;w=240}img.attr({bw:w,bh:h});var left=(240-w)/2+30;var top=(240-h)/2+30;img.css({width:w,height:h,left:left,top:top});clipper.find(".awsui-clipper").append('<span class="mask_t"></span><span class="mask_b"></span><span class="mask_l"></span><span class="mask_r"></span><div class="selector"></div>');clipper.find(".awsui-clipper").unbind().bind("mousedown",function(downe){var image=clipper.find("img");var beginX=downe.pageX;var beginY=downe.pageY;var posX=image.position().left;var posY=image.position().top;var width=image.width();var height=image.height();$(document).bind("mousemove.clipper",function(e){var toX=posX+(e.pageX-beginX);var toY=posY+(e.pageY-beginY);if(toX>30){toX=30}else{if(toX+width<270){toX=270-width}}if(toY>30){toY=30}else{if(toY+height<270){toY=270-height}}image.css({left:toX,top:toY})});$(document).bind("mouseup.clipper",function(e){$(document).unbind("mousemove.clipper");$(document).unbind("mouseup.clipper")})});clipper.find(".slidecircle").unbind().bind("mousedown",function(downe){var circle=$(this);circle.addClass("active");var image=clipper.find("img");var beginX=downe.pageX;var beginY=downe.pageY;var posX=circle.position().left;var posY=circle.position().top;var imgX=image.position().left;var imgY=image.position().top;var width=image.width();var height=image.height();var oriWidth=parseInt(image.attr("bw"));var oriHeight=parseInt(image.attr("bh"));$(document).bind("mousemove.clipper",function(e){var toX=posX+(e.pageX-beginX);if(toX<0){toX=0}else{if(toX>170){toX=170}}circle.css("left",toX);var percent=1+toX/50;var scaledW=oriWidth*percent;var scaledH=oriHeight*percent;var scaledX=imgX-(scaledW-width)/2;var scaledY=imgY-(scaledH-height)/2;if(scaledX>30){scaledX=30}else{if(scaledX+scaledW<270){scaledX=270-scaledW}}if(scaledY>30){scaledY=30}else{if(scaledY+scaledH<270){scaledY=270-scaledH}}image.css({width:scaledW,height:scaledH,left:scaledX,top:scaledY})});$(document).bind("mouseup.clipper",function(e){$(document).unbind("mousemove.clipper");$(document).unbind("mouseup.clipper");circle.removeClass("active")})})});clipper.find("img").attr("src",options.src)}})(jQuery);loadjs("./jquery/scripts/ui/datepicker/WdatePicker.js");(function(a){a.fn.datepicker=function(c){if(this.attr("readonly")=="readonly"){return}if(c==undefined){this.off("click").on("click",function(){awsDatePicker()});if(this.css("width")==""){this.css("width","73px")}}else{this.off("click").on("click",function(){awsDatePicker(c)});if(c.dateFmt=="yyyy-MM-dd HH:mm:ss"){if(this.css("width")==""){this.css("width","130px")}}else{if(c.dateFmt=="HH:mm:ss"){if(this.css("width")==""){this.css("width","55px")}}else{if(c.dateFmt=="HH"){if(this.css("width")==""){this.css("width","20px")}}else{if(this.css("width")==""){this.css("width","73px")}}}}}}})(jQuery);function initDatepicker(){$(".awsui-datepicker").each(function(){var d="twoer";var c=$(this).attr("awsui-props");if(c&&c.indexOf("{")>-1){var a=awsui.decode(c);if(a&&a.skin==undefined){a.skin=d}$(this).datepicker(a)}else{$(this).datepicker({dateFmt:c,skin:d})}})}function awsDatePicker(a){WdatePicker(a)}loadjs("./jquery/scripts/ui/datepicker/aws.jquery.ui.datepicker.js");loadCss("./jquery/scripts/ui/datepicker/aws.jquery.ui.datepicker.css");loadCss("./jquery/scripts/ui/datepicker/aws.datepicker.range.css");var awsDatepickerFun=[];var targetId;(function(a){a.fn.datepickerRange=function(e){if(!e.callbackfun){a.simpleAlert("not found callbackfun!","info",2000)}var g={callbackfun:null,startTime:getDiyDay(-30),endTime:getDiyDay(0),showLeft:0,showTop:5,emptyBtn:false,isShowToday:true};var d=a.extend(g,e);targetId=this.attr("id");awsDatepickerFun[targetId]=d.callbackfun;var h="<div class='report-navigation-condition'>";h+="<div id='navigationInterval' class='report-navigation-time-interval' style='background-color:#FFF;'>";h+="<span id='navigationIntervalStart' tit='"+targetId+"'>";h+=d.startTime;h+="</span>";h+="<span class='report-navigation-time-interval-line'>-</span>";h+="<span id='navigationIntervalEnd' tit='"+targetId+"'>";h+=d.endTime;h+="</span>";h+="<span class='report-navigation-icon-downarrow-black-down report-navigation-time-interval-downarrow'>&nbsp;</span>";h+="</div>";h+="</div>";this.html(h);var c=new Date();h="<div class='navigationDatepickerDivAws' style='display:none;z-index:9999' tit='"+a(this).attr("id")+"'>";h+="<table>";h+="<tr>";h+="<td>";h+="<div id='datepicker' class='dateBlockArea'></div>";h+="</td>";h+="</tr>";h+="<tr>";h+="<td>";h+="<div class='dateSet'>";h+="<div class='tip'>";h+="<span style='font-weight: bold;padding-left:0px;font-size:12px;float:none;'>"+快捷选项+":</span>";h+="</div>";h+="<div class='options'>";h+="<span dateVal='"+c.getFullYear()+"-1-1,"+getDiyDay(0)+"'>"+今年+"</span>";h+="<span dateVal='"+dateChange("pmonth")+"'>"+上个月+"</span>";h+="<span dateVal='"+dateChange("tquarter")+"'>"+本季度+"</span>";h+="<span dateVal='"+dateChange("pquarter")+"'>"+上个季度+"</span>";h+="<span dateVal='"+getDiyDay(-182)+","+getDiyDay(0)+"'>"+前半年+"</span>";h+="<span dateVal='"+(c.getFullYear()-1)+"-1-1,"+getDiyDay(0)+"'>"+上一年+"</span>";h+="<span dateVal='"+(c.getFullYear()-2)+"-1-1,"+getDiyDay(0)+"'>"+前两年+"</span>";h+="<span dateVal='"+(c.getFullYear()-3)+"-1-1,"+getDiyDay(0)+"'>"+前三年+"</span>";h+="</div>";h+="</div>";h+="<div class='dateValue'>";h+="<span style='float:left;'><input id='datepickerStart' value='"+d.startTime+"' class='inputSelect txt' /></span>";h+="<span style='width:5%;display: block;float: left;font-size: 15px;padding: 0 2px;text-align: center;'>-</span>";h+="<span style='float:left;'><input id='datepickerEnd' value='"+d.endTime+"' class='txt'/></span>";h+="</div>";h+="<div class='dateButton'>";if(d.emptyBtn){h+="<span style='float:left;'><input id='emptyButton' type='button' class='button small' style='margin: 0px;' value='"+清空+"'/></span>"}h+="<span style='float:right;'><input id='dateButton' type='button' class='button blue small' style='margin: 0px;' value='"+使用+"'/></span>";h+="</div>";h+="</td>";h+="</tr>";h+="</tr>";h+="</table>";h+="</div>";this.after(h);a("#datepickerStart,#datepickerEnd").bind("keypress",function(j){var i=window.event?j.keyCode:j.which;if(((i>=48)&&(i<=57))||i==8||i==0||i==45){}else{if(window.event){window.event.returnValue=false}else{j.preventDefault()}}});a("[tit="+a(this).attr("id")+"]").find("#datepicker").datepickerrangeui({aws:true,numberOfMonths:3,maxDate:(d.isShowToday==true?"0":"-1"),onSelect:function(j,i){var k=f(this);if(!datepickerStartClick){a(k).find("#datepickerStart").val(j);a(k).find("#datepickerEnd").addClass("inputSelect");a(k).find("#datepickerStart").removeClass("inputSelect");a(k).find("#datepickerEnd").val(j);datepickerStartClick=true}else{if(compareTimeSize(j,a(k).find("#datepickerStart").val())){a(k).find("#datepickerStart").addClass("inputSelect");a(k).find("#datepickerEnd").removeClass("inputSelect");a(k).find("#datepickerEnd").val(j);datepickerStartClick=false}}changeColor(a(k).attr("tit"))},onAfterUpdateDate:function(){var i=f(this);exChangeColor();changeColor(a(i).attr("tit"))}});a(".ui-datepicker-inline").width("612");var f=function(j){var i=a(j).parents().find(".navigationDatepickerDivAws:visible").prev()[0];targetId=a(i).attr("id");var k=a("[tit="+targetId+"]");return k};a("[tit="+a(this).attr("id")+"]").find("#datepickerStart").unbind("click").bind("click",function(){var i=f(this);datepickerStartClick=false;a(i).find("#datepickerStart").addClass("inputSelect");a(i).find("#datepickerEnd").removeClass("inputSelect")});a("[tit="+a(this).attr("id")+"]").find("#datepickerEnd").unbind("click").bind("click",function(){var i=f(this);datepickerStartClick=true;a(i).find("#datepickerEnd").addClass("inputSelect");a(i).find("#datepickerStart").removeClass("inputSelect")});jQuery(".report-navigation-time-interval").unbind("click").bind("click",function(){targetId=a(this).parent().parent().attr("id");var i=a("#"+targetId).next().css("display");var k=jQuery(".navigationDatepickerDivAws[tit="+targetId+"]");if(i=="none"){datepickerStartClick=false;k.find("#datepickerStart").addClass("inputSelect");k.find("#datepickerEnd").removeClass("inputSelect");var j=jQuery(this).offset();k.css("left",j.left+jQuery(this).width()-a("#"+targetId).next().width()+d.showLeft);k.css("top",jQuery(this).height()+j.top+d.showTop);a(".navigationDatepickerDivAws:visible").hide();k.show();a("#"+targetId).find("#navigationInterval").find(".report-navigation-time-interval-downarrow").removeClass("report-navigation-icon-downarrow-black-down").addClass("report-navigation-icon-downarrow-black-up");setDivTimeOutColse(a("#"+targetId).next())}else{k.hide();a("#"+targetId).find("#navigationInterval").find(".report-navigation-time-interval-downarrow").addClass("report-navigation-icon-downarrow-black-down").removeClass("report-navigation-icon-downarrow-black-up")}});a("[tit="+a(this).attr("id")+"]").find("#dateButton").unbind("click").bind("click",function(){var k=f(this);if(d.emptyBtn==false||a(k).find("#datepickerStart").val()!=""){if(!isDateString(a(k).find("#datepickerStart").val())){try{a.simpleAlert(开始日期格式不正确,"info",2000)}catch(j){a.simpleAlert(开始日期格式不正确,"info",2000)}return false}}if(d.emptyBtn==false||a(k).find("#datepickerEnd").val()!=""){if(!isDateString(a(k).find("#datepickerEnd").val())){try{a.simpleAlert(结束日期格式不正确,"info",2000)}catch(j){a.simpleAlert(结束日期格式不正确,"info",2000)}return false}}if(d.emptyBtn==false||(a(k).find("#datepickerStart").val()!=""&&a(k).find("#datepickerEnd").val()!="")){var i=compareDate(a(k).find("#datepickerStart").val(),a(k).find("#datepickerEnd").val());if(i<0){try{a.simpleAlert(开始日期不能大于结束日期,"info",2000)}catch(j){a.simpleAlert(开始日期不能大于结束日期,"info",2000)}return false}}dateButtonDatepickerSubmit(targetId)});a("[tit="+a(this).attr("id")+"]").find("#emptyButton").unbind("click").bind("click",function(){var i=f(this);a(i).find("#datepickerStart").val("");a(i).find("#datepickerEnd").val("");a("#"+targetId).find("#navigationIntervalStart").text("");a("#"+targetId).find("#navigationIntervalEnd").text("");a(".navigationDatepickerDivAws a").removeClass("state-active");jQuery(".navigationDatepickerDivAws[tit="+targetId+"]").hide();if(d.emptyBtnCallbackfun){d.emptyBtnCallbackfun()}});exChangeColor();changeColor(a(this).attr("id"));infoDatepickerOptions()}})(jQuery);function isDateString(i){var e=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})/;var g=i.match(e);if(g==null){return false}var f=[31,28,31,30,31,30,31,31,30,31,30,31];var d=new Array(3);var c,h,a;d=i.split("-");c=parseFloat(d[0]);h=parseFloat(d[1]);a=parseFloat(d[2]);if(c<1900||c>3000){return false}if(((c%4==0)&&(c%100!=0))||(c%400==0)){f[1]=29}if(h<1||h>12){return false}if(a<1||a>f[h-1]){return false}return true}function compareDate(a,d){var e=StringToDate(a);var c=StringToDate(d);return e.DateDiff("d",c)}function StringToDate(a){var e=Date.parse(a);var c=new Date(e);if(isNaN(c)){var d=a.split("-");c=new Date(d[0],--d[1],d[2])}return c}Date.prototype.DateDiff=function(a,c){var d=this;if(typeof c=="string"){c=StringToDate(c)}switch(a){case"s":return parseInt((c-d)/1000);case"n":return parseInt((c-d)/60000);case"h":return parseInt((c-d)/3600000);case"d":return parseInt((c-d)/86400000);case"w":return parseInt((c-d)/(86400000*7));case"m":return(c.getMonth()+1)+((c.getFullYear()-d.getFullYear())*12)-(d.getMonth()+1);case"y":return c.getFullYear()-d.getFullYear()}};function setDatepickerGroupPosition(){var a=jQuery("#datepickerEnd").val();$("#datepicker").datepicker({defaultDate:a})}function infoDatepickerOptions(){jQuery(".navigationDatepickerDivAws").find(".dateSet").find(".options").find("span").each(function(){jQuery(this).unbind("click").bind("click",function(){var a=jQuery(this).attr("dateval");var c=a.split(",");$("[tit="+targetId+"]").find("#datepickerStart").val(c[0]);$("[tit="+targetId+"]").find("#datepickerEnd").val(c[1]);dateButtonDatepickerSubmit(targetId)})})}function infoDatepickerInput(){var c=jQuery("#navigationIntervalStart").val();var a=jQuery("#navigationIntervalEnd").val();if(c&&a){$("[tit="+targetId+"]").find("#datepickerStart").val(c);$("[tit="+targetId+"]").find("#datepickerEnd").val(a)}}function dateButtonDatepickerSubmit(d){var e=$(".navigationDatepickerDivAws[tit="+d+"]");var a=$(e).find("#datepickerStart").val();var c=$(e).find("#datepickerEnd").val();$("#"+d).find("#navigationIntervalStart").text(a);$("#"+d).find("#navigationIntervalEnd").text(c);jQuery(".navigationDatepickerDivAws").hide();changeColor(d);if(awsDatepickerFun[d]){awsDatepickerFun[d](a,c)}}function compareTimeSize(j,k){var f=j.split("-");var h=k.split("-");var e=Number(f[0]);var a=Number(f[1]);var d=Number(f[2]);var i=Number(h[0]);var c=Number(h[1]);var g=Number(h[2]);if(e>i){return true}else{if(e<i){return false}else{if(a>c){return true}else{if(a<c){return false}else{if(d>=g){return true}else{return false}}}}}}function changeColor(a){$("[tit="+a+"]").find("#datepicker").find("a.state-default").each(function(){jQuery(this).removeClass("state-active");var c=$("[tit="+a+"]").find("#datepickerStart").val();var d=$("[tit="+a+"]").find("#datepickerEnd").val();if(c&&c!=""){var e=jQuery(this).next().val();if(compareTimeSize(e,c)&&compareTimeSize(d,e)){jQuery(this).addClass("state-active")}}})}function clearColor(){$(document.querySelectorAll("#datepicker")).find("a.state-default").each(function(){jQuery(this).removeClass("state-active")})}function exChangeColor(){$(document.querySelectorAll("#datepicker")).find("a.ui-state-default").each(function(){jQuery(this).removeClass();jQuery(this).addClass("state-default")})}function setDivTimeOutColse(c,a){if(!c){return false}if(!a){a=200}var d;jQuery(c).unbind("mouseenter").unbind("mouseleave");jQuery(c).hover(function(){if(d){clearTimeout(d);d=""}},function(){if(!d){d=setTimeout(function(){$("#"+targetId).find("#navigationInterval").find(".report-navigation-time-interval-downarrow").removeClass("report-navigation-icon-downarrow-black-up").addClass("report-navigation-icon-downarrow-black-down");jQuery(c).hide();d=""},a)}})}function getDiyDay(c){var a=new Date();a=new Date(a.getTime()+(c*24*60*60*1000));return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}function dateChange(c){var f;var g;var d=new Date();var h=d.getMonth();var j=d.getFullYear();var k=d.getDate();var i=d.getDay();switch(c){case"tweek":var k=d.getDay();d.setDate(d.getDate()-(k-1));f=formatDate(d);d.setDate(d.getDate()+6);g=formatDate(d);break;case"tmonth":d.setDate(1);f=formatDate(d);var l=getDays(d);d.setDate(l);g=formatDate(d);break;case"tquarter":var e=d.getMonth()+1;var a=parseInt((e+2)/3);e=a*3-2;d.setMonth(e-1);d.setDate(1);f=formatDate(d);g=getDiyDay(0);break;case"tyear":d.setMonth(0);d.setDate(1);f=formatDate(d);d.setMonth(11);d.setDate(31);g=formatDate(d);break;case"today":f=formatDate(d);g=f;break;case"pweek":var k=d.getDay();d.setDate(d.getDate()-(k-1)-7);f=formatDate(d);d.setDate(d.getDate()+6);g=formatDate(d);break;case"pmonth":d.setDate(1);d.setMonth(d.getMonth()-1);f=formatDate(d);var l=getDays(d);d.setDate(l);g=formatDate(d);break;case"pquarter":var e=d.getMonth()+1;var a=parseInt((e+2)/3);e=a*3-2;e=e-3;d.setMonth(e-1);d.setDate(1);f=formatDate(d);d.setMonth(d.getMonth()+3);d.setDate(0);g=formatDate(d);break;case"pyear":d.setFullYear(d.getFullYear()-1);d.setMonth(0);d.setDate(1);f=formatDate(d);d.setMonth(11);d.setDate(31);g=formatDate(d);break;case"p2week":var k=d.getDay();d.setDate(d.getDate()-(k-1)-7*2);f=formatDate(d);d.setDate(d.getDate()+6+7);g=formatDate(d);break;case"p2month":d.setDate(1);d.setMonth(d.getMonth()-1*2);f=formatDate(d);d.setMonth(d.getMonth()+2);d.setDate(0);g=formatDate(d);break;case"customize":f="";g="";break}return f+","+g}function formatDate(c){var a=c;return a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()}function getDays(d){var c=d.getMonth()+1;var a=d.getFullYear();var e=30;if(c==2){if(m_IsLeap(a)){e=29}else{e=28}}else{if(mInList(c,"1,3,5,7,8,10,12")){e=31}}return e}function m_IsLeap(a){if(a%400==0){return true}else{if((a%100!=0)&&(a%4==0)){return true}}return false}function mInList(c,a){var e=","+c+",";var d=","+a+",";e=e.toLowerCase();d=d.toLowerCase();return d.indexOf(e)!=-1}function Range(){this._value=0;this._minimum=0;this._maximum=100;this._extent=0;this._isChanging=false}Range.prototype.setValue=function(a){a=Math.round(parseFloat(a));if(isNaN(a)){return}if(this._value!=a){if(a+this._extent>this._maximum){this._value=this._maximum-this._extent}else{if(a<this._minimum){this._value=this._minimum}else{this._value=a}}if(!this._isChanging&&typeof this.onchange=="function"){this.onchange()}}};Range.prototype.getValue=function(){return this._value};Range.prototype.setExtent=function(a){if(this._extent!=a){if(a<0){this._extent=0}else{if(this._value+a>this._maximum){this._extent=this._maximum-this._value}else{this._extent=a}}if(!this._isChanging&&typeof this.onchange=="function"){this.onchange()}}};Range.prototype.getExtent=function(){return this._extent};Range.prototype.setMinimum=function(a){if(this._minimum!=a){var c=this._isChanging;this._isChanging=true;this._minimum=a;if(a>this._value){this.setValue(a)}if(a>this._maximum){this._extent=0;this.setMaximum(a);this.setValue(a)}if(a+this._extent>this._maximum){this._extent=this._maximum-this._minimum}this._isChanging=c;if(!this._isChanging&&typeof this.onchange=="function"){this.onchange()}}};Range.prototype.getMinimum=function(){return this._minimum};Range.prototype.setMaximum=function(c){if(this._maximum!=c){var a=this._isChanging;this._isChanging=true;this._maximum=c;if(c<this._value){this.setValue(c-this._extent)}if(c<this._minimum){this._extent=0;this.setMinimum(c);this.setValue(this._maximum)}if(c<this._minimum+this._extent){this._extent=this._maximum-this._minimum}if(c<this._value+this._extent){this._extent=this._maximum-this._value}this._isChanging=a;if(!this._isChanging&&typeof this.onchange=="function"){this.onchange()}}};Range.prototype.getMaximum=function(){return this._maximum};function Timer(a){this._pauseTime=typeof a=="undefined"?1000:a;this._timer=null;this._isStarted=false}Timer.prototype.start=function(){if(this.isStarted()){this.stop()}var a=this;this._timer=window.setTimeout(function(){if(typeof a.ontimer=="function"){a.ontimer()}},this._pauseTime);this._isStarted=false};Timer.prototype.stop=function(){if(this._timer!=null){window.clearTimeout(this._timer)}this._isStarted=false};Timer.prototype.isStarted=function(){return this._isStarted};Timer.prototype.getPauseTime=function(){return this._pauseTime};Timer.prototype.setPauseTime=function(a){this._pauseTime=a};Slider.isSupported=typeof document.createElement!="undefined"&&typeof document.documentElement!="undefined"&&typeof document.documentElement.offsetWidth=="number";function Slider(c,e,d){if(!c){return}this._orientation=d||"horizontal";this._range=new Range();this._range.setExtent(0);this._blockIncrement=10;this._unitIncrement=1;this._timer=new Timer(0);if(Slider.isSupported&&c){this.document=c.ownerDocument||c.document;this.element=c;this.element.slider=this;this.element.unselectable="on";this.element.className=this._orientation+" "+this.classNameTag+" "+this.element.className;this.line=this.document.createElement("DIV");this.line.className="line";this.line.unselectable="on";this.line.appendChild(this.document.createElement("DIV"));this.element.appendChild(this.line);this.handleline=this.document.createElement("DIV");this.handleline.className="line";this.handleline.style.background="#99CC99";this.element.appendChild(this.handleline);this.handle=this.document.createElement("DIV");this.handle.className="handle";this.handle.unselectable="on";this.handle.appendChild(this.document.createElement("DIV"));this.handle.firstChild.appendChild(this.document.createTextNode(String.fromCharCode(160)));this.element.appendChild(this.handle)}this.input=e;var a=this;this._range.onchange=function(){a.recalculate();if(typeof a.onchange=="function"){a.onchange()}};if($("#"+e.id).attr("status")!=undefined&&$("#"+e.id).attr("status")=="true"){this.handle.style.cursor="default";return}if(Slider.isSupported&&c){this.element.onfocus=Slider.eventHandlers.onfocus;this.element.onblur=Slider.eventHandlers.onblur;this.element.onmousedown=Slider.eventHandlers.onmousedown;this.element.onmouseover=Slider.eventHandlers.onmouseover;this.element.onmouseout=Slider.eventHandlers.onmouseout;this.element.onkeydown=Slider.eventHandlers.onkeydown;this.element.onkeypress=Slider.eventHandlers.onkeypress;this.element.onmousewheel=Slider.eventHandlers.onmousewheel;this.handle.onselectstart=this.element.onselectstart=function(){return false};var f=this;this.handle.ondblclick=function(g){var i="<input id='sliderV' placeholder='"+请输入+"' class='txt'/>";$(this).tooltip({close:true,bordercolor:"#EEE",color:"#ff0000",text:i,position:"top"});$("#sliderV").keydown(function(j){Slider.eventHandlers.handlerSetValue(j,$("#sliderV").val(),f)});var h=arguments.callee.caller!=null?arguments.callee.caller.arguments[0]:g||g;if(h&&h.stopPropagation){h.stopPropagation()}else{if(window.event){window.event.cancelBubble=true}}};this._timer.ontimer=function(){a.ontimer()};window.setTimeout(function(){a.recalculate()},0)}else{this.input.onchange=function(g){a.setValue(a.input.value)}}}Slider.eventHandlers={handlerSetValue:function(f,d,c){var a=f.keyCode;if(a==13){if(isNaN(d)){return}c.setValue(d);$("#awsui_tooltip").remove()}},getEvent:function(c,a){if(!c){if(a){c=a.document.parentWindow.event}else{c=window.event}}if(!c.srcElement){var a=c.target;while(a!=null&&a.nodeType!=1){a=a.parentNode}c.srcElement=a}if(typeof c.offsetX=="undefined"){c.offsetX=c.layerX;c.offsetY=c.layerY}return c},getDocument:function(a){if(a.target){return a.target.ownerDocument}return a.srcElement.document},getSlider:function(c){var a=c.target||c.srcElement;while(a!=null&&a.slider==null){a=a.parentNode}if(a){return a.slider}return null},getLine:function(c){var a=c.target||c.srcElement;while(a!=null&&a.className!="line"){a=a.parentNode}return a},getHandle:function(d){var c=d.target||d.srcElement;var a=/handle/;while(c!=null&&!a.test(c.className)){c=c.parentNode}return c},onfocus:function(c){var a=this.slider;a._focused=true;a.handle.className="handle hover"},onblur:function(c){var a=this.slider;a._focused=false;a.handle.className="handle"},onmouseover:function(c){c=Slider.eventHandlers.getEvent(c,this);var a=this.slider;if(c.srcElement==a.handle){a.handle.className="handle hover"}},onmouseout:function(c){c=Slider.eventHandlers.getEvent(c,this);var a=this.slider;if(c.srcElement==a.handle&&!a._focused){a.handle.className="handle"}},onmousedown:function(f){f=Slider.eventHandlers.getEvent(f,this);var a=this.slider;if(a.element.focus){a.element.focus()}Slider._currentInstance=a;var d=a.document;if(d.addEventListener){d.addEventListener("mousemove",Slider.eventHandlers.onmousemove,true);d.addEventListener("mouseup",Slider.eventHandlers.onmouseup,true)}else{if(d.attachEvent){d.attachEvent("onmousemove",Slider.eventHandlers.onmousemove);d.attachEvent("onmouseup",Slider.eventHandlers.onmouseup);d.attachEvent("onlosecapture",Slider.eventHandlers.onmouseup);a.element.setCapture()}}if(Slider.eventHandlers.getHandle(f)){Slider._sliderDragData={screenX:f.screenX,screenY:f.screenY,dx:f.screenX-a.handle.offsetLeft,dy:f.screenY-a.handle.offsetTop,startValue:a.getValue(),slider:a}}else{var c=Slider.eventHandlers.getLine(f);a._mouseX=f.offsetX+(c?f.target.offsetLeft:0);a._mouseY=f.offsetY+(c?f.target.offsetTop:0);a._increasing=null;a.ontimer()}},onmousemove:function(i){i=Slider.eventHandlers.getEvent(i,this);if(Slider._sliderDragData){var d=Slider._sliderDragData.slider;d._increasing="drag";var a=d.getMaximum()-d.getMinimum();var c,j,g;if(d._orientation=="horizontal"){c=d.element.offsetWidth-d.handle.offsetWidth;j=i.screenX-Slider._sliderDragData.dx;g=Math.abs(i.screenY-Slider._sliderDragData.screenY)>100}else{c=d.element.offsetHeight-d.handle.offsetHeight;j=d.element.offsetHeight-d.handle.offsetHeight-(i.screenY-Slider._sliderDragData.dy);g=Math.abs(i.screenX-Slider._sliderDragData.screenX)>100}var h=d.getMinimum()+a*j/c;if(h>=d.getValue()&&h<(d.getValue()+d.getBlockIncrement())){h=d.getValue()+d.getBlockIncrement()}if(h<d.getValue()&&(d.getValue()-h)<d.getBlockIncrement()){h=d.getValue()-d.getBlockIncrement()}if(d.getBlockIncrement()!=1){h=Math.round(h/d.getBlockIncrement())*d.getBlockIncrement()+d.getMinimum()}d.setValue(g?Slider._sliderDragData.startValue:h);return false}else{var d=Slider._currentInstance;if(d!=null){var f=Slider.eventHandlers.getLine(i);d._mouseX=i.offsetX+(f?i.target.offsetLeft:0);d._mouseY=i.offsetY+(f?i.target.offsetTop:0)}}},onmouseup:function(d){d=Slider.eventHandlers.getEvent(d,this);var a=Slider._currentInstance;var c=a.document;if(c.removeEventListener){c.removeEventListener("mousemove",Slider.eventHandlers.onmousemove,true);c.removeEventListener("mouseup",Slider.eventHandlers.onmouseup,true)}else{if(c.detachEvent){c.detachEvent("onmousemove",Slider.eventHandlers.onmousemove);c.detachEvent("onmouseup",Slider.eventHandlers.onmouseup);c.detachEvent("onlosecapture",Slider.eventHandlers.onmouseup);a.element.releaseCapture()}}if(Slider._sliderDragData){Slider._sliderDragData=null}else{a._timer.stop();a._increasing=null}Slider._currentInstance=null},onkeydown:function(d){d=Slider.eventHandlers.getEvent(d,this);var c=this.slider;var a=d.keyCode;switch(a){case 33:c.setValue(c.getValue()+c.getBlockIncrement());break;case 34:c.setValue(c.getValue()-c.getBlockIncrement());break;case 35:c.setValue(c.getOrientation()=="horizontal"?c.getMaximum():c.getMinimum());break;case 36:c.setValue(c.getOrientation()=="horizontal"?c.getMinimum():c.getMaximum());break;case 38:case 39:c.setValue(c.getValue()+c.getUnitIncrement());break;case 37:case 40:c.setValue(c.getValue()-c.getUnitIncrement());break}if(a>=33&&a<=40){return false}},onkeypress:function(c){c=Slider.eventHandlers.getEvent(c,this);var a=c.keyCode;if(a>=33&&a<=40){return false}},onmousewheel:function(c){c=Slider.eventHandlers.getEvent(c,this);var a=this.slider;if(a._focused){a.setValue(a.getValue()+c.wheelDelta/120*a.getUnitIncrement());return false}}};Slider.prototype.classNameTag="dynamic-slider-control",Slider.prototype.setValue=function(a){this._range.setValue(a);this.input.value=this.getValue()};Slider.prototype.getValue=function(){return this._range.getValue()};Slider.prototype.setMinimum=function(a){this._range.setMinimum(a);this.input.value=this.getValue()};Slider.prototype.getMinimum=function(){return this._range.getMinimum()};Slider.prototype.setMaximum=function(a){this._range.setMaximum(a);this.input.value=this.getValue()};Slider.prototype.getMaximum=function(){return this._range.getMaximum()};Slider.prototype.setUnitIncrement=function(a){this._unitIncrement=a};Slider.prototype.getUnitIncrement=function(){return this._unitIncrement};Slider.prototype.setBlockIncrement=function(a){this._blockIncrement=a};Slider.prototype.getBlockIncrement=function(){return this._blockIncrement};Slider.prototype.getOrientation=function(){return this._orientation};Slider.prototype.setOrientation=function(a){if(a!=this._orientation){if(Slider.isSupported&&this.element){this.element.className=this.element.className.replace(this._orientation,a)}this._orientation=a;this.recalculate()}};Slider.prototype.recalculate=function(){if(!Slider.isSupported||!this.element){return}var d=this.element.offsetWidth;var f=this.element.offsetHeight;var a=this.handle.offsetWidth;var e=this.handle.offsetHeight;var g=this.line.offsetWidth;var c=this.line.offsetHeight;if(this._orientation=="horizontal"){this.handle.style.left=(d-a)*(this.getValue()-this.getMinimum())/(this.getMaximum()-this.getMinimum())+"px";this.handle.style.top=(f-e)/2+"px";this.line.style.top=(f-c)/2+"px";this.line.style.left=a/2+"px";this.line.style.width=Math.max(0,d-a-2)+"px";this.line.firstChild.style.width=Math.max(0,d-a-4)+"px";this.handleline.style.top=(f-c)/2+"px";this.handleline.style.width=(d-a)*(this.getValue()-this.getMinimum())/(this.getMaximum()-this.getMinimum())+"px"}else{this.handle.style.left=(d-a)/2+"px";this.handle.style.top=f-e-(f-e)*(this.getValue()-this.getMinimum())/(this.getMaximum()-this.getMinimum())+"px";this.line.style.left=(d-g)/2+"px";this.line.style.height=Math.max(0,f-e-2)+"px";this.line.firstChild.style.height=Math.max(0,f-e-4)+"px";this.handleline.style.left=(d-g)/2+"px";this.handleline.style.height=e+(f-e)*(this.getValue()-this.getMinimum())/(this.getMaximum()-this.getMinimum())+"px";this.handleline.style.top=f-e-(f-e)*(this.getValue()-this.getMinimum())/(this.getMaximum()-this.getMinimum())+"px"}};Slider.prototype.ontimer=function(){var c=this.handle.offsetWidth;var f=this.handle.offsetHeight;var a=this.handle.offsetLeft;var e=this.handle.offsetTop;var d=true;if(this._orientation=="horizontal"){if(this._mouseX>a+c&&(this._increasing==null||this._increasing=="add")){this.setValue(this.getValue()+this.getBlockIncrement());this._increasing="add"}else{if(this._mouseX<a&&(this._increasing==null||this._increasing=="reduce")){this.setValue(this.getValue()-this.getBlockIncrement());this._increasing="reduce"}else{d=false}}}else{if(this._mouseY>e+f&&(this._increasing==null||this._increasing=="reduce")){this.setValue(this.getValue()-this.getBlockIncrement());this._increasing="reduce"}else{if(this._mouseY<e&&(this._increasing==null||this._increasing=="add")){this.setValue(this.getValue()+this.getBlockIncrement());this._increasing="add"}else{d=false}}}if(d){this._timer.start()}else{this._timer.stop();this._increasing=null}};
/*!
 * =====================================================
 * AWS地址簿运行时库文件
 * v1.0 (http://www.actionsoft.com.cn)
 * 发布后文件名：aws.address.js
 * =====================================================
 */
(function(a){a.fn.address=function(f){var i={callback:null,beforeCancel:null,filter:{addressType:"user",isAdvMode:true,addressSetting:{rootDetpId:"",isDisplayMap:false,isDisplayOtherMap:false,layerFrom:"",layerTo:"",range:"department|role|team",delimiter:" ",choiceType:"single",leafType:"user",filterClass:"",itemDisplayType:"all"},sourceField:"",targetField:"",deptSourceField:"",deptTargetField:""},valueType:0,separator:" ",inDialog:false,target:null,isGrid:false,gridId:"",gridRowIndx:0,isClearData:true,clearCallback:null};var g=i;if(f){g=a.extend(true,i,f)}g.separator=g.filter.addressSetting.delimiter;var e=a(this);var h=g.target==null?a(this):g.target;if(g.filter.addressType=="dept"){g.address=getTargetValue(a(this).attr("name"),g);g.value=e.val()}else{if(g.filter.addressType=="user"&&g.filter.isAdvMode){g.value=e.val()}}var d;if(g.filter.targetField){d=g.filter.targetField.replace(/,/g,"|")}else{if(g.filter.deptTargetField){d=g.filter.deptTargetField.replace(/,/g,"|")}}g.isClearData=e.hasClass("disable")?false:true;g.boItemName=e.attr("id");var c="";if(a("#sid").length>0){c=a("#sid").val()}else{if(a("input[name=sid]").length>0){c=a("input[name=sid]").val()}}if(c==""||c==undefined){alert("字段["+e.attr("name")+"]渲染地址簿组件时，在当前页面未发现sid信息");return}e.buttonedit({isClearData:g.isClearData,callback:g.clearCallback,gridRowIndx:g.gridRowIndx,iconCls:"icon-address",clearField:d,onClick:function(){if(e.hasClass("disable")){return}if(f==undefined||f.filter==undefined){var p={};p.valueType=g.valueType;p.separator=g.separator;g=a.extend(p,f)}if(typeof AWSForm!="undefined"){g.formData=awsui.encode(AWSForm.getFormData(a("#frmMain"),a("#boItemList").val()))}else{g.formData="{}"}if(g.filter){var x;if(g.filter.targetField.split(",").length>0){var l=g.filter.targetField.split(",");x=a("#"+l[0]).val()}else{if(g.filter.deptTargetField.split(",").length>0){var w=g.filter.deptTargetField.split(",");x=a("#"+w[0]).val()}}if(g.isGrid){x=a(e).val()}if(x&&x.length>0){var y=x.split(g.separator);g.value=y}else{g.value=""}}else{g.value=e.val()}var n=600;var u=440;if(g.inDialog==false){n=a(window).width()-50;u=a(window).height()-50}if(n>615){n=615}if(u>440){u=440}var t=false;try{t=a("#isMobile").val()}catch(o){}var k=e.attr("id");if(t=="true"||t==true){var j="./w?sid="+c+"&cmd=CLIENT_UI_ADDRESSBOOK&address="+encodeURI(g);try{openMobileDialog("address",k,g.filter)}catch(o){}}else{var v="address_dialog";var q=FrmDialog;if(g.inDialog){q=parent.FrmDialog;a.mask();disableAllAddress(true)}var m=[];if(e.is(":hidden")){m.push({text:清空,handler:function(){e.val("");e.blur();s.close("address_dialog")}})}m.push({text:确定,id:"address_dialog_button_confirm",cls:"blue",handler:function(){var D="";var C={};if(s.win().targetField==""&&s.win().addressType=="user"){h.focus();D=s.win().getSelectList(g.separator);C[k]=D;h.val(D);h.blur();(g.inDialog?parent.FrmDialog:FrmDialog).close("address_dialog")}else{C=getValue(s,g.inDialog,g);if(C){D=C[k]}}if(g.callback!=null){g.callback()}var B=a(h).get(0);if(B.onchange){if(B.fireEvent){B.fireEvent("onchange")}else{var z=document.createEvent("HTMLEvents");z.initEvent("change",true,true);B.dispatchEvent(z)}}var A=window.onAddressSelectedEvent;if(D&&A){window.onAddressSelectedEvent(k,D,C)}}});m.push({text:取消,handler:function(){a.mask("close");enableAllAddress(true);if(g.beforeCancel!=null){g.beforeCancel()}s.close("address_dialog")}});var s=q.open({id:v,title:地址簿,width:n,height:u,url:"./w",data:{sid:c,cmd:"CLIENT_UI_ADDRESSBOOK",address:awsui.encode(g)},buttons:m,onClose:function(){a.mask("close");enableAllAddress(true);if(g.inDialog){a(a(window.parent.document).find(".dlg-close")[0]).show()}}});if(g.inDialog){a(a(window.parent.document).find(".dlg-close")[0]).hide();parent.$("#"+s.name().substring(0,s.name().indexOf("-frm"+v))+v+" .blue").attr("disabled","true");parent.$("#"+s.name().substring(0,s.name().indexOf("-frm"+v))+v+" .blue").addClass("disable")}else{a("#"+s.name().substring(0,s.name().indexOf("-frm"+v))+v+" .blue").attr("disabled","true");a("#"+s.name().substring(0,s.name().indexOf("-frm"+v))+v+" .blue").addClass("disable")}}}})}})(jQuery);function enableAllAddress(a){if(a){parent.$("button, .button, input[type='button']").removeAttr("disabled");parent.$("button, .button, input[type='button']").removeClass("disable")}else{$("button, .button, input[type='button']").removeAttr("disabled");$("button, .button, input[type='button']").removeClass("disable")}}function disableAllAddress(a){if(a){parent.$("button, .button, input[type='button']").attr("disabled","true");parent.$("button, .button, input[type='button']").addClass("disable")}else{$("button, .button, input[type='button']").attr("disabled","true");$("button, .button, input[type='button']").addClass("disable")}}function getValue(i,a,c,l){var g;if(i){g=i.win()}else{g=l}var j=false;try{j=parent.$("#isMobile").val()}catch(h){}var d;if(g.addressType=="user"){if(g.isSingle){d=g.getAdvancedSelectValue()}else{d=g.getAdvancedMultipartValue()}}else{if(g.addressType=="dept"){if(g.isSingle){d=g.getDeparmentValue()}else{d=g.getAdvancedMultipartValue()}}}d=awsui.decode(d);if(c.isGrid){$("#"+c.gridId).awsGrid("quitEditMode")}for(var k in d){if(c.isGrid){var f=$("#"+c.gridId).awsGrid("getRowData",c.gridRowIndx);f[k]=d[k];$("#"+c.gridId).awsGrid("setEditData",f);$("#"+c.gridId).awsGrid("refreshCell",{rowIndx:c.gridRowIndx,dataIndx:k})}else{try{$("#"+k).focus();$("#"+k).attr("separator",c.separator);$("#"+k).val(d[k]);$("#"+k).blur()}catch(h){}}}if(j==true||j=="true"){}else{(a?parent.FrmDialog:FrmDialog).get("address_dialog").close()}return d}function getTargetValue(d,l){var o=$("#targetField_"+d).val();var f=$("#targetField_"+d).attr("delimiter");if(o==undefined||o==""){o="";if(l.filter.addressType=="user"){f=l.filter.addressSetting.delimiter;o=l.filter.targetField}else{if(l.filter.addressType=="dept"){o=l.filter.deptTargetField}}}var h=new Array();if(o!=""){var t=o.split(",");for(var q=0;q<t.length;q++){try{if(l.isGrid){var s=$("#"+l.gridId).awsGrid("getRowData",l.gridRowIndx);if(s[t[q]]==undefined){h.push("")}else{h.push(s[t[q]])}}else{h.push(document.getElementById(t[q]).value)}}catch(u){}}}if(f==undefined){return h}var c=getmailListOptions(h[0]);var a=c?c.split(f).length:0;var p=new Array(a);for(var n=0;n<a;n++){p[n]="";for(var q=0;q<h.length;q++){var v=getmailListOptions(h[q]);var m=v.split(f);var g=m[n]==""?null:m[n];p[n]+=g==null?"":(g.replace(/&nbsp;/g," ")+f)}if(p[n].endWith(f)){p[n]=p[n].substring(0,p[n].length-1)}}return p}function getmailListOptions(e){if(e){var a=e.match(/<[^>]+>/g);for(var d=0;a!=null&&d<a.length;d++){var c=a[d].replace(/\s/g,"&nbsp;");e=e.replace(a[d],c)}}return e}function fillBackTargetValue(){var c=$("#targetField_"+adressName).val();var a=$("#targetField_"+adressName).attr("delimiter")}function openMobileDialog(e,c,d){var a=$("#isMobile").val();if(a||a=="true"){mobileDialogOpen.scrollTop=$("body").scrollTop();$("#aws-form-container").hide();var f=$("#isMainForm").val()=="true"?window:parent;f.$("#mainFormPage").hide();f.$("#boItemNameSearch_div").html("");if(e="address"){if($("#isMainForm").val()=="false"){if(d){d.isSelf=true}else{d={isSelf:true}}}mobileDialogOpen.openMobileAddress("","",c,"",d,false);boItemNameGlobal=undefined;configGlobal=undefined;addressDatasObj={}}}}var boItemNameGlobal;var configGlobal;var addressDatasObj={};var mobileDialogOpen={openMobileAddress:function(c,g,a,f,d,e){awsui.ajax.request({type:"POST",url:"../r/jd",dataType:"json",alert:false,data:{sid:$("#sid").val(),cmd:"CLIENT_UI_CHOOSE_TASK_PERSON",user:c,dept:g,type:"address",haveChooseUser:"",addressConfig:awsui.encode(d),isShowUser:e},ok:function(j){if(d!=undefined&&configGlobal==undefined){configGlobal=d}var i=$("#isMainForm").val()=="true"||(configGlobal&&configGlobal.isSelf)?window:parent;if(a&&!boItemNameGlobal){boItemNameGlobal=a}i.$("#mainFormPage").hide();i.$("#boItemNameSearch_div").html(j.data.html);i.$("#boItemNameSearch_div").show();mobileDialogOpen.initCheckBoxStatus();var k=i.document.getElementById("list");k.style.height=(i.$("#boItemNameSearch_div").height()-50)+"px";var h="click";try{if(!($.browser.isIPhone&&top.location.href!=location.href)){h="tap"}}catch(l){}i.$("#chooseUserBack").off(h).on(h,function(m){setTimeout(function(){mobileDialogOpen.chooseUserBack()},12);m.preventDefault();m.stopPropagation()});i.$("#choosePersondone").off(h).on(h,function(m){setTimeout(function(){mobileDialogOpen.chooseDone()},12);m.preventDefault();m.stopPropagation()});i.$("#emptyAddress").off("click").on("click",function(m){mobileDialogOpen.emptyAddress();m.preventDefault();m.stopPropagation();return false});i.$("#searchPersonIcon").off(h).on(h,function(m){mobileDialogOpen.searchPerson()});$("#searchPerson").bind("keypress",function(m){if(m.which===13){mobileDialogOpen.searchPerson()}});mobileDialogOpen.bindAllEvent()},err:function(h){$.simpleAlert(h.msg,h.result)}})},bindAllEvent:function(){if($("#upParentDept")){$("#upParentDept").off("tap").on("tap",function(){mobileDialogOpen.upParentDept($(this).attr("value"))})}var a=$("#isMainForm").val()=="true"||(configGlobal&&configGlobal.isSelf)?window:parent;a.$("input[name^=chooseDept]").off("click").on("click",function(c){mobileDialogOpen.changeDeptAddressData(this);c.stopPropagation()});a.$("div[name=mui-address-dept-user-click]").each(function(){var c=$(this);c.off("click").on("click",function(){var e=c.attr("value");var d=c.attr("isShowUser");mobileDialogOpen.showDeptPerson(e,boItemNameGlobal,d)})});if($("#searchPerson").attr("placeholder")=="搜索部门"){$("#deptList").css("max-height","100%");$(".fullDeptName").css("max-width",$(".fullDeptName").parent().width()-100)}},chooseDone:function(){var a={};var h="";if(configGlobal&&configGlobal.isAdvMode){for(var f=0;f<Object.keys(addressDatasObj).length;f++){var d=Object.keys(addressDatasObj)[f];$("#"+d).val(addressDatasObj[d]);h=addressDatasObj[boItemNameGlobal];a[d]=addressDatasObj[d];try{$("#"+d).trigger("blur.case"+d)}catch(g){}}}else{for(var c in addressDatasObj[boItemNameGlobal]){if(h==""){h=addressDatasObj[boItemNameGlobal][c]}else{h+=" "+addressDatasObj[boItemNameGlobal][c]}}$("#"+boItemNameGlobal).val(h);a[boItemNameGlobal]=h;try{$("#"+boItemNameGlobal).trigger("blur.case"+boItemNameGlobal)}catch(g){}}if(window.onAddressSelectedEvent){window.onAddressSelectedEvent(boItemNameGlobal,h,a)}mobileDialogOpen.chooseUserBack()},emptyAddress:function(){if(configGlobal&&configGlobal.isAdvMode){var a=(configGlobal.targetField||configGlobal.deptTargetField).split(",");for(var c=0;c<a.length;c++){var d=a[c];$("#"+d).val("");try{$("#"+d).trigger("blur.case"+key)}catch(f){}}}else{$("#"+boItemNameGlobal).val("");try{$("#"+boItemNameGlobal).trigger("blur.case"+boItemNameGlobal)}catch(f){}}mobileDialogOpen.chooseUserBack()},chooseUserBack:function(){if($("#isMainForm").val()=="false"){mobileChooseDivShow.close(true)}else{mobileChooseDivShow.close()}if(configGlobal&&configGlobal.isSelf){parent.mobileDialog.btnControl("enable")}$("#aws-form-container").show();$("body").scrollTop(mobileDialogOpen.scrollTop);mobileDialogOpen.scrollTop=0;return false},searchPerson:function(){var c=$("#isMainForm").val()=="true"||(configGlobal&&configGlobal.isSelf)?window:parent;var a=c.$("#searchPerson").val();if(a==""){$.simpleAlert(请输入查询条件,"info");return false}setTimeout(function(){mobileDialogOpen.openMobileAddress(a,"","","",configGlobal)},300)},showDeptPerson:function(d,a,c){mobileDialogOpen.openMobileAddress("",d,a,"",configGlobal,c)},upParentDept:function(a){awsui.ajax.request({url:"./jd",method:"POST",data:{sid:$("#sid").val(),cmd:"CLIENT_UI_PARENT_DEPT_USER_HTML",deptId:a,addressConfig:awsui.encode(configGlobal)},success:function(c){$("#listDiv").children().remove();$("#listDiv").prepend(c.data.departmentHtml);$("#listDiv").append(c.data.userHtml);mobileDialogOpen.initCheckBoxStatus();mobileDialogOpen.bindAllEvent()}})},initCheckBoxStatus:function(){if(configGlobal&&configGlobal.isAdvMode){var g=configGlobal.targetField.split(",");if(g.length>0){for(var d=0;d<g.length;d++){var j=g[d];if(configGlobal.sourceField.indexOf("UID")>-1||configGlobal.sourceField.indexOf("USERNAMEALIAS")>-1){if(addressDatasObj[j]==undefined){addressDatasObj[j]=$("#"+j).val()}$('input[name="choosePersonCheck"]').each(function(){var i=-1;var k=configGlobal.sourceField.split(",");for(var l=0;l<k.length;l++){if(k[l]=="UID"||k[l]=="USERNAMEALIAS"){i=l}}var m;if(addressDatasObj[j]==undefined){if($.trim($("#"+g[i]).val())!=""){m=$("#"+g[i]).val().split(" ")}}else{if(addressDatasObj[j]!=""){m=addressDatasObj[j].split(" ")}}if(m){$('input[name="choosePersonCheck"]').each(function(){var n=$(this).val().split("$");for(var o=0;o<m.length;o++){var p;if(m[o].indexOf("<")>-1){p=m[o].substring(0,m[o].indexOf("<"))}else{p=m[o]}if(p==n[0]){$(this).attr("checked",true);break}}})}else{addressDatasObj[j]=""}})}else{addressDatasObj[j]=""}}}else{var e=configGlobal.deptTargetField.split(",");if(e.length>0){for(var d=0;d<e.length;d++){var j=e[d]}}}}else{if(!addressDatasObj[boItemNameGlobal]){addressDatasObj[boItemNameGlobal]={};var f=$("#"+boItemNameGlobal).val();var h=f.split(" ");for(var d=0;d<h.length;d++){var c=h[d];if(c!=""){var a=c;if(c.indexOf("<")!=-1){a=c.substring(0,c.indexOf("<"))}addressDatasObj[boItemNameGlobal][a]=c;$('input[name="choosePersonCheck"]').each(function(){var i=$(this).val().split(",");if(a==i[0]){$(this).attr("checked",true);return false}})}}}else{for(var a in addressDatasObj[boItemNameGlobal]){$('input[name="choosePersonCheck"]').each(function(){var i=$(this).val().split(",");if(a==i[0]){$(this).attr("checked",true);return false}})}}}},changeAddressData:function(g){var o=$(g).find("input[name=choosePersonCheck]:first");if(configGlobal&&configGlobal.isAdvMode){var n=o.val().split("$");var m=awsui.decode(n[4]);if(o.is(":checked")){var e=configGlobal.targetField.split(",");for(var h=0;h<e.length;h++){var d=e[h];var k=$("#"+d).data("separator")||" ";if(addressDatasObj[d]==""){addressDatasObj[d]=m[h][Object.keys(m[h])[0]]}else{if($(g).hasClass("mui-radio")){addressDatasObj[d]=m[h][Object.keys(m[h])[0]]}else{addressDatasObj[d]+=k+m[h][Object.keys(m[h])[0]]}}}}else{var e=configGlobal.targetField.split(",");for(var h=0;h<e.length;h++){var d=e[h];var f=addressDatasObj[d].split(" ");for(var c=0;c<f.length;c++){var a=f[c];if(a==m[h][Object.keys(m[h])[0]]){f.splice(c,1);break}}addressDatasObj[d]=f.join(" ")}}if(configGlobal.sourceField.indexOf("UID")>-1||configGlobal.sourceField.indexOf("USERNAMEALIAS")>-1){}}else{var n=o.val().split(",");if(o.is(":checked")){if(o.hasClass("mui-address-radio")){addressDatasObj[boItemNameGlobal]={}}addressDatasObj[boItemNameGlobal][n[0]]=n[3]}else{for(var l in addressDatasObj[boItemNameGlobal]){if(l==n[0]){delete addressDatasObj[boItemNameGlobal][l];break}}}}},changeDeptAddressData:function(h){var f=(configGlobal.deptTargetField||configGlobal.targetField).split(",");var c=awsui.decode("["+$(h).attr("value")+"]");if($(h).is(":checked")){for(var k=0;k<f.length;k++){var d=f[k];var m=$("#"+d).data("separator")||" ";if(!addressDatasObj[d]){addressDatasObj[d]=c[k][Object.keys(c[k])[0]]}else{if($(h).attr("type")=="radio"){addressDatasObj[d]=c[k][Object.keys(c[k])[0]]}else{addressDatasObj[d]+=m+c[k][Object.keys(c[k])[0]]}}}}else{for(var k=0;k<f.length;k++){var d=f[k];var m=$("#"+d).data("separator")||" ";try{var l=addressDatasObj[d].split(m);for(var g=0;g<l.length;g++){var a=l[g];if(a==c[k][Object.keys(c[k])[0]]){l.splice(g,1);break}}addressDatasObj[d]=l.join(" ")}catch(n){}}}}};var jscolor={dir:"",bindClass:"color",binding:true,preloading:true,install:function(){jscolor.addEvent(window,"load",jscolor.init)},init:function(){if(jscolor.binding){jscolor.bind()}if(jscolor.preloading){jscolor.preload()}},getDir:function(){if(!jscolor.dir){var a=jscolor.detectDir();jscolor.dir=a!==false?a:"jscolor/"}return jscolor.dir},detectDir:function(){var d=location.href;var f=document.getElementsByTagName("base");for(var a=0;a<f.length;a+=1){if(f[a].href){d=f[a].href}}var f=document.getElementsByTagName("script");for(var a=0;a<f.length;a+=1){if(f[a].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(f[a].src)){var g=new jscolor.URI(f[a].src);var c=g.toAbsolute(d);c.path=c.path.replace(/[^\/]+$/,"");c.query=null;c.fragment=null;return c.toString()}}return false},bind:function(){var f=new RegExp("(^|\\s)("+jscolor.bindClass+")\\s*(\\{[^}]*\\})?","i");var g=document.getElementsByTagName("input");for(var d=0;d<g.length;d+=1){var c;if(!g[d].color&&g[d].className&&(c=g[d].className.match(f))){var h={};if(c[3]){try{h=(new Function("return ("+c[3]+")"))()}catch(a){}}g[d].color=new jscolor.color(g[d],h)}}},preload:function(){for(var a in jscolor.imgRequire){if(jscolor.imgRequire.hasOwnProperty(a)){jscolor.loadImage(a)}}},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(a){jscolor.imgRequire[a]=true},loadImage:function(a){if(!jscolor.imgLoaded[a]){jscolor.imgLoaded[a]=new Image();jscolor.imgLoaded[a].src=jscolor.getDir()+a}},fetchElement:function(a){return typeof a==="string"?document.getElementById(a):a},addEvent:function(a,d,c){if(a.addEventListener){a.addEventListener(d,c,false)}else{if(a.attachEvent){a.attachEvent("on"+d,c)}}},fireEvent:function(a,d){if(!a){return}if(document.createEvent){var c=document.createEvent("HTMLEvents");c.initEvent(d,true,true);a.dispatchEvent(c)}else{if(document.createEventObject){var c=document.createEventObject();a.fireEvent("on"+d,c)}else{if(a["on"+d]){a["on"+d]()}}}},getElementPos:function(d){var f=d,c=d;var a=0,g=0;if(f.offsetParent){do{a+=f.offsetLeft;g+=f.offsetTop}while(f=f.offsetParent)}while((c=c.parentNode)&&c.nodeName.toUpperCase()!=="BODY"){a-=c.scrollLeft;g-=c.scrollTop}return[a,g]},getElementSize:function(a){return[a.offsetWidth,a.offsetHeight]},getRelMousePos:function(c){var a=0,d=0;if(!c){c=window.event}if(typeof c.offsetX==="number"){a=c.offsetX;d=c.offsetY}else{if(typeof c.layerX==="number"){a=c.layerX;d=c.layerY}}return{x:a,y:d}},getViewPos:function(){if(typeof window.pageYOffset==="number"){return[window.pageXOffset,window.pageYOffset]}else{if(document.body&&(document.body.scrollLeft||document.body.scrollTop)){return[document.body.scrollLeft,document.body.scrollTop]}else{if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)){return[document.documentElement.scrollLeft,document.documentElement.scrollTop]}else{return[0,0]}}}},getViewSize:function(){if(typeof window.innerWidth==="number"){return[window.innerWidth,window.innerHeight]}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){return[document.body.clientWidth,document.body.clientHeight]}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){return[document.documentElement.clientWidth,document.documentElement.clientHeight]}else{return[0,0]}}}},URI:function(a){this.scheme=null;this.authority=null;this.path="";this.query=null;this.fragment=null;this.parse=function(e){var d=e.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/);this.scheme=d[3]?d[2]:null;this.authority=d[5]?d[6]:null;this.path=d[7];this.query=d[9]?d[10]:null;this.fragment=d[12]?d[13]:null;return this};this.toString=function(){var d="";if(this.scheme!==null){d=d+this.scheme+":"}if(this.authority!==null){d=d+"//"+this.authority}if(this.path!==null){d=d+this.path}if(this.query!==null){d=d+"?"+this.query}if(this.fragment!==null){d=d+"#"+this.fragment}return d};this.toAbsolute=function(f){var f=new jscolor.URI(f);var e=this;var d=new jscolor.URI;if(f.scheme===null){return false}if(e.scheme!==null&&e.scheme.toLowerCase()===f.scheme.toLowerCase()){e.scheme=null}if(e.scheme!==null){d.scheme=e.scheme;d.authority=e.authority;d.path=c(e.path);d.query=e.query}else{if(e.authority!==null){d.authority=e.authority;d.path=c(e.path);d.query=e.query}else{if(e.path===""){d.path=f.path;if(e.query!==null){d.query=e.query}else{d.query=f.query}}else{if(e.path.substr(0,1)==="/"){d.path=c(e.path)}else{if(f.authority!==null&&f.path===""){d.path="/"+e.path}else{d.path=f.path.replace(/[^\/]+$/,"")+e.path}d.path=c(d.path)}d.query=e.query}d.authority=f.authority}d.scheme=f.scheme}d.fragment=e.fragment;return d};function c(f){var d="";while(f){if(f.substr(0,3)==="../"||f.substr(0,2)==="./"){f=f.replace(/^\.+/,"").substr(1)}else{if(f.substr(0,3)==="/./"||f==="/."){f="/"+f.substr(3)}else{if(f.substr(0,4)==="/../"||f==="/.."){f="/"+f.substr(4);d=d.replace(/\/?[^\/]*$/,"")}else{if(f==="."||f===".."){f=""}else{var e=f.match(/^\/?[^\/]*/)[0];f=f.substr(e.length);d=d+e}}}}}return d}if(a){this.parse(a)}},color:function(D,e){this.required=true;this.adjust=true;this.hash=false;this.caps=true;this.slider=true;this.valueElement=D;this.styleElement=D;this.onImmediateChange=null;this.hsv=[0,0,1];this.rgb=[1,1,1];this.minH=0;this.maxH=6;this.minS=0;this.maxS=1;this.minV=0;this.maxV=1;this.pickerOnfocus=true;this.pickerMode="HSV";this.pickerPosition="bottom";this.pickerSmartPosition=true;this.pickerButtonHeight=20;this.pickerClosable=false;this.pickerCloseText="Close";this.pickerButtonColor="ButtonText";this.pickerFace=10;this.pickerFaceColor="ThreeDFace";this.pickerBorder=1;this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight";this.pickerInset=1;this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow";this.pickerZIndex=10000;for(var u in e){if(e.hasOwnProperty(u)){this[u]=e[u]}}this.hidePicker=function(){if(w()){h()}};this.showPicker=function(){if(!w()){var M=jscolor.getElementPos(D);var J=jscolor.getElementSize(D);var G=jscolor.getViewPos();var O=jscolor.getViewSize();var p=v(this);var N,L,K;switch(this.pickerPosition.toLowerCase()){case"left":N=1;L=0;K=-1;break;case"right":N=1;L=0;K=1;break;case"top":N=0;L=1;K=-1;break;default:N=0;L=1;K=1;break}var I=(J[L]+p[L])/2;if(!this.pickerSmartPosition){var H=[M[N],M[L]+J[L]-I+I*K]}else{var H=[-G[N]+M[N]+p[N]>O[N]?(-G[N]+M[N]+J[N]/2>O[N]/2&&M[N]+J[N]-p[N]>=0?M[N]+J[N]-p[N]:M[N]):M[N],-G[L]+M[L]+J[L]+p[L]-I+I*K>O[L]?(-G[L]+M[L]+J[L]/2>O[L]/2&&M[L]+J[L]-I-I*K>=0?M[L]+J[L]-I-I*K:M[L]+J[L]-I+I*K):(M[L]+J[L]-I+I*K>=0?M[L]+J[L]-I+I*K:M[L]+J[L]-I-I*K)]}l(H[N],H[L])}};this.importColor=function(){if(!a){this.exportColor()}else{if(!this.adjust){if(!this.fromString(a.value,z)){F.style.backgroundImage=F.jscStyle.backgroundImage;F.style.backgroundColor=F.jscStyle.backgroundColor;F.style.color=F.jscStyle.color;this.exportColor(z|E)}}else{if(!this.required&&/^\s*$/.test(a.value)){a.value="";F.style.backgroundImage=F.jscStyle.backgroundImage;F.style.backgroundColor=F.jscStyle.backgroundColor;F.style.color=F.jscStyle.color;this.exportColor(z|E)}else{if(this.fromString(a.value)){}else{this.exportColor()}}}}};this.exportColor=function(p){if(!(p&z)&&a){var G=this.toString();if(this.caps){G=G.toUpperCase()}if(this.hash){G="#"+G}a.value=G}if(!(p&E)&&F){F.style.backgroundImage="none";F.style.backgroundColor="#"+this.toString();F.style.color=0.213*this.rgb[0]+0.715*this.rgb[1]+0.072*this.rgb[2]<0.5?"#FFF":"#000"}if(!(p&x)&&w()){t()}if(!(p&f)&&w()){C()}};this.fromHSV=function(I,H,G,p){if(I!==null){I=Math.max(0,this.minH,Math.min(6,this.maxH,I))}if(H!==null){H=Math.max(0,this.minS,Math.min(1,this.maxS,H))}if(G!==null){G=Math.max(0,this.minV,Math.min(1,this.maxV,G))}this.rgb=i(I===null?this.hsv[0]:(this.hsv[0]=I),H===null?this.hsv[1]:(this.hsv[1]=H),G===null?this.hsv[2]:(this.hsv[2]=G));this.exportColor(p)};this.fromRGB=function(K,J,p,G){if(K!==null){K=Math.max(0,Math.min(1,K))}if(J!==null){J=Math.max(0,Math.min(1,J))}if(p!==null){p=Math.max(0,Math.min(1,p))}var I=A(K===null?this.rgb[0]:K,J===null?this.rgb[1]:J,p===null?this.rgb[2]:p);if(I[0]!==null){this.hsv[0]=Math.max(0,this.minH,Math.min(6,this.maxH,I[0]))}if(I[2]!==0){this.hsv[1]=I[1]===null?null:Math.max(0,this.minS,Math.min(1,this.maxS,I[1]))}this.hsv[2]=I[2]===null?null:Math.max(0,this.minV,Math.min(1,this.maxV,I[2]));var H=i(this.hsv[0],this.hsv[1],this.hsv[2]);this.rgb[0]=H[0];this.rgb[1]=H[1];this.rgb[2]=H[2];this.exportColor(G)};this.fromString=function(H,G){var p=H.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i);if(!p){return false}else{if(p[1].length===6){this.fromRGB(parseInt(p[1].substr(0,2),16)/255,parseInt(p[1].substr(2,2),16)/255,parseInt(p[1].substr(4,2),16)/255,G)}else{this.fromRGB(parseInt(p[1].charAt(0)+p[1].charAt(0),16)/255,parseInt(p[1].charAt(1)+p[1].charAt(1),16)/255,parseInt(p[1].charAt(2)+p[1].charAt(2),16)/255,G)}return true}};this.toString=function(){return((256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1))};function A(K,J,G){var L=Math.min(Math.min(K,J),G);var H=Math.max(Math.max(K,J),G);var p=H-L;if(p===0){return[null,0,H]}var I=K===L?3+(G-J)/p:(J===L?5+(K-G)/p:1+(J-K)/p);return[I===6?0:I,p/H,H]}function i(J,I,G){if(J===null){return[G,G,G]}var H=Math.floor(J);var K=H%2?J-H:1-(J-H);var p=G*(1-I);var L=G*(1-I*K);switch(H){case 6:case 0:return[G,L,p];case 1:return[L,G,p];case 2:return[p,G,L];case 3:return[p,L,G];case 4:return[L,p,G];case 5:return[G,p,L]}}function h(){delete jscolor.picker.owner;document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB)}function l(N,M){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(m.pickerCloseText)};for(var K=0,L=4;K<jscolor.images.sld[1];K+=L){var J=document.createElement("div");J.style.height=L+"px";J.style.fontSize="1px";J.style.lineHeight="0";jscolor.picker.sld.appendChild(J)}jscolor.picker.sldB.appendChild(jscolor.picker.sld);jscolor.picker.box.appendChild(jscolor.picker.sldB);jscolor.picker.box.appendChild(jscolor.picker.sldM);jscolor.picker.padB.appendChild(jscolor.picker.pad);jscolor.picker.box.appendChild(jscolor.picker.padB);jscolor.picker.box.appendChild(jscolor.picker.padM);jscolor.picker.btnS.appendChild(jscolor.picker.btnT);jscolor.picker.btn.appendChild(jscolor.picker.btnS);jscolor.picker.box.appendChild(jscolor.picker.btn);jscolor.picker.boxB.appendChild(jscolor.picker.box)}var G=jscolor.picker;G.box.onmouseup=G.box.onmouseout=function(){D.focus()};G.box.onmousedown=function(){o=true};G.box.onmousemove=function(p){if(d||q){d&&y(p);q&&j(p);if(document.selection){document.selection.empty()}else{if(window.getSelection){window.getSelection().removeAllRanges()}}g()}};if("ontouchstart" in window){var Q=function(R){var p={offsetX:R.touches[0].pageX-k.X,offsetY:R.touches[0].pageY-k.Y};if(d||q){d&&y(p);q&&j(p);g()}R.stopPropagation();R.preventDefault()};G.box.removeEventListener("touchmove",Q,false);G.box.addEventListener("touchmove",Q,false)}G.padM.onmouseup=G.padM.onmouseout=function(){if(d){d=false;jscolor.fireEvent(a,"change")}};G.padM.onmousedown=function(p){switch(c){case 0:if(m.hsv[2]===0){m.fromHSV(null,null,1)}break;case 1:if(m.hsv[1]===0){m.fromHSV(null,1,null)}break}q=false;d=true;y(p);g()};if("ontouchstart" in window){G.padM.addEventListener("touchstart",function(p){k={X:p.target.offsetParent.offsetLeft,Y:p.target.offsetParent.offsetTop};this.onmousedown({offsetX:p.touches[0].pageX-k.X,offsetY:p.touches[0].pageY-k.Y})})}G.sldM.onmouseup=G.sldM.onmouseout=function(){if(q){q=false;jscolor.fireEvent(a,"change")}};G.sldM.onmousedown=function(p){d=false;q=true;j(p);g()};if("ontouchstart" in window){G.sldM.addEventListener("touchstart",function(p){k={X:p.target.offsetParent.offsetLeft,Y:p.target.offsetParent.offsetTop};this.onmousedown({offsetX:p.touches[0].pageX-k.X,offsetY:p.touches[0].pageY-k.Y})})}var P=v(m);G.box.style.width=P[0]+"px";G.box.style.height=P[1]+"px";G.boxB.style.position="fixed";G.boxB.style.clear="both";G.boxB.style.left=N+"px";G.boxB.style.top=M+"px";G.boxB.style.zIndex=m.pickerZIndex;G.boxB.style.border=m.pickerBorder+"px solid";G.boxB.style.borderColor=m.pickerBorderColor;G.boxB.style.background=m.pickerFaceColor;G.pad.style.width=jscolor.images.pad[0]+"px";G.pad.style.height=jscolor.images.pad[1]+"px";G.padB.style.position="absolute";G.padB.style.left=m.pickerFace+"px";G.padB.style.top=m.pickerFace+"px";G.padB.style.border=m.pickerInset+"px solid";G.padB.style.borderColor=m.pickerInsetColor;G.padM.style.position="absolute";G.padM.style.left="0";G.padM.style.top="0";G.padM.style.width=m.pickerFace+2*m.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px";G.padM.style.height=G.box.style.height;G.padM.style.cursor="crosshair";G.sld.style.overflow="hidden";G.sld.style.width=jscolor.images.sld[0]+"px";G.sld.style.height=jscolor.images.sld[1]+"px";G.sldB.style.display=m.slider?"block":"none";G.sldB.style.position="absolute";G.sldB.style.right=m.pickerFace+"px";G.sldB.style.top=m.pickerFace+"px";G.sldB.style.border=m.pickerInset+"px solid";G.sldB.style.borderColor=m.pickerInsetColor;G.sldM.style.display=m.slider?"block":"none";G.sldM.style.position="absolute";G.sldM.style.right="0";G.sldM.style.top="0";G.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+m.pickerFace+2*m.pickerInset+"px";G.sldM.style.height=G.box.style.height;try{G.sldM.style.cursor="pointer"}catch(I){G.sldM.style.cursor="hand"}function O(){var p=m.pickerInsetColor.split(/\s+/);var R=p.length<2?p[0]:p[1]+" "+p[0]+" "+p[0]+" "+p[1];G.btn.style.borderColor=R}G.btn.style.display=m.pickerClosable?"block":"none";G.btn.style.position="absolute";G.btn.style.left=m.pickerFace+"px";G.btn.style.bottom=m.pickerFace+"px";G.btn.style.padding="0 15px";G.btn.style.height="18px";G.btn.style.border=m.pickerInset+"px solid";O();G.btn.style.color=m.pickerButtonColor;G.btn.style.font="12px sans-serif";G.btn.style.textAlign="center";try{G.btn.style.cursor="pointer"}catch(I){G.btn.style.cursor="hand"}G.btn.onmousedown=function(){m.hidePicker()};G.btnS.style.lineHeight=G.btn.style.height;switch(c){case 0:var H="hs.png";break;case 1:var H="hv.png";break}G.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')";G.padM.style.backgroundRepeat="no-repeat";G.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')";G.sldM.style.backgroundRepeat="no-repeat";G.pad.style.backgroundImage="url('"+jscolor.getDir()+H+"')";G.pad.style.backgroundRepeat="no-repeat";G.pad.style.backgroundPosition="0 0";t();C();jscolor.picker.owner=m;document.getElementsByTagName("body")[0].appendChild(G.boxB)}function v(G){var p=[2*G.pickerInset+2*G.pickerFace+jscolor.images.pad[0]+(G.slider?2*G.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),G.pickerClosable?4*G.pickerInset+3*G.pickerFace+jscolor.images.pad[1]+G.pickerButtonHeight:2*G.pickerInset+2*G.pickerFace+jscolor.images.pad[1]];return p}function t(){switch(c){case 0:var I=1;break;case 1:var I=2;break}var M=Math.round((m.hsv[0]/6)*(jscolor.images.pad[0]-1));var L=Math.round((1-m.hsv[I])*(jscolor.images.pad[1]-1));jscolor.picker.padM.style.backgroundPosition=(m.pickerFace+m.pickerInset+M-Math.floor(jscolor.images.cross[0]/2))+"px "+(m.pickerFace+m.pickerInset+L-Math.floor(jscolor.images.cross[1]/2))+"px";var p=jscolor.picker.sld.childNodes;switch(c){case 0:var K=i(m.hsv[0],m.hsv[1],1);for(var G=0;G<p.length;G+=1){p[G].style.backgroundColor="rgb("+(K[0]*(1-G/p.length)*100)+"%,"+(K[1]*(1-G/p.length)*100)+"%,"+(K[2]*(1-G/p.length)*100)+"%)"}break;case 1:var K,N,J=[m.hsv[2],0,0];var G=Math.floor(m.hsv[0]);var H=G%2?m.hsv[0]-G:1-(m.hsv[0]-G);switch(G){case 6:case 0:K=[0,1,2];break;case 1:K=[1,0,2];break;case 2:K=[2,0,1];break;case 3:K=[2,1,0];break;case 4:K=[1,2,0];break;case 5:K=[0,2,1];break}for(var G=0;G<p.length;G+=1){N=1-1/(p.length-1)*G;J[1]=J[0]*(1-N*H);J[2]=J[0]*(1-N);p[G].style.backgroundColor="rgb("+(J[K[0]]*100)+"%,"+(J[K[1]]*100)+"%,"+(J[K[2]]*100)+"%)"}break}}function C(){switch(c){case 0:var p=2;break;case 1:var p=1;break}var G=Math.round((1-m.hsv[p])*(jscolor.images.sld[1]-1));jscolor.picker.sldM.style.backgroundPosition="0 "+(m.pickerFace+m.pickerInset+G-Math.floor(jscolor.images.arrow[1]/2))+"px"}function w(){return jscolor.picker&&jscolor.picker.owner===m}function s(){if(a===D){m.importColor()}if(m.pickerOnfocus){m.hidePicker()}}function n(){if(a!==D){m.importColor()}}function y(H){var G=jscolor.getRelMousePos(H);var p=G.x-m.pickerFace-m.pickerInset;var I=G.y-m.pickerFace-m.pickerInset;switch(c){case 0:m.fromHSV(p*(6/(jscolor.images.pad[0]-1)),1-I/(jscolor.images.pad[1]-1),null,f);break;case 1:m.fromHSV(p*(6/(jscolor.images.pad[0]-1)),null,1-I/(jscolor.images.pad[1]-1),f);break}}function j(G){var p=jscolor.getRelMousePos(G);var H=p.y-m.pickerFace-m.pickerInset;switch(c){case 0:m.fromHSV(null,null,1-H/(jscolor.images.sld[1]-1),x);break;case 1:m.fromHSV(null,1-H/(jscolor.images.sld[1]-1),null,x);break}}function g(){if(m.onImmediateChange){var p;if(typeof m.onImmediateChange==="string"){p=new Function(m.onImmediateChange)}else{p=m.onImmediateChange}p.call(m)}}var m=this;var c=this.pickerMode.toLowerCase()==="hvs"?1:0;var o=false;var a=jscolor.fetchElement(this.valueElement),F=jscolor.fetchElement(this.styleElement);var d=false,q=false,k={};var z=1<<0,E=1<<1,x=1<<2,f=1<<3;jscolor.addEvent(D,"focus",function(){if(m.pickerOnfocus){m.showPicker()}});jscolor.addEvent(D,"blur",function(){if(!o){window.setTimeout(function(){o||s();o=false},0)}else{o=false}});if(a){var B=function(){m.fromString(a.value,z);g()};jscolor.addEvent(a,"keyup",B);jscolor.addEvent(a,"input",B);jscolor.addEvent(a,"blur",n);a.setAttribute("autocomplete","off")}if(F){F.jscStyle={backgroundImage:F.style.backgroundImage,backgroundColor:F.style.backgroundColor,color:F.style.color}}switch(c){case 0:jscolor.requireImage("hs.png");break;case 1:jscolor.requireImage("hv.png");break}jscolor.requireImage("cross.gif");jscolor.requireImage("arrow.gif");this.importColor()}};jscolor.install();
/*!
 * User Profile
 */
var userprofile=function(d){if(typeof d=="string"&&d=="close"){var f;try{f=top.window.getUserProfileContainer()}catch(g){f=top.window.document.body}if($(f).find(".awsui-upd-container")[0]){_profile_constainer=$(f).find(".awsui-upd-container");_profile_constainer.remove()}}else{if(typeof d=="string"&&d=="hide"){var f;try{f=top.window.getUserProfileContainer()}catch(g){f=top.window.document.body}if($(f).find(".awsui-upd-container")[0]){_profile_constainer=$(f).find(".awsui-upd-container");_profile_constainer.remove();var c=_profile_constainer.find(".awsui-upd-operate");if(_profile_constainer.css("right")=="0px"){_profile_constainer.animate({right:-_profile_constainer.width()+"px"},"slow",function(){c.attr("title",显示).text("<<");c.hide()})}}}}var a;$(document).on("mouseenter.over",".awsui-user-profile",function(v){var s="awsui_userprofile";var C=$(this);var u;try{u=top.window.getUserProfileContainer()}catch(A){u=top.window.document.body}var z=$('<div id="'+s+'" class="awsui-userprofile-container"></div>');if($("#sid").length>0){sid=$("#sid").val()}if(window.sid!=undefined){sid=window.sid}if(sid==undefined){z.text(页面无法读取参数)}var k=C.attr("userId");var x=C.attr("id");if(k==""){return}if(a!=undefined){$(".awsui-userprofile-container").remove();window.clearTimeout(a)}z.appendTo(document.body);var p=z;var y=document.body;var D=C.offset().left;var j=z.outerWidth()+5;var n=document.body.scrollLeft;var q=$(window).width();if(D-n+j>q){z.css("left",(q-j)+"px")}else{z.css("left",(D+n)+"px")}var l=C.offset().top;var t=z.outerHeight()+5;var m=C.height();var B=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;var i=$(window).height();if(l-B+m+t>i){var h=l-t;if(h<0){h=5;var o=parseInt(z.css("left"))+$(this).width()+5;z.css("left",(o)+"px")}z.css("top",(h)+"px")}else{z.css("top",(l+m)+"px")}var w="\t target.offsetLeft\t "+C.offset().left+"\t body.scrollLeft\t "+y.scrollLeft+"\t win.width\t "+$(window).width()+"\t up.width\t "+p.width()+"\t target.offsetTop\t "+C.offset().top+"\t body.scrollTop\t "+B+"\t win.height \t "+$(window).height()+"\t up.height\t "+p.height()+" \t target.height\t"+C.height();if(sid!=undefined){awsui.ajax.post("./jd?sid="+sid+"&cmd=CLIENT_ORG_USER_PROFILE",{uid:k},function(G){var F=$('<div class="awsui-userprofile-info-container"></div>');if(G.result=="warning"&&G.msg=="notFined"){var I="";var H=$('<span class="awsui-userprofile-info user-name">'+对不起未找到此人信息+"</span>");z.append(I).append(F);F.append(H);return}var M=G.data;var I=$('<div class="awsui-userprofile-photo-container"><img class="awsui-userprofile-photo" src="'+M.userPhoto+'" /></div>');var K=$('<span class="awsui-userprofile-online" title="'+在线+'"></span>');if(!M.online){K.addClass("un");K.attr("title",离线)}var H=$('<span class="awsui-userprofile-info user-name" title="'+M.userName+'">'+M.userName+"</span>");var N=$('<div class="awsui-userprofile-info position" title="'+M.positionName+'">'+M.positionName+"</div>");var e=$('<div class="awsui-userprofile-info dept" title="'+M.departmentName+'">'+M.departmentName+"</div>");z.append(I).append(F);F.append(K).append(H);if(M.positionName!=undefined&&M.positionName!=""){F.append(N)}F.append(e);if(M.mobile!=undefined&&M.mobile!=""){F.append('<div class="awsui-userprofile-info mobile" title="'+M.mobile+'"><span class="awsui-userprofile-info-label mobile"></span>'+M.mobile+"</div>")}if(M.officeTel!=undefined&&M.officeTel!=""){F.append('<div class="awsui-userprofile-info office-tel" title="'+M.officeTel+'"><span class="awsui-userprofile-info-label office-tel"></span>'+M.officeTel+"</div>")}if(M.email!=undefined&&M.email!=""){F.append('<div class="awsui-userprofile-info email" title="'+M.email+'"><span class="awsui-userprofile-info-label email"></span>'+M.email+"</div>")}var E="";if(M["profile-notification"]===true){E+="<option value='com.actionsoft.apps.notification'>通知</option>"}if(M["profile-notification-wechat"]===true){E+="<option value='com.actionsoft.apps.wechat'>微信</option>"}if(E.length>0){var L=$('<span class="awsui-userprofile-info sendmsg" title="发送消息"></span>');F.append(L);L.on("click",function(Q){var P="<table style='margin:0 auto;' class='awsui-ux'><tr>";P+="<td class='awsui-ux-title' style='width:20%;padding-left:0px;' nowrap='nowrap'>接收人</td>";P+="<td id='targetId' style='width:30%;overflow:hidden;' tit='"+k+"'>"+M.userName+"</td>";P+="<td class='awsui-ux-title' style='width:20%;'>沟通方式</td>";P+="<td style='width:30%;'>";P+="<select id='msgType' style='width:130px;' nofit='true' class='awsui-select'>";P+=E;P+="</select>";P+="</td></tr>";P+="<tr><td class='awsui-ux-title' style='width:20%;padding-left:0px;' valign='top'>消息内容</td><td colspan='3' style='width:80%;' class='required' style='padding:10px 15px 0 0;'>";P+="<textarea id='msgContent' placeholder='请输入内容' style='resize:none;outline:none;width:348px;height:120px;' class='txt'></textarea>";P+="<span style='display: block; text-align: left; padding: 3px 0 10px 0; '>还可输入<span id='msgContentSize'>200</span>字</span></td></tr></table>";$("#dialog_msg").remove();var O=document.createElement("div");O.id="dialog_msg";O.style.display="none";O.innerHTML=P;document.body.appendChild(O);$(".awsui-select").customSelect();$("#dialog_msg td").css("padding-top","15px");$("#msgContent").on("keyup",function(S){var R=$(this).val().length;if(R>200){$.simpleAlert("最多允许输入200字");$(this).val($(this).val().substring(0,200));$(this).focus()}$("#msgContentSize").text(200-(R>200?200:R))});$("#dialog_msg").dialog({title:"发送消息",width:500,height:320,model:true,buttons:[{text:"发送",cls:"blue",handler:function(){var S=$("#msgContent").val();if($.trim(S)==""){$.simpleAlert("[消息内容]不能为空","info");return}var R={};R.targetId=$("#targetId").attr("tit");R.msgContent=$("#msgContent").val();R.msgType=$("#msgType").val();$.post("./jd?sid="+sid+"&cmd=com.actionsoft.apps.profile.communicate",R,function(T){if(T.result=="ok"){$("#dialog_msg").dialog("close");$("#msgContent").val("");$.simpleAlert("close");$.simpleAlert("发送成功","ok",1000)}else{$.simpleAlert(T.msg,T.result)}},"json")}}]});Q.stopPropagation()})}if(M["profile-app"]){var J=$('<span type="button" class="button blue custom" style="margin-top: 10px;padding:3px 4px; min-width:45px;">'+详细+"</span>");I.append(J);J.click(function(O){if(top.window.loadbackground){top.window.loadbackground(z,u,k,x,sid)}else{loadbackground(z,u,k,x,sid)}O.stopPropagation()})}},"json")}C.off("mouseleave.over").on("mouseleave.over",function(E){a=window.setTimeout(function(){$(".awsui-userprofile-container").remove()},200);E.preventDefault()});$(".awsui-userprofile-container").on("mouseenter",function(){window.clearTimeout(a)});$(".awsui-userprofile-container").on("mouseleave",function(E){$(this).remove()})})};function loadbackground(v,p,f,s,i){v.remove();var k;if($(p).find(".awsui-upd-container")[0]){k=$(p).find(".awsui-upd-container");var u=k.find(".awsui-upd-operate");if(k.css("right")!="0px"){k.animate({right:"0"},"slow");u.attr("title",隐藏).text(">>")}u.show();if(k.attr("userId")==f){return}if(top.window.awsuiProfileTabs!=undefined){top.window.awsuiProfileTabs.removeAllTabs()}}else{k=$('<div class="awsui-upd-container"></div>').appendTo(p);k.animate({right:"0"},"slow");var u=$('<div class="awsui-upd-operate" title="'+隐藏+'">>></div>');k.append(u);u.unbind("click").click(function(y){var x=$(this);if(x.parent().css("right")=="0px"){x.parent().animate({right:-x.parent().width()+"px"},"slow",function(){x.hide()});x.attr("title",展开).text("<<")}else{x.parent().animate({right:"0"},"slow");$(this).attr("title",隐藏).text(">>")}});var t=$('<div class="awsui-upd-user-container"></div>');var m=$('<div class="awsui-upd-photo-container"><img class="awsui-upd-photo" /></div>');var w=$('<div class="awsui-upd-info-container"></div>');var j=$('<div class="awsui-upd-info user-name"></div>');j.append('<div class="awsui-upd-user-online"></div>');j.append('<span class="user-name"></span>');var e=$('<div class="awsui-upd-info position-name"></div>');var o=$('<div class="awsui-upd-info org-info"></div>');var g=$('<div class="awsui-upd-info"><span class="awsui-userprofile-info-label mobile detail"></span><span class="awsui-userprofile-info-value mobile"></span></div>');var n=$('<div class="awsui-upd-info"><span class="awsui-userprofile-info-label office-tel detail"></span><span class="awsui-userprofile-info-value office-tel"></span></div>');var a=$('<div class="awsui-upd-info"><span class="awsui-userprofile-info-label email detail"></span><span class="awsui-userprofile-info-value email"></span></div>');var c=$('<div class="awsui-upd-content-container"></div>');var q=$('<div class="awsui-upd-profile-conatiner"></div>');var d=$('<div id="awsuiUpdProfileTabs" class="awsui-simple-tab" style="height: 35px;"></div>');var l=$('<iframe id="awsuUpdProfileContent" class="awsui-upd-iframe"></iframe>');k.append(t).append(c);t.append(m).append(w);w.append(j).append(e).append(o).append(g).append(n).append(a);c.append(q);q.append(d).append(l);l.css("height",q.height()-d.height()-5);var h={onClick:function(x){if($(p).find(".sameusercontainer").hasClass("sameusercontainer")){var y=$(p).find(".sameusercontainer");y.remove()}k.find("#awsuUpdProfileContent").attr("src",x.url);k.find("#awsuUpdProfileContent").find(".awsui-user-profile").removeClass("awsui-user-profile");return true},height:35,nogradient:true};top.window.awsuiProfileTabs=awsui.tabs.init(d,h)}k.attr("userId",f);awsui.ajax.post("./jd?sid="+i+"&cmd=com.actionsoft.apps.profile_load_profiles",{userId:f},function(B){var E=B.data["userInfo"];k.find(".awsui-upd-photo").attr("src",E.userPhoto);k.find(".awsui-upd-info.user-name .user-name").text(E.userName).attr("title",E.userName);if(E.online){k.find(".awsui-upd-user-online").removeClass("un").attr("title",在线)}else{k.find(".awsui-upd-user-online").addClass("un").attr("title",离线)}k.find(".awsui-upd-info.position-name").text(E.positionName==undefined?"":E.positionName).attr("title",E.positionName==undefined?"":E.positionName);k.find(".awsui-upd-info.org-info").text(E.departmentName+"，"+E.companyName).attr("title",E.departmentName+"，"+E.companyName);if(E.mobile==undefined||E.mobile==""){k.find(".awsui-upd-info .awsui-userprofile-info-value.mobile").parent().hide()}else{k.find(".awsui-upd-info .awsui-userprofile-info-value.mobile").parent().show();k.find(".awsui-upd-info .awsui-userprofile-info-value.mobile").text(E.mobile).attr("title",E.mobile)}if(E.officeTel==undefined||E.officeTel==""){k.find(".awsui-upd-info .awsui-userprofile-info-value.office-tel").parent().hide()}else{k.find(".awsui-upd-info .awsui-userprofile-info-value.office-tel").parent().show();k.find(".awsui-upd-info .awsui-userprofile-info-value.office-tel").text(E.officeTel).attr("title",E.officeTel)}if(E.email==undefined||E.email==""){k.find(".awsui-upd-info .awsui-userprofile-info-value.email").parent().hide()}else{k.find(".awsui-upd-info .awsui-userprofile-info-value.email").parent().show();k.find(".awsui-upd-info .awsui-userprofile-info-value.email").text(E.email).attr("title",E.email)}var D=B.data["profileList"];var C=D.length;var x=E.userId.replace(/\&/g,"%26");for(var A=0;A<C;A++){var y=(new Date()).valueOf();var G={item:{url:"./w?sid="+i+"&cmd=com.actionsoft.apps.profile_call_main&profileId="+D[A]["id"]+"&userId="+x,title:D[A]["menuName"],index:A},contextMenu:true,contextMenuTarget:"awsuUpdProfileContent",close:false};top.window.awsuiProfileTabs.addTab(G)}if(C>0){if(s=="userName"){var F={url:"./w?sid="+i+"&cmd=com.actionsoft.apps.profile_call_main&profileId="+D[1]["id"]+"&userId="+x,title:D[1]["menuName"],index:0};var z=top.window.awsuiProfileTabs.getTabLast();$(z).click();top.window.awsuiProfileTabs.tabContainer.stop().animate({left:"0px"},500);top.window.awsuiProfileTabs.getTabFirst().removeClass("current")}else{var F={url:"./w?sid="+i+"&cmd=com.actionsoft.apps.profile_call_main&profileId="+D[0]["id"]+"&userId="+x,title:D[0]["menuName"],index:0};var z=top.window.awsuiProfileTabs.getTabFirst();$(z).click();top.window.awsuiProfileTabs.tabContainer.stop().animate({left:"0px"},500);top.window.awsuiProfileTabs.getTabLast().removeClass("current")}}},"json");k.unbind("scroll.awsui.userpofile").bind("scroll.awsui.userpofile",function(x,y){x.stopPropagation()})}$(document).ready(function(){userprofile()});
/*!
 * =====================================================
 * aws.schedule.js
 * v1.0 (http://www.actionsoft.com.cn)
 * =====================================================
 */
function loadJsFile(c,d){var a=$("<script  type='text/javascript' src='"+c+"'/>");$(d).parent().find("head").append(a)}function getSchedulePage(c,d){var a=window.document.body;loadJsFile("../apps/com.actionsoft.apps.calendar/js/calendar.schedule.js",a);getScheduleInfo(c,d)};